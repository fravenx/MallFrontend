{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/ProductList/ProductList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/ProductList/ProductList.vue","mtime":1678955284186},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/babel.config.js","mtime":1677682822494},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBDYXRlZ29yeSBmcm9tICIuLi9ob21lL2NvbXBvbmVudHMvY2F0ZWdvcnkvQ2F0ZWdvcnkiOwoKY29uc3QgUHJvZHVjdEl0ZW0gPSAoKSA9PiBpbXBvcnQoJy4vUHJvZHVjdEl0ZW0udnVlJyk7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dwYWdlOiB0cnVlLAogICAgICBjb21wb25lbnRLZXk6IDAsCiAgICAgIG9yZGVyOiAn5LiK5p625pe26Ze0JywKICAgICAgb3JkZXJOdW06IDAsCiAgICAgIHJldjogJ+WNh+W6jycsCiAgICAgIHByb2R1Y3RzOiBbXSwKICAgICAgdGVtcFByb2R1Y3RzOiBbXSwKICAgICAgaXNBY3RpdmU6IDQsCiAgICAgIHRhYlBvc2l0aW9uOiAnbGVmdCcsCiAgICAgIGNsb3NhYmxlOiBmYWxzZSwKICAgICAgY3VycmVudERhdGU6IG5ldyBEYXRlKCksCiAgICAgIGNhdGVnb3JpZXM6IFtdLAogICAgICBwYWdlU2l6ZTogMTIsCiAgICAgIC8vIOihqOekuuivt+axguesrOWHoOmhteaVsOaNrgogICAgICBwYWdlTnVtOiAxLAogICAgICBxdWVyeUNhdGVnb3J5SWQ6IDAsCiAgICAgIHRvdGFsOiAwCiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICByZXF1ZXN0LmdldCgnL2NhdGVnb3J5L2FsbCcpLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy5jYXRlZ29yaWVzLnB1c2goLi4ucmVzKTsKICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICB9KTsKICAgIHRoaXMubG9hZCgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2VOdW0gPSB2YWw7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKCiAgICBnZXRQcm9kdWN0QnlJZCh0YWIpIHsKICAgICAgLy8g5qC55o2u5ZWG5ZOB57G7IGNhdGVnb3J5IGlkIOivt+axguatpOexu+aJgOacieWVhuWTgeaVsOaNrgogICAgICB0aGlzLmlzQWN0aXZlID0gNDsKICAgICAgdGhpcy5xdWVyeUNhdGVnb3J5SWQgPSB0aGlzLmNhdGVnb3JpZXNbTnVtYmVyKHRhYi5pbmRleCldLmNhdGVnb3J5SWQ7CiAgICAgIHRoaXMucGFnZU51bSA9IDE7IC8vIOa4heepuuWOn+adpeeahOWFg+e0oAoKICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCgogICAgbG9hZCgpIHsKICAgICAgdGhpcy5zaG93cGFnZSA9IHRydWU7CiAgICAgIHJlcXVlc3QuZ2V0KCcvY2F0ZWdvcnkvcGFnZS8nICsgdGhpcy5xdWVyeUNhdGVnb3J5SWQsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwKICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdOwogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICB0aGlzLnByb2R1Y3RzLnB1c2goLi4ucmVzLmRhdGEuZGF0YSk7CiAgICAgICAgdGhpcy5zb3J0QnkoKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCgogICAgc2hvd0FsbCgpIHsKICAgICAgdGhpcy5xdWVyeUNhdGVnb3J5SWQgPSAwOwogICAgICB0aGlzLmxvYWQoKTsKICAgICAgdGhpcy5pc0FjdGl2ZSA9IDE7CiAgICB9LAoKICAgIHNob3dOZXcoKSB7CiAgICAgIHRoaXMuc2hvd3BhZ2UgPSBmYWxzZTsgLy8g5pyA5paw5LiK5p625piv5oyH5pe26Ze05pep5LqO5oiW562J5LqOIDIwMjEtMTItMTDnmoTml7bpl7QKCiAgICAgIHRoaXMuaXNBY3RpdmUgPSAyOwogICAgICByZXF1ZXN0LmdldCgncHJvZHVjdC9uZXcnKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdOwogICAgICAgIHJlcy5mb3JFYWNoKGUgPT4gewogICAgICAgICAgdGhpcy5wcm9kdWN0cy5wdXNoKGUpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChlcnIgPT4ge30pOwogICAgfSwKCiAgICBzaG93SG90KCkgewogICAgICB0aGlzLnNob3dwYWdlID0gZmFsc2U7IC8vIOeDremUgOaYr+aMh+WUrui0p+mHj+Wkp+S6juaIluetieS6jiA1MDAg55qE5ZWG5ZOBCgogICAgICB0aGlzLmlzQWN0aXZlID0gMzsKICAgICAgcmVxdWVzdC5nZXQoJ3Byb2R1Y3QvaG90JykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucHJvZHVjdHMgPSBbXTsKICAgICAgICByZXMuZm9yRWFjaChlID0+IHsKICAgICAgICAgIHRoaXMucHJvZHVjdHMucHVzaChlKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHt9KTsKICAgIH0sCgogICAgY2hhbmdlKHMsIG51bSkgewogICAgICB0aGlzLm9yZGVyID0gczsKICAgICAgdGhpcy5vcmRlck51bSA9IG51bTsKICAgICAgdGhpcy5zb3J0QnkoKTsKICAgIH0sCgogICAgcmV2ZXJzZSgpIHsKICAgICAgdGhpcy5yZXYgPSB0aGlzLnJldiA9PSAn5Y2H5bqPJyA/ICfpgIbluo8nIDogJ+WNh+W6jyc7CiAgICAgIHRoaXMuc29ydEJ5KCk7CiAgICB9LAoKICAgIGZvcmNlUmVyZW5kZXIoKSB7CiAgICAgIHRoaXMuY29tcG9uZW50S2V5ICs9IDE7CiAgICB9LAoKICAgIGNtcChjMSwgYzIpIHsKICAgICAgLy8g5oyJ54Wn5pe26Ze05o6S5bqPCiAgICAgIGlmICh0aGlzLm9yZGVyTnVtID09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5yZXYgPT0gJ+WNh+W6jycgPyBuZXcgRGF0ZShjMS5jcmVhdGVUaW1lKSAtIG5ldyBEYXRlKGMyLmNyZWF0ZVRpbWUpIDogbmV3IERhdGUoYzIuY3JlYXRlVGltZSkgLSBuZXcgRGF0ZShjMS5jcmVhdGVUaW1lKTsKICAgICAgfSAvLyDmjInnhafku7fmoLzmjpLluo8KICAgICAgZWxzZSBpZiAodGhpcy5vcmRlck51bSA9PSAxKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmV2ID09ICfljYfluo8nID8gYzEucHJvZHVjdFByaWNlIC0gYzIucHJvZHVjdFByaWNlIDogYzIucHJvZHVjdFByaWNlIC0gYzEucHJvZHVjdFByaWNlOyAvLyDmjInnhafllK7otKfph4/ml7bpl7QKICAgICAgfSBlbHNlIGlmICh0aGlzLm9yZGVyTnVtID09IDIpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZXYgPT0gJ+WNh+W6jycgPyBjMS5zb2xkIC0gYzIuc29sZCA6IGMyLnNvbGQgLSBjMS5zb2xkOwogICAgICB9CiAgICB9LAoKICAgIHNvcnRCeSgpIHsKICAgICAgdGhpcy5wcm9kdWN0cy5zb3J0KHRoaXMuY21wKTsKICAgICAgdGhpcy5mb3JjZVJlcmVuZGVyKCk7CiAgICB9CgogIH0sCiAgY29tcG9uZW50czogewogICAgUHJvZHVjdEl0ZW0sCiAgICBDYXRlZ29yeQogIH0KfTs="},{"version":3,"mappings":"AA6HA;AACA;;AACA;;AAEA;EACAA;IACA;MACAC,cADA;MAEAC,eAFA;MAGAC,aAHA;MAIAC,WAJA;MAKAC,SALA;MAMAC,YANA;MAOAC,gBAPA;MAQAC,WARA;MASAC,mBATA;MAUAC,eAVA;MAWAC,uBAXA;MAYAC,cAZA;MAaAC,YAbA;MAcA;MACAC,UAfA;MAgBAC,kBAhBA;MAiBAC;IAjBA;EAmBA,CArBA;;EAsBAC;IACAC,QACAC,GADA,CACA,eADA,EAEAC,IAFA,CAEAC;MACA;IACA,CAJA,EAKAC,KALA,CAKAC;MACAC;IACA,CAPA;IAQA;EACA,CAhCA;;EAiCAC;IACAC;MACA;MACA;IACA,CAJA;;IAKAC;MACA;MACA;IACA,CARA;;IASAC;MACA;MACA;MACA;MACA,iBAJA,CAKA;;MACA;MACA;IACA,CAjBA;;IAmBAC;MACA;MACAX,QACAC,GADA,CACA,wCADA,EACA;QACAW;UACAhB,qBADA;UAEAD;QAFA;MADA,CADA,EAOAO,IAPA,CAOAC;QACA;QACA;QACA;QACA;MACA,CAZA,EAaAC,KAbA,CAaAC;QACAC;MACA,CAfA;IAgBA,CArCA;;IAsCAO;MACA;MACA;MACA;IACA,CA1CA;;IA2CAC;MACA,sBADA,CAGA;;MACA;MACAd,QACAC,GADA,CACA,aADA,EAEAC,IAFA,CAEAC;QACA;QACAA;UACA;QACA,CAFA;MAGA,CAPA,EAQAC,KARA,CAQAC,SARA;IASA,CAzDA;;IA0DAU;MACA,sBADA,CAGA;;MACA;MACAf,QACAC,GADA,CACA,aADA,EAEAC,IAFA,CAEAC;QACA;QACAA;UACA;QACA,CAFA;MAGA,CAPA,EAQAC,KARA,CAQAC,SARA;IASA,CAxEA;;IAyEAW;MACA;MACA;MACA;IACA,CA7EA;;IA8EAC;MACA;MACA;IACA,CAjFA;;IAkFAC;MACA;IACA,CApFA;;IAqFAC;MACA;MACA;QACA,0BACA,iDADA,GAEA,iDAFA;MAGA,CAJA,CAKA;MALA,KAMA;QACA,0BACAC,iCADA,GAEAC,iCAFA,CADA,CAIA;MACA,CALA,MAKA;QACA;MACA;IACA,CArGA;;IAsGAC;MACA;MACA;IACA;;EAzGA,CAjCA;EA4IAC;IACAC,WADA;IAEAC;EAFA;AA5IA","names":["data","showpage","componentKey","order","orderNum","rev","products","tempProducts","isActive","tabPosition","closable","currentDate","categories","pageSize","pageNum","queryCategoryId","total","created","request","get","then","res","catch","err","console","methods","handleSizeChange","handleCurrentChange","getProductById","load","params","showAll","showNew","showHot","change","reverse","forceRerender","cmp","c1","c2","sortBy","components","ProductItem","Category"],"sourceRoot":"src/views/ProductList","sources":["ProductList.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <el-row type=\"flex\" class=\"header\">\r\n      <el-col :span=\"13\" style=\"line-height: 50px\">\r\n        <span class=\"nav-item\"\r\n          ><a @click=\"showAll\" :class=\"{ active: isActive === 1 }\"\r\n            >所有商品</a\r\n          ></span\r\n        >\r\n\r\n        <span class=\"nav-item\"\r\n          ><a @click=\"showNew\" :class=\"{ active: isActive === 2 }\"\r\n            >最新上架</a\r\n          ></span\r\n        >\r\n\r\n        <span class=\"nav-item\"\r\n        ><a @click=\"showHot\" :class=\"{ active: isActive === 3 }\"\r\n          >热销</a\r\n        ></span\r\n        >\r\n\r\n      </el-col>\r\n      <el-col flex=\"1\" style=\"line-height: 50px\"></el-col>\r\n      <el-col :span=\"10\" style=\"line-height: 50px\">\r\n        <span>排序方式：</span>\r\n        <el-dropdown>\r\n          <span class=\"el-dropdown-link\" style=\"cursor: pointer\">\r\n            {{ order }}\r\n            <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n          </span>\r\n          <el-dropdown-menu slot=\"dropdown\">\r\n            <a\r\n              href=\"javascript:;\"\r\n              @click=\"change('上架时间', 0)\"\r\n              style=\"text-decoration: none; color: #333\"\r\n            >\r\n              <el-dropdown-item>上架时间</el-dropdown-item>\r\n            </a>\r\n            <a\r\n              href=\"javascript:;\"\r\n              @click=\"change('价格', 1)\"\r\n              style=\"text-decoration: none; color: #333\"\r\n            >\r\n              <el-dropdown-item>价格</el-dropdown-item>\r\n            </a>\r\n            <a\r\n              href=\"javascript:;\"\r\n              @click=\"change('已售量', 2)\"\r\n              style=\"text-decoration: none; color: #333\"\r\n            >\r\n              <el-dropdown-item>已售量</el-dropdown-item>\r\n            </a>\r\n            <a\r\n              href=\"javascript:;\"\r\n              @click=\"change('评价数', 3)\"\r\n              style=\"text-decoration: none; color: #333\"\r\n            >\r\n              <el-dropdown-item>评价数</el-dropdown-item>\r\n            </a>\r\n          </el-dropdown-menu>\r\n        </el-dropdown>\r\n        <el-button size=\"small\" class=\"order-btn\" @click=\"reverse\">{{\r\n          rev\r\n        }}</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-container>\r\n    <el-aside width=\"100px\">\r\n    <div>\r\n      <el-row>\r\n        <span class=\"nav-item\">\r\n          <a>商品分类 </a></span>\r\n      </el-row>\r\n      <el-row class=\"classify-container\">\r\n        <el-tabs\r\n            :tab-position=\"tabPosition\"\r\n            :lazy=\"true\"\r\n            @tab-click=\"getProductById\"\r\n        >\r\n          <el-tab-pane\r\n              v-for=\"category in categories\"\r\n              :key=\"category.categoryId\"\r\n              :label=\"category.categoryName\"\r\n              class=\"tab-pane\"\r\n          >\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-row>\r\n    </div>\r\n    </el-aside>\r\n\r\n    <el-container>\r\n      <el-main>\r\n    <el-row style=\"display: flex; flex-wrap: wrap; justify-content: flex-start\">\r\n      <div v-for=\"(item, index) in products\" :key=\"index\">\r\n        <ProductItem :product=\"item\" :key=\"componentKey\" />\r\n      </div>\r\n    </el-row>\r\n      </el-main>\r\n\r\n      <el-footer>\r\n      <div class=\"block\" align=\"center\">\r\n        <el-pagination\r\n            v-if=\"showpage\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :page-sizes=\"[12, 8, 4]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n\r\n      </el-footer>\r\n\r\n\r\n    </el-container>\r\n    </el-container>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../utils/request'\r\nimport Category from \"../home/components/category/Category\";\r\nconst ProductItem = () => import('./ProductItem.vue')\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showpage: true,\r\n      componentKey: 0,\r\n      order: '上架时间',\r\n      orderNum: 0,\r\n      rev: '升序',\r\n      products: [],\r\n      tempProducts: [],\r\n      isActive: 4,\r\n      tabPosition: 'left',\r\n      closable: false,\r\n      currentDate: new Date(),\r\n      categories: [],\r\n      pageSize: 12,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      queryCategoryId: 0,\r\n      total: 0\r\n    }\r\n  },\r\n  created() {\r\n    request\r\n        .get('/category/all')\r\n        .then((res) => {\r\n          this.categories.push(...res)\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    this.load()\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNum = val;\r\n      this.load()\r\n    },\r\n    getProductById(tab) {\r\n      // 根据商品类 category id 请求此类所有商品数据\r\n      this.isActive = 4\r\n      this.queryCategoryId = this.categories[Number(tab.index)].categoryId\r\n      this.pageNum = 1\r\n      // 清空原来的元素\r\n      this.products = []\r\n      this.load()\r\n    },\r\n\r\n    load() {\r\n        this.showpage = true;\r\n        request\r\n            .get('/category/page/' + this.queryCategoryId,{\r\n              params: {\r\n                pageNum: this.pageNum,\r\n                pageSize: this.pageSize\r\n              }\r\n            })\r\n            .then((res) => {\r\n              this.products = []\r\n              this.total = res.data.total\r\n              this.products.push(...res.data.data)\r\n              this.sortBy()\r\n            })\r\n            .catch(err => {\r\n              console.log(err)\r\n            })\r\n    },\r\n    showAll() {\r\n      this.queryCategoryId = 0\r\n      this.load()\r\n      this.isActive = 1\r\n    },\r\n    showNew() {\r\n      this.showpage = false;\r\n\r\n      // 最新上架是指时间早于或等于 2021-12-10的时间\r\n      this.isActive = 2\r\n      request\r\n        .get('product/new')\r\n        .then((res) => {\r\n          this.products = []\r\n          res.forEach((e) => {\r\n            this.products.push(e)\r\n          })\r\n        })\r\n        .catch((err) => {})\r\n    },\r\n    showHot() {\r\n      this.showpage = false;\r\n\r\n      // 热销是指售货量大于或等于 500 的商品\r\n      this.isActive = 3\r\n      request\r\n        .get('product/hot')\r\n        .then((res) => {\r\n          this.products = []\r\n          res.forEach((e) => {\r\n            this.products.push(e)\r\n          })\r\n        })\r\n        .catch((err) => {})\r\n    },\r\n    change(s, num) {\r\n      this.order = s\r\n      this.orderNum = num\r\n      this.sortBy()\r\n    },\r\n    reverse() {\r\n      this.rev = this.rev == '升序' ? '逆序' : '升序'\r\n      this.sortBy()\r\n    },\r\n    forceRerender() {\r\n      this.componentKey += 1\r\n    },\r\n    cmp(c1, c2) {\r\n      // 按照时间排序\r\n      if (this.orderNum == 0) {\r\n        return this.rev == '升序'\r\n          ? new Date(c1.createTime) - new Date(c2.createTime)\r\n          : new Date(c2.createTime) - new Date(c1.createTime)\r\n      }\r\n      // 按照价格排序\r\n      else if (this.orderNum == 1) {\r\n        return this.rev == '升序'\r\n          ? c1.productPrice - c2.productPrice\r\n          : c2.productPrice - c1.productPrice\r\n        // 按照售货量时间\r\n      } else if (this.orderNum == 2) {\r\n        return this.rev == '升序' ? c1.sold - c2.sold : c2.sold - c1.sold\r\n      }\r\n    },\r\n    sortBy() {\r\n      this.products.sort(this.cmp)\r\n      this.forceRerender()\r\n    }\r\n  },\r\n  components: {\r\n    ProductItem,\r\n    Category\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  width: 80%;\r\n  margin-left: 50%;\r\n  transform: translate(-50%);\r\n  margin-bottom: 40px;\r\n  margin-top: 30px;\r\n}\r\n.active {\r\n  color: dodgerblue;\r\n}\r\n.test {\r\n  height: 200px;\r\n  width: 200px;\r\n  background-color: pink;\r\n}\r\n.header {\r\n  height: 50px;\r\n  border-bottom: 1px solid rgba(204, 204, 204, 0.5);\r\n}\r\n.nav-item {\r\n  color: #8f8f96;\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n}\r\n.nav-item:hover {\r\n  color: #ff143c;\r\n}\r\n.order-btn {\r\n  height: 20px;\r\n  width: 40px;\r\n  line-height: 0;\r\n  padding-left: 8px;\r\n  margin-left: 5px;\r\n}\r\n</style>"]}]}