{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/category/CategoryCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/category/CategoryCard.vue","mtime":1677682822549},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/babel.config.js","mtime":1677682822494},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvcmVxdWVzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgcHJvZHVjdDogewogICAgICB0eXBlOiBPYmplY3QsCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQoKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaW5hbFByaWNlKCkgewogICAgICBjb25zdCB7CiAgICAgICAgcHJvZHVjdFByaWNlLAogICAgICAgIGRpc2NvdW50CiAgICAgIH0gPSB0aGlzLnByb2R1Y3Q7CiAgICAgIHJldHVybiAocHJvZHVjdFByaWNlICogZGlzY291bnQpLnRvRml4ZWQoMik7CiAgICB9CgogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UHJvZHVjdERldGFpbHMoKSB7CiAgICAgIC8vIOeCueWHu0NhcmTnu4Tku7bvvIzpgJrov4fot6/nlLHkvKDpgJLllYblk4FpZOe7mUR0YWlsc+e7hOS7tu+8jOacn+mXtOWPkei1t+ivt+axguOAggogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9kZXRhaWxzJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IHRoaXMucHJvZHVjdC5wcm9kdWN0SWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDlsIbllYblk4HliqDlhaXliLDotK3nianovaYKICAgIGFkZFRvQ2FydChlKSB7CiAgICAgIGxldCBwSWQgPSB0aGlzLnByb2R1Y3QucHJvZHVjdElkOwogICAgICBsZXQgdUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyk7CgogICAgICBpZiAodUlkKSB7CiAgICAgICAgcmVxdWVzdC5wb3N0KCcvY2FydCcsIHsKICAgICAgICAgIHVzZXJJZDogdUlkLAogICAgICAgICAgcHJvZHVjdElkOiBwSWQKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gJzEnKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+35YWI55m75b2V77yBJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgfSk7CiAgICAgIH0gLy8g6Kem5Y+R54i257uE5Lu2IExheW91dOeahCBsb2dvdXTvvIzliLfmlrBIZWFkZXLnu4Tku7YKCgogICAgICB0aGlzLiRlbWl0KCdyZWxvYWRIZWFkZXInKTsgLy8g6Zi75q2i5LqL5Lu25YaS5rOhCgogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSwKCiAgICBhZGRUb0xpa2UoZSkgewogICAgICBsZXQgcElkID0gdGhpcy5wcm9kdWN0LnByb2R1Y3RJZDsKICAgICAgbGV0IHVJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwoKICAgICAgaWYgKHVJZCkgewogICAgICAgIHJlcXVlc3QucG9zdCgnL2xpa2UnLCB7CiAgICAgICAgICBwcm9kdWN0SWQ6IHBJZCwKICAgICAgICAgIHVzZXJJZDogdUlkCiAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5jb2RlID09ICcxJykgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAnMCcpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+35YWI55m75b2V77yBJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"AAeA;AACA;EACAA;IACAC;MACAC,YADA;;MAEAC;QACA;MACA;;IAJA;EADA,CADA;EASAC;IACAC;MACA;QAAAC;QAAAC;MAAA;MACA;IACA;;EAJA,CATA;EAeAC;IACAC;MACA;MACA;QACAC,gBADA;QAEAC;UACAC;QADA;MAFA;IAMA,CATA;;IAUA;IACAC;MACA;MACA;;MACA;QACAC,QACAC,IADA,CACA,OADA,EACA;UACAC,WADA;UAEAC;QAFA,CADA,EAKAC,IALA,CAKAC;UACA;YACA;cACAC,gBADA;cAEAlB,eAFA;cAGAmB;YAHA;UAKA,CANA,MAMA;YACA;cACAD,gBADA;cAEAlB,eAFA;cAGAmB;YAHA;UAKA;QACA,CAnBA,EAoBAC,KApBA,CAoBAC;UACAC;QACA,CAtBA;MAuBA,CAxBA,MAwBA;QACA;UACAJ,gBADA;UAEAlB,eAFA;UAGAmB;QAHA;MAKA,CAjCA,CAkCA;;;MACA,2BAnCA,CAoCA;;MACAI;IACA,CAjDA;;IAkDAC;MACA;MACA;;MACA;QACAZ,QACAC,IADA,CACA,OADA,EACA;UACAE,cADA;UAEAD;QAFA,CADA,EAKAE,IALA,CAKAC;UACA;YACA;cACAC,gBADA;cAEAlB,eAFA;cAGAmB;YAHA;YAKA;UACA;;UACA;YACA;cACAD,gBADA;cAEAlB,eAFA;cAGAmB;YAHA;UAKA;QACA,CArBA,EAsBAC,KAtBA,CAsBAC;UACAC;QACA,CAxBA;MAyBA,CA1BA,MA0BA;QACA;UACAJ,gBADA;UAEAlB,eAFA;UAGAmB;QAHA;MAKA;;MACAI;IACA;;EAvFA;AAfA","names":["props","product","type","default","computed","finalPrice","productPrice","discount","methods","getProductDetails","path","query","id","addToCart","request","post","userId","productId","then","res","message","duration","catch","err","console","e","addToLike"],"sourceRoot":"src/views/home/components/category","sources":["CategoryCard.vue"],"sourcesContent":["<template>\r\n  <el-card\r\n    class=\"card\"\r\n    title=\"点击可查看商品详情\"\r\n    @click.native=\"getProductDetails\"\r\n  >\r\n    <img :src=\"product.imgSrc\" class=\"image\" />\r\n    <p class=\"pname\">{{ product.productName }}</p>\r\n    <div class=\"price\"\r\n      >￥{{ finalPrice }}</div\r\n    >\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../../utils/request'\r\nexport default {\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    finalPrice() {\r\n      const {productPrice, discount} = this.product\r\n      return (productPrice*discount).toFixed(2)\r\n    }\r\n  },\r\n  methods: {\r\n    getProductDetails() {\r\n      // 点击Card组件，通过路由传递商品id给Dtails组件，期间发起请求。\r\n      this.$router.push({\r\n        path: '/details',\r\n        query: {\r\n          id: this.product.productId\r\n        }\r\n      })\r\n    },\r\n    // 将商品加入到购物车\r\n    addToCart(e) {\r\n      let pId = this.product.productId\r\n      let uId = sessionStorage.getItem('userId')\r\n      if (uId) {\r\n        request\r\n          .post('/cart', {\r\n            userId: uId,\r\n            productId: pId\r\n          })\r\n          .then((res) => {\r\n            if (res.code == '1') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'warning',\r\n                duration: 1000\r\n              })\r\n            } else {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n      } else {\r\n        this.$message({\r\n          message: '请先登录！',\r\n          type: 'warning',\r\n          duration: 1000\r\n        })\r\n      }\r\n      // 触发父组件 Layout的 logout，刷新Header组件\r\n      this.$emit('reloadHeader')\r\n      // 阻止事件冒泡\r\n      e.stopPropagation()\r\n    },\r\n    addToLike(e) {\r\n      let pId = this.product.productId\r\n      let uId = sessionStorage.getItem('userId')\r\n      if (uId) {\r\n        request\r\n          .post('/like', {\r\n            productId: pId,\r\n            userId: uId\r\n          })\r\n          .then((res) => {\r\n            if (res.code == '1') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'warning',\r\n                duration: 1000\r\n              })\r\n              return\r\n            }\r\n            if (res.code == '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n      } else {\r\n        this.$message({\r\n          message: '请先登录！',\r\n          type: 'warning',\r\n          duration: 1000\r\n        })\r\n      }\r\n      e.stopPropagation()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.image {\r\n  margin-left: 50%;\r\n  width: 100%;\r\n  transform: translate(-50%);\r\n  display: block;\r\n}\r\n.card {\r\n  height: 200px;\r\n  width: 150px;\r\n  margin-left: 20px;\r\n  margin-top: 10px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.card:hover {\r\n  transform: translateY(-1.5px);\r\n}\r\n\r\n.price {\r\n  color: red;\r\n  margin-left: 10%;\r\n  font-size: 15px;\r\n  text-align: center;\r\n}\r\n\r\n.pname {\r\n  text-align: center;\r\n  font-size: 13px;\r\n  padding: 3px 0 3px 0;\r\n}\r\n</style>"]}]}