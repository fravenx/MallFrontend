{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/admin/users/AllUsers.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/admin/users/AllUsers.vue","mtime":1677682822546},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/babel.config.js","mtime":1677682822494},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vLi4vLi4vdXRpbHMvcmVxdWVzdCc7Cgpjb25zdCBTdWJIZWFkZXIgPSAoKSA9PiBpbXBvcnQoJy4uLy4uL2NvbXBvbmVudHMvU3ViSGVhZGVyLnZ1ZScpOwoKY29uc3QgQ29udGFpbmVyID0gKCkgPT4gaW1wb3J0KCcuLi8uLi9jb21wb25lbnRzL0NvbnRhaW5lci52dWUnKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSG9tZScsCiAgY29tcG9uZW50czogewogICAgU3ViSGVhZGVyLAogICAgQ29udGFpbmVyCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9LAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIHBhZ2VTaXpl5piv6KGo56S65LiA6aG15pyA5aSa5Y+v5Lul6KOF5Yeg5p2h5pWw5o2uCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgLy8g6KGo56S66K+35rGC56ys5Yeg6aG15pWw5o2uCiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIC8vIOafpeivouWFs+mUruWtlwogICAgICBrZXk6ICcnLAogICAgICAvLyDmgLvlhbHlh6DmnaHmlbDmja4KICAgICAgdG90YWw6IDEwMCwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgaXNBZGQ6IHRydWUKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8g5Y+R6YCB6K+35rGCLOiuvue9rueUqOaIt+eKtuaAgQogICAgc2V0U3RhdHVzKHN0YXR1cywgdUlkKSB7CiAgICAgIHJlcXVlc3QucGF0Y2goJy91c2VyLycgKyB1SWQgKyAnLycgKyBzdGF0dXMpLnRoZW4ocmVzID0+IHt9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKCiAgICBjbGVhckZpbHRlcigpIHsKICAgICAgdGhpcy4kcmVmcy5maWx0ZXJUYWJsZS5jbGVhckZpbHRlcigpOwogICAgfSwKCiAgICBmb3JtYXR0ZXIocm93LCBjb2x1bW4pIHsKICAgICAgcmV0dXJuIHJvdy5hZGRyZXNzOwogICAgfSwKCiAgICBmaWx0ZXJUYWcodmFsdWUsIHJvdykgewogICAgICByZXR1cm4gcm93LnJvbGUgPT09IHZhbHVlOwogICAgfSwKCiAgICBmaWx0ZXJIYW5kbGVyKHZhbHVlLCByb3csIGNvbHVtbikgewogICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsncHJvcGVydHknXTsKICAgICAgcmV0dXJuIHJvd1twcm9wZXJ0eV0gPT09IHZhbHVlOwogICAgfSwKCiAgICAvLyDliLfmlrDooajmoLwKICAgIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIC8vIOWIoOmZpAogICAgZGVsZXRlUm93KGluZGV4LCByb3cpIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5Yig6Zmk6K+l55So5oi35ZCXPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBsZXQgZGVsZXRlSWQgPSByb3cudXNlcklkOwogICAgICAgIHJlcXVlc3QuZGVsZXRlKCcvdXNlci8nICsgZGVsZXRlSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip/vvIEnLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDnvJbovpEKICAgIGhhbmRsZUVkaXQocm93KSB7CiAgICAgIHRoaXMuaXNBZGQgPSBmYWxzZTsKICAgICAgdGhpcy5mb3JtID0gcm93OwogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCgogICAgc2VhcmNoKCkgewogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCgogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbDsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGDlvZPliY3pobU6ICR7dmFsfWApCiAgICAgIHRoaXMucGFnZU51bSA9IHZhbDsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIC8vIOWKoOi9veihqOagvOaVsOaNrgogICAgbG9hZCgpIHsKICAgICAgcmVxdWVzdC5nZXQoJy91c2VyJywgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLAogICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsCiAgICAgICAgICBrZXk6IHRoaXMua2V5CiAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09ICcwJykgewogICAgICAgICAgdmFyIF9yZXMkZGF0YSwgX3JlcyRkYXRhJGRhdGE7CgogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbXTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgIHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVzJGRhdGEgPSByZXMuZGF0YSkgPT09IG51bGwgfHwgX3JlcyRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3JlcyRkYXRhJGRhdGEgPSBfcmVzJGRhdGEuZGF0YSkgPT09IG51bGwgfHwgX3JlcyRkYXRhJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXMkZGF0YSRkYXRhLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGl0ZW0uaW5kZXggPSBpbmRleCArIDE7CiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2goaXRlbSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBhZGRVc2VyKCkgewogICAgICB0aGlzLmlzQWRkID0gdHJ1ZTsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZm9ybSA9IHt9OwogICAgfSwKCiAgICBzYXZlKCkgewogICAgICBpZiAodGhpcy5mb3JtLnVzZXJJZCkgewogICAgICAgIHJlcXVlc3QucG9zdCgndXNlci9hY2NvdW50JywgdGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55aSx6LSl77yM6K+36IGU57O7566h55CG5ZGY77yBJywKICAgICAgICAgICAgICB0eXBlOiAnZmFpbGVkJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIOWIt+aWsOihqOagvOaVsOaNrgogICAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5re75Yqg5paw55So5oi3CiAgICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlci9hZGQnLCB0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7fSk7CiAgICAgIH0KICAgIH0sCgogICAgcmVzZXRQYXNzd29yZCh1c2VyKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruWumuimgemHjee9ruivpeeUqOaIt+WvhueggT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgbGV0IHVJZCA9IHVzZXIudXNlcklkOwogICAgICAgIHJlcXVlc3QucGF0Y2goJy91c2VyL3Jlc2V0LycgKyB1SWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raIJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZCgpOwogIH0KCn07"},{"version":3,"mappings":"AA6IA;;AACA;;AACA;;AAEA;EACAA,YADA;EAEAC;IACAC,SADA;IAEAC;EAFA,CAFA;;EAMAC;IACA;MACAC,QADA;MAEAC,wBAFA;MAGA;MACAC,YAJA;MAKA;MACAC,UANA;MAOA;MACAC,OARA;MASA;MACAC,UAVA;MAWAC,aAXA;MAYAC;IAZA;EAcA,CArBA;;EAsBAC;IACA;IACAC;MACAC,QACAC,KADA,CACA,6BADA,EAEAC,IAFA,CAEAC,SAFA,EAGAC,KAHA,CAGAC;QACAC;MACA,CALA;IAMA,CATA;;IAUAC;MACA;IACA,CAZA;;IAaAC;MACA;IACA,CAfA;;IAgBAC;MACA;IACA,CAlBA;;IAmBAC;MACA;MACA;IACA,CAtBA;;IAuBA;IACAC;MACA;IACA,CA1BA;;IA2BA;IACAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAKAb,IALA,CAKA;QACA;QACAF;UACA;YACA;cACAgB,gBADA;cAEAD;YAFA;YAIA;UACA;QACA,CARA;MASA,CAhBA,EAiBAX,KAjBA,CAiBA;QACA;UACAW,YADA;UAEAC;QAFA;MAIA,CAtBA;IAuBA,CApDA;;IAqDA;IACAC;MACA;MACA;MACA;IACA,CA1DA;;IA2DAC;MACA;IACA,CA7DA;;IA8DAC;MACA;MACA;IACA,CAjEA;;IAkEAC;MACA;MACA;MACA;IACA,CAtEA;;IAuEA;IACAC;MACArB,QACAsB,GADA,CACA,OADA,EACA;QACAC;UACA9B,qBADA;UAEAD,uBAFA;UAGAE;QAHA;MADA,CADA,EAQAQ,IARA,CAQAC;QACA;UAAA;;UACA;YACAa,gBADA;YAEAD,eAFA;YAGAS;UAHA;UAKA;UACA;UACAlB;UACAH;YACAsB;YACA;UACA,CAHA;QAIA;MACA,CAvBA;IAwBA,CAjGA;;IAkGAC;MACA;MACA;MACA;IACA,CAtGA;;IAuGAC;MACA;QACA3B,QACA4B,IADA,CACA,cADA,EACA,SADA,EAEA1B,IAFA,CAEAC;UACA;YACA;UACA,CAFA,MAEA;YACA;cACAa,uBADA;cAEAD;YAFA;UAIA;QACA,CAXA,EAYAX,KAZA,CAYAC;UACAC;QACA,CAdA,EAeAJ,IAfA,CAeA;UACA;UACA;QACA,CAlBA;MAmBA,CApBA,MAoBA;QACA;QACAF,QACA4B,IADA,CACA,WADA,EACA,SADA,EAEA1B,IAFA,CAEAC;UACA;YACA;YACA;YACA;cACAa,gBADA;cAEAD,eAFA;cAGAS;YAHA;UAKA;QACA,CAZA,EAaApB,KAbA,CAaAC,SAbA;MAcA;IACA,CA7IA;;IA8IAwB;MACA;QACAhB,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAKAb,IALA,CAKA;QACA;QACAF;UACA;YACA;cACAgB,gBADA;cAEAD,eAFA;cAGAS;YAHA;UAKA;QACA,CARA;MASA,CAhBA,EAiBApB,KAjBA,CAiBA;QACA;UACAW,YADA;UAEAC;QAFA;MAIA,CAtBA;IAuBA;;EAtKA,CAtBA;;EA8LAc;IACA;EACA;;AAhMA","names":["name","components","SubHeader","Container","data","form","dialogFormVisible","pageSize","pageNum","key","total","tableData","isAdd","methods","setStatus","request","patch","then","res","catch","err","console","clearFilter","formatter","filterTag","filterHandler","refreshTable","deleteRow","confirmButtonText","cancelButtonText","type","message","handleEdit","search","handleSizeChange","handleCurrentChange","load","get","params","duration","item","addUser","save","post","resetPassword","created"],"sourceRoot":"src/pages/admin/users","sources":["AllUsers.vue"],"sourcesContent":["<template>\r\n  <Container>\r\n    <template slot>\r\n      <SubHeader>\r\n        <template v-slot>管理所有用户</template>\r\n      </SubHeader>\r\n      <el-button type=\"primary\" @click=\"addUser\">新增用户</el-button>\r\n      <el-button type=\"primary\" @click=\"refreshTable\">刷新</el-button>\r\n      <el-form @submit.native.prevent>\r\n        <el-input\r\n          v-model=\"key\"\r\n          placeholder=\"请输入内容\"\r\n          style=\"margin-top: 10px; width: 250px\"\r\n          clearable\r\n        ></el-input>\r\n        <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"search\">查询</el-button>\r\n      </el-form>\r\n      <el-table :data=\"tableData\" style=\"margin-top: 10px\" border stripe>\r\n        <el-table-column\r\n          prop=\"index\"\r\n          label=\"序号\"\r\n          style=\"height: 30px\"\r\n          width=\"70px\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"用户名\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"realName\" label=\"真实姓名\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"telephone\" label=\"联系电话\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"age\" label=\"年龄\" sortable align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"sex\" label=\"性别\" align=\"center\"></el-table-column>\r\n        <el-table-column\r\n          prop=\"role\"\r\n          label=\"权限角色\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          :filters=\"[\r\n            { text: '管理员', value: 'admin' },\r\n            { text: '商家', value: 'shop' },\r\n            { text: '客户', value: 'user' }\r\n          ]\"\r\n          :filter-method=\"filterTag\"\r\n          filter-placement=\"bottom-end\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-tag\r\n              :type=\"\r\n                scope.row.role === 'admin'\r\n                  ? 'primary'\r\n                  : scope.row.role === 'shop'\r\n                  ? 'warning'\r\n                  : 'success'\r\n              \"\r\n              disable-transitions\r\n            >\r\n              {{\r\n                scope.row.role === 'admin' ? '管理员' : scope.row.role === 'shop' ? '商家' : '客户'\r\n              }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"status\" label=\"账号状态\" width=\"100px\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.status\"\r\n              :active-value=\"1\"\r\n              :inactive-value=\"0\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              @change=\"setStatus($event, scope.row.userId)\"\r\n            ></el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" fixed=\"right\" label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              @click=\"handleEdit(scope.row)\"\r\n              size=\"mini\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              circle\r\n            ></el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              circle\r\n              size=\"mini\"\r\n              @click.native.prevent=\"deleteRow(scope.$index, scope.row)\"\r\n            ></el-button>\r\n            <el-tooltip content=\"重置该用户密码\" placement=\"top\" effect=\"dark\">\r\n              <el-button\r\n                type=\"warning\"\r\n                size=\"mini\"\r\n                circle=\"\"\r\n                @click.native.prevent=\"resetPassword(scope.row)\"\r\n              >\r\n                <i class=\"fas fa-shield-alt\"></i>\r\n              </el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-sizes=\"[5, 10, 100]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        style=\"margin-top: 10px\"\r\n      ></el-pagination>\r\n\r\n      <!-- 添加信息弹出 -->\r\n      <el-dialog title=\"填入个人信息\" :visible.sync=\"dialogFormVisible\" width=\"50%\">\r\n        <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\r\n          <el-form-item label=\"用户名\" style=\"margin-bottom: 7px\" v-if=\"isAdd\">\r\n            <el-input v-model=\"form.username\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"真实姓名\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.realName\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系电话\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.telephone\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"权限角色\" style=\"margin-bottom: 7px\">\r\n            <el-radio-group v-model=\"form.role\">\r\n              <el-radio label=\"admin\">管理员</el-radio>\r\n              <el-radio label=\"shop\">商家</el-radio>\r\n              <el-radio label=\"user\">客户</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </template>\r\n  </Container>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../utils/request'\r\nconst SubHeader = () => import('../../components/SubHeader.vue')\r\nconst Container = () => import('../../components/Container.vue')\r\n\r\nexport default {\r\n  name: 'Home',\r\n  components: {\r\n    SubHeader,\r\n    Container\r\n  },\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      // pageSize是表示一页最多可以装几条数据\r\n      pageSize: 10,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      // 查询关键字\r\n      key: '',\r\n      // 总共几条数据\r\n      total: 100,\r\n      tableData: [],\r\n      isAdd: true\r\n    }\r\n  },\r\n  methods: {\r\n    // 发送请求,设置用户状态\r\n    setStatus(status, uId) {\r\n      request\r\n        .patch('/user/' + uId + '/' + status)\r\n        .then(res => {})\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    clearFilter() {\r\n      this.$refs.filterTable.clearFilter()\r\n    },\r\n    formatter(row, column) {\r\n      return row.address\r\n    },\r\n    filterTag(value, row) {\r\n      return row.role === value\r\n    },\r\n    filterHandler(value, row, column) {\r\n      const property = column['property']\r\n      return row[property] === value\r\n    },\r\n    // 刷新表格\r\n    refreshTable() {\r\n      this.load()\r\n    },\r\n    // 删除\r\n    deleteRow(index, row) {\r\n      this.$confirm('确认删除该用户吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let deleteId = row.userId\r\n          request.delete('/user/' + deleteId).then(res => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: '删除成功！',\r\n                type: 'success'\r\n              })\r\n              this.load()\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    // 编辑\r\n    handleEdit(row) {\r\n      this.isAdd = false\r\n      this.form = row\r\n      this.dialogFormVisible = true\r\n    },\r\n    search() {\r\n      this.load()\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.pageNum = val\r\n      this.load()\r\n    },\r\n    // 加载表格数据\r\n    load() {\r\n      request\r\n        .get('/user', {\r\n          params: {\r\n            pageNum: this.pageNum,\r\n            pageSize: this.pageSize,\r\n            key: this.key\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.code == '0') {\r\n            this.$message({\r\n              message: res.msg,\r\n              type: 'success',\r\n              duration: 1000\r\n            })\r\n            this.total = res.data.total\r\n            this.tableData = []\r\n            console.log(res.data)\r\n            res?.data?.data?.forEach((item, index) => {\r\n              item.index = index + 1\r\n              this.tableData.push(item)\r\n            })\r\n          }\r\n        })\r\n    },\r\n    addUser() {\r\n      this.isAdd = true\r\n      this.dialogFormVisible = true\r\n      this.form = {}\r\n    },\r\n    save() {\r\n      if (this.form.userId) {\r\n        request\r\n          .post('user/account', this.form)\r\n          .then(res => {\r\n            if (res.code === '0') {\r\n              this.dialogFormVisible = false\r\n            } else {\r\n              this.$message({\r\n                message: '修改失败，请联系管理员！',\r\n                type: 'failed'\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n          })\r\n          .then(() => {\r\n            // 刷新表格数据\r\n            this.load()\r\n          })\r\n      } else {\r\n        // 添加新用户\r\n        request\r\n          .post('/user/add', this.form)\r\n          .then(res => {\r\n            if (res.code === '0') {\r\n              this.dialogFormVisible = false\r\n              this.load()\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {})\r\n      }\r\n    },\r\n    resetPassword(user) {\r\n      this.$confirm('确定要重置该用户密码?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let uId = user.userId\r\n          request.patch('/user/reset/' + uId).then(res => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消'\r\n          })\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n  }\r\n}\r\n</script>\r\n"]}]}