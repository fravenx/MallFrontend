{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/admin/users/AllShops.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/admin/users/AllShops.vue","mtime":1677682822546},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/babel.config.js","mtime":1677682822494},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vLi4vLi4vdXRpbHMvcmVxdWVzdCc7Cgpjb25zdCBTdWJIZWFkZXIgPSAoKSA9PiBpbXBvcnQoJy4uLy4uL2NvbXBvbmVudHMvU3ViSGVhZGVyLnZ1ZScpOwoKY29uc3QgQ29udGFpbmVyID0gKCkgPT4gaW1wb3J0KCcuLi8uLi9jb21wb25lbnRzL0NvbnRhaW5lci52dWUnKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTdWJIZWFkZXIsCiAgICBDb250YWluZXIKICB9LAogIG5hbWU6ICdIb21lJywKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9LAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMjogZmFsc2UsCiAgICAgIC8vIHBhZ2VTaXpl5piv6KGo56S65LiA6aG15pyA5aSa5Y+v5Lul6KOF5Yeg5p2h5pWw5o2uCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgLy8g6KGo56S66K+35rGC56ys5Yeg6aG15pWw5o2uCiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIC8vIOafpeivouWFs+mUruWtlwogICAgICBrZXk6ICcnLAogICAgICAvLyDmgLvlhbHlh6DmnaHmlbDmja4KICAgICAgdG90YWw6IDAsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHNob3BQcm9kdWN0czogW10KICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8g5Y+R6YCB6K+35rGCLOiuvue9rueUqOaIt+eKtuaAgQogICAgc2V0U3RhdHVzKHN0YXR1cywgdUlkKSB7CiAgICAgIHJlcXVlc3QucGF0Y2goJy91c2VyLycgKyB1SWQgKyAnLycgKyBzdGF0dXMpLnRoZW4ocmVzID0+IHt9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKCiAgICBkZWxldGVQKGluZGV4LCByb3dzKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBsZXQgZGVsZXRlSWQgPSByb3dzW2luZGV4XS5wcm9kdWN0SWQ7CiAgICAgICAgcm93cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIHJlcXVlc3QuZGVsZXRlKCcvcHJvZHVjdC8nICsgZGVsZXRlSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip/vvIEnLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhkZWxldGVJZCk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBzZWVEZXRhaWwocm93KSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUyID0gdHJ1ZTsKICAgICAgcmVxdWVzdC5nZXQoJy9wcm9kdWN0L3Nob3BfaWQvJyArIHJvdy5zaG9wSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnNob3BQcm9kdWN0cyA9IFtdOwogICAgICAgIHJlcy5kYXRhLmZvckVhY2goKGUsIGkpID0+IHsKICAgICAgICAgIGUuaW5kZXggPSBpICsgMTsKICAgICAgICAgIHRoaXMuc2hvcFByb2R1Y3RzLnB1c2goZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBjbGVhckZpbHRlcigpIHsKICAgICAgdGhpcy4kcmVmcy5maWx0ZXJUYWJsZS5jbGVhckZpbHRlcigpOwogICAgfSwKCiAgICBmb3JtYXR0ZXIocm93LCBjb2x1bW4pIHsKICAgICAgcmV0dXJuIHJvdy5hZGRyZXNzOwogICAgfSwKCiAgICBmaWx0ZXJUYWcodmFsdWUsIHJvdykgewogICAgICByZXR1cm4gcm93LnJvbGUgPT09IHZhbHVlOwogICAgfSwKCiAgICBmaWx0ZXJIYW5kbGVyKHZhbHVlLCByb3csIGNvbHVtbikgewogICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsncHJvcGVydHknXTsKICAgICAgcmV0dXJuIHJvd1twcm9wZXJ0eV0gPT09IHZhbHVlOwogICAgfSwKCiAgICAvLyDliLfmlrDooajmoLwKICAgIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIC8vIOWIoOmZpAogICAgZGVsZXRlUm93KGluZGV4LCByb3cpIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5Yig6Zmk6K+l55So5oi35ZCXPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBsZXQgZGVsZXRlSWQgPSByb3cudXNlcklkOwogICAgICAgIHJlcXVlc3QuZGVsZXRlKCcvdXNlci8nICsgZGVsZXRlSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip/vvIEnLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDnvJbovpEKICAgIGhhbmRsZUVkaXQocm93KSB7CiAgICAgIHRoaXMuZm9ybSA9IHJvdzsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICB9LAoKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKQogICAgICB0aGlzLnBhZ2VOdW0gPSB2YWw7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKCiAgICAvLyDliqDovb3ooajmoLzmlbDmja4KICAgIGxvYWQoKSB7CiAgICAgIHJlcXVlc3QuZ2V0KCcvdXNlcicsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIC8vICHorr7nva7moIflv5flrZfmrrXvvIzooajnpLrmn6Xor6LmiYDmnInlupflrrYKICAgICAgICAgIGZsYWc6ICdzaG9wJywKICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwKICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAga2V5OiB0aGlzLmtleQogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PSAnMCcpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107CiAgICAgICAgICByZXMuZGF0YS5kYXRhLmZvckVhY2goKGUsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIHJlcXVlc3QuZ2V0KCcvc2hvcC8nICsgZS51c2VySWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBlLnNob3BOYW1lID0gcmVzLmRhdGEuc2hvcE5hbWU7CiAgICAgICAgICAgICAgZS5zaG9wSWQgPSByZXMuZGF0YS5zaG9wSWQ7CiAgICAgICAgICAgICAgZS5pbmNvbWUgPSByZXMuZGF0YS5pbmNvbWU7CiAgICAgICAgICAgICAgZS5pbmRleCA9IGluZGV4ICsgMTsKICAgICAgICAgICAgICBlLmNyZWF0ZVRpbWUgPSBlLmNyZWF0ZVRpbWUuc2xpY2UoMCwgMTApOwogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIHNhdmUoKSB7CiAgICAgIC8vIOS/ruaUueWVhuWutuaVsOaNrgogICAgICByZXF1ZXN0LnBvc3QoJ3VzZXIvYWNjb3VudCcsIHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55aSx6LSl77yM6K+36IGU57O7566h55CG5ZGY77yBJywKICAgICAgICAgICAgdHlwZTogJ2ZhaWxlZCcKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAvLyDliLfmlrDooajmoLzmlbDmja4KICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgfSk7CiAgICB9CgogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWQoKTsKICB9Cgp9Ow=="},{"version":3,"mappings":"AAqMA;;AACA;;AACA;;AAEA;EACAA;IACAC,SADA;IAEAC;EAFA,CADA;EAKAC,YALA;;EAMAC;IACA;MACAC,QADA;MAEAC,wBAFA;MAGAC,yBAHA;MAIA;MACAC,YALA;MAMA;MACAC,UAPA;MAQA;MACAC,OATA;MAUA;MACAC,QAXA;MAYAC,aAZA;MAaAC;IAbA;EAeA,CAtBA;;EAuBAC;IACA;IACAC;MACAC,QACAC,KADA,CACA,6BADA,EAEAC,IAFA,CAEAC,SAFA,EAGAC,KAHA,CAGAC;QACAC;MACA,CALA;IAMA,CATA;;IAUAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAKAR,IALA,CAKA;QACA;QACAS;QACAX;UACA;YACA;cACAY,gBADA;cAEAF;YAFA;UAIA;QACA,CAPA;QAQAJ;MACA,CAjBA,EAkBAF,KAlBA,CAkBA;QACA;UACAM,YADA;UAEAE;QAFA;MAIA,CAvBA;IAwBA,CAnCA;;IAoCAC;MACA;MACAb;QACA;QACAG;UACAW;UACA;QACA,CAHA;MAIA,CANA;IAOA,CA7CA;;IA8CAC;MACA;IACA,CAhDA;;IAiDAC;MACA;IACA,CAnDA;;IAoDAC;MACA;IACA,CAtDA;;IAuDAC;MACA;MACA;IACA,CA1DA;;IA2DA;IACAC;MACA;IACA,CA9DA;;IA+DA;IACAC;MACA;QACAZ,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAKAR,IALA,CAKA;QACA;QACAF;UACA;YACA;cACAY,gBADA;cAEAF;YAFA;YAIA;UACA;QACA,CARA;MASA,CAhBA,EAiBAN,KAjBA,CAiBA;QACA;UACAM,YADA;UAEAE;QAFA;MAIA,CAtBA;IAuBA,CAxFA;;IAyFA;IACAS;MACA;MACA;IACA,CA7FA;;IA8FAC;MACA;IACA,CAhGA;;IAiGAC;MACA;MACA;IACA,CApGA;;IAqGAC;MACA;MACA;MACA;IACA,CAzGA;;IA0GA;IACAC;MACAzB,QACA0B,GADA,CACA,OADA,EACA;QACAC;UACA;UACAC,YAFA;UAGAnC,qBAHA;UAIAD,uBAJA;UAKAE;QALA;MADA,CADA,EAUAQ,IAVA,CAUAC;QACA;UACA;YACAS,gBADA;YAEAF,eAFA;YAGAmB;UAHA;UAKA;UACA;UACA1B;YACAH,QACA0B,GADA,CACA,mBADA,EAEAxB,IAFA,CAEAC;cACAW;cACAA;cACAA;cACAA;cACAA;YACA,CARA,EASAZ,IATA,CASA;cACA;YACA,CAXA;UAYA,CAbA;QAcA;MACA,CAlCA;IAmCA,CA/IA;;IAgJA4B;MACA;MACA9B,QACA+B,IADA,CACA,cADA,EACA,SADA,EAEA7B,IAFA,CAEAC;QACA;UACA;QACA,CAFA,MAEA;UACA;YACAS,uBADA;YAEAF;UAFA;QAIA;MACA,CAXA,EAYAN,KAZA,CAYAC;QACAC;MACA,CAdA,EAeAJ,IAfA,CAeA;QACA;QACA;MACA,CAlBA;IAmBA;;EArKA,CAvBA;;EA8LA8B;IACA;EACA;;AAhMA","names":["components","SubHeader","Container","name","data","form","dialogFormVisible","dialogFormVisible2","pageSize","pageNum","key","total","tableData","shopProducts","methods","setStatus","request","patch","then","res","catch","err","console","deleteP","confirmButtonText","cancelButtonText","type","rows","message","seeDetail","e","clearFilter","formatter","filterTag","filterHandler","refreshTable","deleteRow","handleEdit","search","handleSizeChange","handleCurrentChange","load","get","params","flag","duration","save","post","created"],"sourceRoot":"src/pages/admin/users","sources":["AllShops.vue"],"sourcesContent":["<template>\r\n  <Container>\r\n    <template slot>\r\n      <SubHeader>\r\n        <template v-slot>管理所有商家</template>\r\n      </SubHeader>\r\n      <el-form @submit.native.prevent>\r\n        <el-input\r\n          v-model=\"key\"\r\n          placeholder=\"请输入内容\"\r\n          style=\"margin-top: 10px; width: 250px\"\r\n          clearable\r\n        ></el-input>\r\n        <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"search\"\r\n          >查询</el-button\r\n        >\r\n        <el-button type=\"primary\" @click=\"refreshTable\">刷新</el-button>\r\n      </el-form>\r\n      <el-table :data=\"tableData\" style=\"margin-top: 10px\" border stripe>\r\n        <el-table-column\r\n          prop=\"index\"\r\n          label=\"序号\"\r\n          sortable\r\n          style=\"height: 30px\"\r\n          width=\"70px\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"username\" label=\"用户名\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"realName\" label=\"真实姓名\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"telephone\" label=\"联系电话\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"shopName\" label=\"店铺名字\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createTime\" label=\"开店时间\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"income\" label=\"总收入\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"status\"\r\n          label=\"账号状态\"\r\n          width=\"100px\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.status\"\r\n              :active-value=\"1\"\r\n              :inactive-value=\"0\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              @change=\"setStatus($event, scope.row.userId)\"\r\n            >\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          align=\"center\"\r\n          fixed=\"right\"\r\n          label=\"操作\"\r\n          width=\"160px\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              @click=\"handleEdit(scope.row)\"\r\n              size=\"mini\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              circle\r\n            ></el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              circle\r\n              size=\"mini\"\r\n              @click.native.prevent=\"deleteRow(scope.$index, scope.row)\"\r\n            ></el-button>\r\n            <el-button\r\n              type=\"warning\"\r\n              size=\"mini\"\r\n              circle=\"\"\r\n              @click.native.prevent=\"seeDetail(scope.row)\"\r\n            >\r\n              <i class=\"far fa-eye\"></i>\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 查看商品 -->\r\n      <el-dialog\r\n        title=\"查看该店所有商品\"\r\n        :visible.sync=\"dialogFormVisible2\"\r\n        width=\"70%\"\r\n      >\r\n        <el-table :data=\"shopProducts\" border>\r\n          <el-table-column\r\n            prop=\"index\"\r\n            label=\"序号\"\r\n            width=\"100px\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"productName\"\r\n            label=\"商品名称\"\r\n            width=\"130px\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"productPrice\"\r\n            label=\"单价\"\r\n            width=\"70px\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column label=\"商品图片\" align=\"center\" width=\"100px\">\r\n            <template #default=\"scope\">\r\n              <el-image\r\n                style=\"height: 70px\"\r\n                :src=\"scope.row.imgSrc\"\r\n                :preview-src-list=\"[scope.row.imgSrc]\"\r\n              >\r\n              </el-image>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"productDesc\"\r\n            label=\"描述\"\r\n            show-overflow-tooltip\r\n          >\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" align=\"center\" width=\"100px\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                @click.native.prevent=\"deleteP(scope.$index, shopProducts)\"\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                circle\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible2 = false\">取 消</el-button>\r\n          <el-button type=\"primary\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-sizes=\"[5, 10, 100]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        style=\"margin-top: 10px\"\r\n      >\r\n      </el-pagination>\r\n\r\n      <!-- 修改信息弹出 -->\r\n      <el-dialog\r\n        title=\"填入个人信息\"\r\n        :visible.sync=\"dialogFormVisible\"\r\n        width=\"50%\"\r\n      >\r\n        <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\r\n          <el-form-item label=\"真实姓名\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.realName\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系电话\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.telephone\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"店铺名字\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.shopName\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"权限角色\" style=\"margin-bottom: 7px\">\r\n            <el-radio-group v-model=\"form.role\">\r\n              <el-radio label=\"admin\">管理员</el-radio>\r\n              <el-radio label=\"shop\">商家</el-radio>\r\n              <el-radio label=\"user\">客户</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </template>\r\n  </Container>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../utils/request'\r\nconst SubHeader = () => import('../../components/SubHeader.vue')\r\nconst Container = () => import('../../components/Container.vue')\r\n\r\nexport default {\r\n  components: {\r\n    SubHeader,\r\n    Container\r\n  },\r\n  name: 'Home',\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      dialogFormVisible2: false,\r\n      // pageSize是表示一页最多可以装几条数据\r\n      pageSize: 10,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      // 查询关键字\r\n      key: '',\r\n      // 总共几条数据\r\n      total: 0,\r\n      tableData: [],\r\n      shopProducts: []\r\n    }\r\n  },\r\n  methods: {\r\n    // 发送请求,设置用户状态\r\n    setStatus(status, uId) {\r\n      request\r\n        .patch('/user/' + uId + '/' + status)\r\n        .then((res) => {})\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    deleteP(index, rows) {\r\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let deleteId = rows[index].productId\r\n          rows.splice(index, 1)\r\n          request.delete('/product/' + deleteId).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: '删除成功！',\r\n                type: 'success'\r\n              })\r\n            }\r\n          })\r\n          console.log(deleteId)\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    seeDetail(row) {\r\n      this.dialogFormVisible2 = true\r\n      request.get('/product/shop_id/' + row.shopId).then((res) => {\r\n        this.shopProducts = []\r\n        res.data.forEach((e, i) => {\r\n          e.index = i + 1\r\n          this.shopProducts.push(e)\r\n        })\r\n      })\r\n    },\r\n    clearFilter() {\r\n      this.$refs.filterTable.clearFilter()\r\n    },\r\n    formatter(row, column) {\r\n      return row.address\r\n    },\r\n    filterTag(value, row) {\r\n      return row.role === value\r\n    },\r\n    filterHandler(value, row, column) {\r\n      const property = column['property']\r\n      return row[property] === value\r\n    },\r\n    // 刷新表格\r\n    refreshTable() {\r\n      this.load()\r\n    },\r\n    // 删除\r\n    deleteRow(index, row) {\r\n      this.$confirm('确认删除该用户吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let deleteId = row.userId\r\n          request.delete('/user/' + deleteId).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: '删除成功！',\r\n                type: 'success'\r\n              })\r\n              this.load()\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    // 编辑\r\n    handleEdit(row) {\r\n      this.form = row\r\n      this.dialogFormVisible = true\r\n    },\r\n    search() {\r\n      this.load()\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.pageNum = val\r\n      this.load()\r\n    },\r\n    // 加载表格数据\r\n    load() {\r\n      request\r\n        .get('/user', {\r\n          params: {\r\n            // !设置标志字段，表示查询所有店家\r\n            flag: 'shop',\r\n            pageNum: this.pageNum,\r\n            pageSize: this.pageSize,\r\n            key: this.key\r\n          }\r\n        })\r\n        .then((res) => {\r\n          if (res.code == '0') {\r\n            this.$message({\r\n              message: res.msg,\r\n              type: 'success',\r\n              duration: 1000\r\n            })\r\n            this.total = res.data.total\r\n            this.tableData = []\r\n            res.data.data.forEach((e, index) => {\r\n              request\r\n                .get('/shop/' + e.userId)\r\n                .then((res) => {\r\n                  e.shopName = res.data.shopName\r\n                  e.shopId = res.data.shopId\r\n                  e.income = res.data.income\r\n                  e.index = index + 1\r\n                  e.createTime = e.createTime.slice(0, 10)\r\n                })\r\n                .then(() => {\r\n                  this.tableData.push(e)\r\n                })\r\n            })\r\n          }\r\n        })\r\n    },\r\n    save() {\r\n      // 修改商家数据\r\n      request\r\n        .post('user/account', this.form)\r\n        .then((res) => {\r\n          if (res.code === '0') {\r\n            this.dialogFormVisible = false\r\n          } else {\r\n            this.$message({\r\n              message: '修改失败，请联系管理员！',\r\n              type: 'failed'\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        .then(() => {\r\n          // 刷新表格数据\r\n          this.load()\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n  }\r\n}\r\n</script>\r\n"]}]}