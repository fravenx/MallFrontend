{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/Discount.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/Discount.vue","mtime":1677682822549},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/babel.config.js","mtime":1677682822494},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IHsgZ2V0RGlzY291bnRQcm9kdWN0IH0gZnJvbSAnQC9hcGkvcHJvZHVjdC5qcyc7Cgpjb25zdCBEaXNjb3VudEl0ZW0gPSAoKSA9PiBpbXBvcnQoJy4vRGlzY291bnRJdGVtLnZ1ZScpOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbnB1dFRpbWU6ICtuZXcgRGF0ZSgnMjAyMS0xMi0yNCAyMzowMDowMCcpLAogICAgICBob3VyOiAnJywKICAgICAgbWludXRlOiAnJywKICAgICAgc2Vjb25kOiAnJywKICAgICAgdGltZXI6IG51bGwsCiAgICAgIHByb2R1Y3RzOiBbXQogICAgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgZ2V0RGlzY291bnRQcm9kdWN0KCkudGhlbihyZXMgPT4gewogICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB0aGlzLnByb2R1Y3RzLnB1c2goLi4ucmVzKTsKICAgIH0pOwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICAvL+iwg+eUqOWumuaXtuWZqAogICAgcmVxdWVzdC5nZXQoJy9jb3VudGRvd24nKS50aGVuKHJlcyA9PiB7CiAgICAgIGxldCBzID0gcmVzLmRhdGE7CiAgICAgIGxldCBhID0gcy5zbGljZSgwLCAxMSk7CiAgICAgIGxldCBiID0gcy5zbGljZSgxMyk7CiAgICAgIGxldCBtID0gcy5zbGljZSgxMSwgMTMpOwogICAgICBtID0gKE51bWJlcihtKSArIDgpICUgMjQ7CiAgICAgIG0gPSBtIDwgMTAgPyAnMCcgKyBtIDogbTsKICAgICAgbGV0IHQgPSBhICsgbSArIGI7CiAgICAgIHRoaXMuaW5wdXRUaW1lID0gK25ldyBEYXRlKHQpOwogICAgfSk7CiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICB0aGlzLmNvdW50RG93bigpOwogICAgfSwgMTAwMCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgY291bnREb3duKCkgewogICAgICAvLyDov5Tlm57nmoTmmK/lvZPliY3ml7bpl7TmgLvnmoTmr6vnp5LmlbAKICAgICAgdmFyIG5vd1RpbWUgPSArbmV3IERhdGUoKTsgLy8gdGltZXPmmK/liankvZnml7bpl7TmgLvnmoTnp5LmlbAKCiAgICAgIHZhciB0aW1lcyA9ICh0aGlzLmlucHV0VGltZSAtIG5vd1RpbWUpIC8gMTAwMDsKICAgICAgdmFyIGggPSBwYXJzZUludCh0aW1lcyAvIDYwIC8gNjAgJSAyNCk7CiAgICAgIGggPSBoIDwgMTAgPyAnMCcgKyBoIDogaDsgLy8g5oqK5Ymp5L2Z55qE5bCP5pe257uZIOWwj+aXtum7keiJsuebkuWtkAoKICAgICAgdGhpcy5ob3VyID0gaDsKICAgICAgdmFyIG0gPSBwYXJzZUludCh0aW1lcyAvIDYwICUgNjApOwogICAgICBtID0gbSA8IDEwID8gJzAnICsgbSA6IG07CiAgICAgIHRoaXMubWludXRlID0gbTsKICAgICAgdmFyIHMgPSBwYXJzZUludCh0aW1lcyAlIDYwKTsKICAgICAgcyA9IHMgPCAxMCA/ICcwJyArIHMgOiBzOwogICAgICB0aGlzLnNlY29uZCA9IHM7CiAgICB9CgogIH0sCiAgY29tcG9uZW50czogewogICAgRGlzY291bnRJdGVtCiAgfQp9Ow=="},{"version":3,"mappings":"AAsBA;AACA;;AACA;;AACA;EACAA;IACA;MACAC,2CADA;MAEAC,QAFA;MAGAC,UAHA;MAIAC,UAJA;MAKAC,WALA;MAMAC;IANA;EAUA,CAZA;;EAaAC;IACAC;MACAC;MACA;IACA,CAHA;EAIA,CAlBA;;EAmBAC;IACA;IACAC;MACA;MACA;MACA;MACA;MACAC;MACAA;MACA;MACA;IACA,CATA;IAUA;MACA;IACA,CAFA,EAEA,IAFA;EAGA,CAlCA;;EAmCAC;IACAC;MACA;MACA,0BAFA,CAGA;;MACA;MACA;MACAC,yBANA,CAOA;;MACA;MACA;MACAH;MACA;MACA;MACAI;MACA;IACA;;EAhBA,CAnCA;EAqDAC;IACAC;EADA;AArDA","names":["data","inputTime","hour","minute","second","timer","products","mounted","getDiscountProduct","console","created","request","m","methods","countDown","h","s","components","DiscountItem"],"sourceRoot":"src/views/home/components","sources":["Discount.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h3 class=\"header\">限时折扣</h3>\r\n    <el-row type=\"flex\" class=\"discount-bd\">\r\n      <el-col :span=\"4\" class=\"seckill\">\r\n        <h3>限时秒杀</h3>\r\n        <img src=\"../../../assets/upload/seckill.png\" alt=\"\" />\r\n        <p>距离本场结束还剩</p>\r\n        <div class=\"time\">\r\n          <div>{{ hour }}</div>\r\n          <div>{{ minute }}</div>\r\n          <div>{{ second }}</div>\r\n        </div>\r\n      </el-col>\r\n      <el-col :span=\"4\" v-for=\"product in products\" :key=\"product.productId\">\r\n        <DiscountItem :cProduct=\"product\" />\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request'\r\nimport { getDiscountProduct }from '@/api/product.js'\r\nconst DiscountItem = () => import('./DiscountItem.vue')\r\nexport default {\r\n  data() {\r\n    return {\r\n      inputTime: +new Date('2021-12-24 23:00:00'),\r\n      hour: '',\r\n      minute: '',\r\n      second: '',\r\n      timer: null,\r\n      products: [\r\n\r\n      ]\r\n    }\r\n  },\r\n  mounted() {\r\n    getDiscountProduct().then(res=>{\r\n      console.log(res)\r\n      this.products.push(...res)\r\n    })\r\n  },\r\n  created() {\r\n    //调用定时器\r\n    request.get('/countdown').then((res) => {\r\n      let s = res.data\r\n      let a = s.slice(0, 11)\r\n      let b = s.slice(13)\r\n      let m = s.slice(11, 13)\r\n      m = (Number(m) + 8) % 24\r\n      m = m < 10 ? '0' + m : m\r\n      let t = a + m + b\r\n      this.inputTime = +new Date(t)\r\n    })\r\n    this.timer = setInterval(() => {\r\n      this.countDown()\r\n    }, 1000)\r\n  },\r\n  methods: {\r\n    countDown() {\r\n      // 返回的是当前时间总的毫秒数\r\n      var nowTime = +new Date()\r\n      // times是剩余时间总的秒数\r\n      var times = (this.inputTime - nowTime) / 1000\r\n      var h = parseInt((times / 60 / 60) % 24)\r\n      h = h < 10 ? '0' + h : h\r\n      // 把剩余的小时给 小时黑色盒子\r\n      this.hour = h\r\n      var m = parseInt((times / 60) % 60)\r\n      m = m < 10 ? '0' + m : m\r\n      this.minute = m\r\n      var s = parseInt(times % 60)\r\n      s = s < 10 ? '0' + s : s\r\n      this.second = s\r\n    }\r\n  },\r\n  components: {\r\n    DiscountItem\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.discount-bd {\r\n  box-shadow: rgba(17, 17, 26, 0.1) 0px 4px 16px,\r\n    rgba(17, 17, 26, 0.05) 0px 8px 32px;\r\n  height: 240px;\r\n}\r\n.header {\r\n  font-weight: 400;\r\n  height: 60px;\r\n  line-height: 80px;\r\n  color: 333;\r\n}\r\n.seckill {\r\n  height: 240px;\r\n  padding-top: 25px;\r\n  text-align: center;\r\n  background-color: #f02b2b;\r\n}\r\n.seckill img {\r\n  margin-top: 20px;\r\n  width: 30px;\r\n}\r\n.seckill h3 {\r\n  font-weight: 400;\r\n  color: #fff;\r\n  font-size: 25px;\r\n  margin-top: 10px;\r\n}\r\n.seckill p {\r\n  font-size: 10px;\r\n  color: #fff;\r\n  margin-top: 10px;\r\n}\r\n.time {\r\n  display: flex;\r\n  margin-left: 50%;\r\n  transform: translate(-50%);\r\n  margin-top: 5px;\r\n  width: 100px;\r\n}\r\n.time div {\r\n  height: 30px;\r\n  width: 30px;\r\n  margin-left: 3px;\r\n  background-color: #000;\r\n  color: #fff;\r\n  font-weight: 700;\r\n  text-align: center;\r\n  line-height: 30px;\r\n}\r\n.time::after {\r\n  display: block;\r\n  content: '';\r\n  width: 100px;\r\n  height: 1px;\r\n  background-color: #f02b2b;\r\n  position: absolute;\r\n  top: 15px;\r\n}\r\n</style>"]}]}