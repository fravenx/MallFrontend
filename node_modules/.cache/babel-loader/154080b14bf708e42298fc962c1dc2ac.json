{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/shop/oders/Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/shop/oders/Order.vue","mtime":1677682822547},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/babel.config.js","mtime":1677682822494},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vLi4vLi4vdXRpbHMvcmVxdWVzdCc7Cgpjb25zdCBTdWJIZWFkZXIgPSAoKSA9PiBpbXBvcnQoJy4uLy4uL2NvbXBvbmVudHMvU3ViSGVhZGVyLnZ1ZScpOwoKY29uc3QgQ29udGFpbmVyID0gKCkgPT4gaW1wb3J0KCcuLi8uLi9jb21wb25lbnRzL0NvbnRhaW5lci52dWUnKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTdWJIZWFkZXIsCiAgICBDb250YWluZXIKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybToge30sCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgLy8gcGFnZVNpemXmmK/ooajnpLrkuIDpobXmnIDlpJrlj6/ku6Xoo4Xlh6DmnaHmlbDmja4KICAgICAgcGFnZVNpemU6IDEwLAogICAgICAvLyDooajnpLror7fmsYLnrKzlh6DpobXmlbDmja4KICAgICAgcGFnZU51bTogMSwKICAgICAgLy8g5p+l6K+i5YWz6ZSu5a2XCiAgICAgIGtleTogJycsCiAgICAgIC8vIOaAu+WFseWHoOadoeaVsOaNrgogICAgICB0b3RhbDogMTAwLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0ZW1wRGF0YTogW10sCiAgICAgIHNob3BJZDogbnVsbCwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHByb2R1Y3RzOiBbXQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBkZXRhaWwoaW5kZXgsIHJvd3MpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgbGV0IG9OdW1iZXIgPSByb3dzW2luZGV4XS5vcmRlck51bWJlcjsKICAgICAgcmVxdWVzdC5nZXQoJ3Byb2R1Y3Qvb3JkZXIvJyArIG9OdW1iZXIpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdOyAvLyB0aGlzLnByb2R1Y3RzID0gcmVzLmRhdGEKCiAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKChlLCBpKSA9PiB7CiAgICAgICAgICAgIGUuaW5kZXggPSBpICsgMTsKICAgICAgICAgICAgdGhpcy5wcm9kdWN0cy5wdXNoKGUpOwogICAgICAgICAgICB0aGlzLnByb2R1Y3RzLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGZpbHRlclRhYmxlKG4sIGZsYWcpIHsKICAgICAgaWYgKGZsYWcpIHsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMudGVtcERhdGEuZmlsdGVyKGl0ZW0gPT4gaXRlbS5vcmRlclN0YXR1cyA+PSBuKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMudGFibGVEYXRhID0gdGhpcy50ZW1wRGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtLm9yZGVyU3RhdHVzID09PSBuKTsKICAgIH0sCgogICAgLy8g5Yi35paw6KGo5qC8CiAgICByZWZyZXNoVGFibGUoKSB7CiAgICAgIHRoaXMubG9hZCgpOwogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAn5Yi35paw5oiQ5Yqf77yBJywKICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOWPlua2iOiuouWNlQogICAgY2FuY2VsKGluZGV4LCByb3dzKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuWPlua2iOivpeiuouWNlSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBsZXQgb051bWJlciA9IHJvd3NbaW5kZXhdLm9yZGVyTnVtYmVyOwogICAgICAgIHJlcXVlc3QucGF0Y2goJy9vcmRlci9jYW5jZWwvJyArIG9OdW1iZXIpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YVtpbmRleF0ub3JkZXJTdGF0dXMgPSAyOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2cJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLy8g5Y+R6LSnCiAgICBzZW5kKGluZGV4LCByb3dzKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOWPkei0p+WQlz8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgbGV0IG9OdW1iZXIgPSByb3dzW2luZGV4XS5vcmRlck51bWJlcjsKICAgICAgICByZXF1ZXN0LnBhdGNoKCcvb3JkZXIvc2VuZC8nICsgb051bWJlcikudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhW2luZGV4XS5vcmRlclN0YXR1cyA9IDM7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojmk43kvZwnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKQogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCgogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgLy8gY29uc29sZS5sb2coYOW9k+WJjemhtTogJHt2YWx9YCkKICAgICAgdGhpcy5wYWdlTnVtID0gdmFsOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCgogICAgLy8g5Yqg6L296KGo5qC85pWw5o2uCiAgICBsb2FkKCkgewogICAgICByZXF1ZXN0LmdldCgnL29yZGVyL3Nob3AnLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlTnVtOiB0aGlzLnBhZ2VOdW0sCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgIHNob3BJZDogdGhpcy5zaG9wSWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107CiAgICAgICAgICB0aGlzLnRlbXBEYXRhID0gW107CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgICB0aGlzLnBhZ2VOdW0gPSByZXMuZGF0YS5wYWdlTnVtOwogICAgICAgICAgcmVzLmRhdGEuZGF0YS5mb3JFYWNoKChpdGVtLCBpKSA9PiB7CiAgICAgICAgICAgIGl0ZW0uaW5kZXggPSBpICsgMTsKICAgICAgICAgICAgcmVxdWVzdC5nZXQoJy91c2VyL29yZGVyX251bWJlci8nICsgaXRlbS5vcmRlck51bWJlcikudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGl0ZW0ucmVhbE5hbWUgPSByZXMucmVhbE5hbWU7CiAgICAgICAgICAgICAgaXRlbS5hZGRyZXNzID0gcmVzLmFkZHJlc3M7CiAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEucHVzaChpdGVtKTsKICAgICAgICAgICAgICB0aGlzLnRlbXBEYXRhLnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEuc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpOwogICAgICAgICAgICAgIHRoaXMudGVtcERhdGEuc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkudGhlbigoKSA9PiB7fSk7CiAgICB9LAoKICAgIGN1cnJlbnRTdGF0dXMobikgewogICAgICBpZiAobiA9PT0gMCkgewogICAgICAgIHJldHVybiAn5b6F5LuY5qy+JzsKICAgICAgfQoKICAgICAgaWYgKG4gPT09IDEpIHsKICAgICAgICByZXR1cm4gJ+W+heWPkei0pyc7CiAgICAgIH0KCiAgICAgIGlmIChuID09PSAyKSB7CiAgICAgICAgcmV0dXJuICflt7Llj5bmtognOwogICAgICB9CgogICAgICBpZiAobiA9PT0gMykgewogICAgICAgIHJldHVybiAn5bey5a6M5oiQJzsKICAgICAgfQoKICAgICAgcmV0dXJuICflt7LlrozmiJAnOwogICAgfSwKCiAgICBzYXZlKCkgewogICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJywgdGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcyA9PT0gMCkgewogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfmga3llpzkvaDvvIzmt7vliqDmiJDlip/vvIEnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAvLyDliLfmlrDooajmoLzmlbDmja4KICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgfSk7CiAgICB9CgogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBsZXQgdUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyk7CiAgICByZXF1ZXN0LmdldCgnL3VzZXIvc2hvcF9pZC8nICsgdUlkKS50aGVuKHJlcyA9PiB7CiAgICAgIHRoaXMuc2hvcElkID0gcmVzOwogICAgfSkudGhlbigoKSA9PiB7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSk7CiAgfQoKfTs="},{"version":3,"mappings":"AA4LA;;AAEA;;AACA;;AAEA;EACAA;IACAC,SADA;IAEAC;EAFA,CADA;;EAKAC;IACA;MACAC,QADA;MAEAC,wBAFA;MAGA;MACAC,YAJA;MAKA;MACAC,UANA;MAOA;MACAC,OARA;MASA;MACAC,UAVA;MAWAC,aAXA;MAYAC,YAZA;MAaAC,YAbA;MAcAC,oBAdA;MAeAC;IAfA;EAiBA,CAvBA;;EAwBAC;IACAC;MACA;MACA;MACAC;QACA;UACA,mBADA,CAEA;;UACAC;YACAC;YACA;YACA;UACA,CAJA;QAKA;MACA,CAVA;IAWA,CAfA;;IAgBAC;MACA;QACA;QACA;MACA;;MACA;IACA,CAtBA;;IAuBA;IACAC;MACA;MACA;QACAC,gBADA;QAEAC;MAFA;IAIA,CA9BA;;IA+BA;IACAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAH;MAHA,GAKAI,IALA,CAKA;QACA;QACAV;UACA;YACA;cACAK,gBADA;cAEAC,eAFA;cAGAK;YAHA;YAKA;UACA;QACA,CATA;MAUA,CAjBA,EAkBAC,KAlBA,CAkBA;QACA;UACAN,YADA;UAEAD;QAFA;MAIA,CAvBA;IAwBA,CAzDA;;IA0DA;IACAQ;MACA;QACAL,uBADA;QAEAC,sBAFA;QAGAH;MAHA,GAKAI,IALA,CAKA;QACA;QACAV;UACA;YACA;cACAK,gBADA;cAEAC,eAFA;cAGAK;YAHA;YAKA;UACA;QACA,CATA;MAUA,CAjBA,EAkBAC,KAlBA,CAkBA;QACA;UACAN,YADA;UAEAD;QAFA;MAIA,CAvBA;IAwBA,CApFA;;IAqFAS;MACA;MACA;MACA;IACA,CAzFA;;IA0FAC;MACA;MACA;MACA;IACA,CA9FA;;IA+FA;IACAC;MACAhB,QACAiB,GADA,CACA,aADA,EACA;QACAC;UACA5B,qBADA;UAEAD,uBAFA;UAGAM;QAHA;MADA,CADA,EAQAe,IARA,CAQAT;QACA;QACA;UACA;YACAI,gBADA;YAEAC,eAFA;YAGAK;UAHA;UAKA;UACA;UACA;UACA;UACAV;YACAkB;YACAnB,QACAiB,GADA,CACA,wCADA,EAEAP,IAFA,CAEAT;cACAkB;cACAA;cACA;cACA;cACA;cACA;YACA,CATA;UAUA,CAZA;QAaA;MACA,CAlCA,EAmCAT,IAnCA,CAmCA,QAnCA;IAoCA,CArIA;;IAsIAU;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CApJA;;IAqJAC;MACArB,QACAsB,IADA,CACA,OADA,EACA,SADA,EAEAZ,IAFA,CAEAT;QACA;UACA;UACA;YACAI,oBADA;YAEAC;UAFA;QAIA;MACA,CAVA,EAWAM,KAXA,CAWAW;QACAC;MACA,CAbA,EAcAd,IAdA,CAcA;QACA;QACA;MACA,CAjBA;IAkBA;;EAxKA,CAxBA;;EAkMAe;IACA;IACAzB,QACAiB,GADA,CACA,sBADA,EAEAP,IAFA,CAEAT;MACA;IACA,CAJA,EAKAS,IALA,CAKA;MACA;IACA,CAPA;EAQA;;AA5MA","names":["components","SubHeader","Container","data","form","dialogFormVisible","pageSize","pageNum","key","total","tableData","tempData","shopId","dialogVisible","products","methods","detail","request","res","e","filterTable","refreshTable","message","type","cancel","confirmButtonText","cancelButtonText","then","duration","catch","send","handleSizeChange","handleCurrentChange","load","get","params","item","currentStatus","save","post","err","console","created"],"sourceRoot":"src/pages/shop/oders","sources":["Order.vue"],"sourcesContent":["<template>\r\n  <Container>\r\n    <template v-slot>\r\n      <SubHeader style=\"position: relative\">\r\n        <template v-slot>\r\n          管理本店所有订单\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"filterTable(0)\"\r\n            class=\"waitPay\"\r\n            >待付款</el-button\r\n          >\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"filterTable(1)\"\r\n            class=\"waitSend\"\r\n            >待发货</el-button\r\n          >\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"filterTable(2)\"\r\n            class=\"cancel\"\r\n            >已取消</el-button\r\n          >\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"filterTable(3, true)\"\r\n            class=\"finish\"\r\n            >已完成</el-button\r\n          >\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"refreshTable\"\r\n            class=\"refresh\"\r\n            >所有订单</el-button\r\n          >\r\n        </template>\r\n      </SubHeader>\r\n      <el-table :data=\"tableData\" style=\"margin-top: 10px\" border stripe>\r\n        <el-table-column\r\n          prop=\"index\"\r\n          label=\"序号\"\r\n          style=\"height: 30px\"\r\n          width=\"80px\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          width=\"140px\"\r\n          align=\"center\"\r\n          prop=\"orderNumber\"\r\n          label=\"订单编号\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          width=\"100px\"\r\n          align=\"center\"\r\n          prop=\"createTime\"\r\n          label=\"下单时间\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          width=\"100px\"\r\n          align=\"center\"\r\n          prop=\"realName\"\r\n          label=\"收货人姓名\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"address\" label=\"发货地址\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"orderAmount\"\r\n          label=\"订单总额（元）\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column width=\"100px\" align=\"center\" label=\"订单状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag\r\n              size=\"small\"\r\n              :type=\"\r\n                scope.row.orderStatus === 0\r\n                  ? 'danger'\r\n                  : scope.row.orderStatus === 1\r\n                  ? 'primary'\r\n                  : scope.row.orderStatus === 2\r\n                  ? 'info'\r\n                  : 'success'\r\n              \"\r\n            >\r\n              {{ currentStatus(scope.row.orderStatus) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          width=\"220px\"\r\n          align=\"center\"\r\n          fixed=\"right\"\r\n          label=\"操作\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              :disabled=\"!(scope.row.orderStatus === 1)\"\r\n              type=\"success\"\r\n              @click.native.prevent=\"send(scope.$index, tableData)\"\r\n              size=\"mini\"\r\n              >发 货</el-button\r\n            >\r\n            <el-button\r\n              type=\"danger\"\r\n              size=\"mini\"\r\n              :disabled=\"!(scope.row.orderStatus < 2)\"\r\n              @click.native.prevent=\"cancel(scope.$index, tableData)\"\r\n              >取 消</el-button\r\n            >\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              @click.native.prevent=\"detail(scope.$index, tableData)\"\r\n              >查看</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-sizes=\"[5, 10, 100]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        style=\"margin-top: 10px\"\r\n      >\r\n      </el-pagination>\r\n\r\n      <!-- 弹出商品信息 -->\r\n      <el-dialog\r\n        title=\"订单包含商品信息\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"50%\"\r\n      >\r\n        <el-table :data=\"products\" style=\"margin-top: 10px\" border stripe>\r\n          <el-table-column\r\n            prop=\"index\"\r\n            label=\"序号\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column prop=\"imgSrc\" label=\"商品图片\" align=\"center\">\r\n            <template #default=\"scope\">\r\n              <el-image\r\n                style=\"height: 80px\"\r\n                :src=\"scope.row.imgSrc\"\r\n                :preview-src-list=\"[scope.row.imgSrc]\"\r\n              ></el-image>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"productName\"\r\n            label=\"商品名称\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"count\"\r\n            label=\"数量\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"orderProductPrice\"\r\n            label=\"总价格\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n        </el-table>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"dialogVisible = false\"\r\n            >确 定</el-button\r\n          >\r\n        </span>\r\n      </el-dialog>\r\n    </template>\r\n  </Container>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../utils/request'\r\n\r\nconst SubHeader = () => import('../../components/SubHeader.vue')\r\nconst Container = () => import('../../components/Container.vue')\r\n\r\nexport default {\r\n  components: {\r\n    SubHeader,\r\n    Container\r\n  },\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      // pageSize是表示一页最多可以装几条数据\r\n      pageSize: 10,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      // 查询关键字\r\n      key: '',\r\n      // 总共几条数据\r\n      total: 100,\r\n      tableData: [],\r\n      tempData: [],\r\n      shopId: null,\r\n      dialogVisible: false,\r\n      products: []\r\n    }\r\n  },\r\n  methods: {\r\n    detail(index, rows) {\r\n      this.dialogVisible = true\r\n      let oNumber = rows[index].orderNumber\r\n      request.get('product/order/' + oNumber).then((res) => {\r\n        if (res.code === '0') {\r\n          this.products = []\r\n          // this.products = res.data\r\n          res.data.forEach((e, i) => {\r\n            e.index = i + 1\r\n            this.products.push(e)\r\n            this.products.sort((a, b) => a.index - b.index)\r\n          })\r\n        }\r\n      })\r\n    },\r\n    filterTable(n, flag) {\r\n      if (flag) {\r\n        this.tableData = this.tempData.filter((item) => item.orderStatus >= n)\r\n        return\r\n      }\r\n      this.tableData = this.tempData.filter((item) => item.orderStatus === n)\r\n    },\r\n    // 刷新表格\r\n    refreshTable() {\r\n      this.load()\r\n      this.$message({\r\n        message: '刷新成功！',\r\n        type: 'success'\r\n      })\r\n    },\r\n    // 取消订单\r\n    cancel(index, rows) {\r\n      this.$confirm('此操作将取消该订单, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let oNumber = rows[index].orderNumber\r\n          request.patch('/order/cancel/' + oNumber).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n              this.tableData[index].orderStatus = 2\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n    },\r\n    // 发货\r\n    send(index, rows) {\r\n      this.$confirm('确认发货吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let oNumber = rows[index].orderNumber\r\n          request.patch('/order/send/' + oNumber).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n              this.tableData[index].orderStatus = 3\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n    },\r\n    handleSizeChange(val) {\r\n      // console.log(`每页 ${val} 条`)\r\n      this.pageSize = val\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.pageNum = val\r\n      this.load()\r\n    },\r\n    // 加载表格数据\r\n    load() {\r\n      request\r\n        .get('/order/shop', {\r\n          params: {\r\n            pageNum: this.pageNum,\r\n            pageSize: this.pageSize,\r\n            shopId: this.shopId\r\n          }\r\n        })\r\n        .then((res) => {\r\n          // console.log(res)\r\n          if (res.code === '0') {\r\n            this.$message({\r\n              message: res.msg,\r\n              type: 'success',\r\n              duration: 1000\r\n            })\r\n            this.tableData = []\r\n            this.tempData = []\r\n            this.total = res.data.total\r\n            this.pageNum = res.data.pageNum\r\n            res.data.data.forEach((item, i) => {\r\n              item.index = i + 1\r\n              request\r\n                .get('/user/order_number/' + item.orderNumber)\r\n                .then((res) => {\r\n                  item.realName = res.realName\r\n                  item.address = res.address\r\n                  this.tableData.push(item)\r\n                  this.tempData.push(item)\r\n                  this.tableData.sort((a, b) => a.index - b.index)\r\n                  this.tempData.sort((a, b) => a.index - b.index)\r\n                })\r\n            })\r\n          }\r\n        })\r\n        .then(() => {})\r\n    },\r\n    currentStatus(n) {\r\n      if (n === 0) {\r\n        return '待付款'\r\n      }\r\n      if (n === 1) {\r\n        return '待发货'\r\n      }\r\n      if (n === 2) {\r\n        return '已取消'\r\n      }\r\n      if (n === 3) {\r\n        return '已完成'\r\n      }\r\n      return '已完成'\r\n    },\r\n    save() {\r\n      request\r\n        .post('/user', this.form)\r\n        .then((res) => {\r\n          if (res === 0) {\r\n            this.dialogFormVisible = false\r\n            this.$message({\r\n              message: '恭喜你，添加成功！',\r\n              type: 'success'\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        .then(() => {\r\n          // 刷新表格数据\r\n          this.load()\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    let uId = sessionStorage.getItem('userId')\r\n    request\r\n      .get('/user/shop_id/' + uId)\r\n      .then((res) => {\r\n        this.shopId = res\r\n      })\r\n      .then(() => {\r\n        this.load()\r\n      })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.refresh,\r\n.waitSend,\r\n.waitPay,\r\n.cancel,\r\n.finish {\r\n  position: absolute;\r\n  right: 0;\r\n}\r\n.waitSend {\r\n  right: 110px;\r\n}\r\n.waitPay {\r\n  right: 210px;\r\n}\r\n.cancel {\r\n  right: 310px;\r\n}\r\n.finish {\r\n  right: 410px;\r\n}\r\n</style>"]}]}