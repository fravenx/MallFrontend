{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/ShopRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/ShopRegister.vue","mtime":1677682822548},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/babel.config.js","mtime":1677682822494},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vdXRpbHMvcmVxdWVzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybToge30sCiAgICAgIGNoZWNrZWQ6IGZhbHNlLAogICAgICB0aW1lcjogbnVsbAogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICB0b0hvbWUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvaG9tZScpOwogICAgfSwKCiAgICB3YXJuKG1zZykgewogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiBtc2csCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgIH0pOwogICAgfSwKCiAgICByZWdpc3RlcigpIHsKICAgICAgbGV0IHNob3AgPSB0aGlzLmZvcm07CgogICAgICBpZiAodHlwZW9mIHNob3AudGVsZXBob25lID09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgdGhpcy53YXJuKCfor7floavlhpnmiYvmnLrlj7chJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIHNob3AudXNlcm5hbWUgPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICB0aGlzLndhcm4oJ+eUqOaIt+WQjeS4jeiDveS4uuepuiEnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2Ygc2hvcC5yZWFsTmFtZSA9PSAndW5kZWZpbmVkJykgewogICAgICAgIHRoaXMud2Fybign6K+35aGr5YaZ55yf5a6e5aeT5ZCNIScpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBzaG9wLnNob3BOYW1lID09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgdGhpcy53YXJuKCfor7floavlhpnlupfpk7rlkI3np7AhJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIHNob3AucGFzc3dvcmQgPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICB0aGlzLndhcm4oJ+ivt+iuvue9ruWvhueggSEnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghL15bYS16QS1aMC05X117NCwxNn0kLy50ZXN0KHNob3AudXNlcm5hbWUpKSB7CiAgICAgICAgdGhpcy53YXJuKCfnlKjmiLflkI00LTE25L2NLCDkuJTlj6rog73ljIXlkKvlrZfmr43jgIHmlbDlrZfjgIHkuIvliJLnur8hJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIS9eW1x1NGUwMC1cdTlmYTVdezIsNn0kLy50ZXN0KHNob3AucmVhbE5hbWUpKSB7CiAgICAgICAgdGhpcy53YXJuKCflp5PlkI3moLzlvI/plJnor68nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7CiAgICAgICAgdGhpcy53YXJuKCfor7flhYjli77pgInlkIzmhI/ljY/orq4hJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXF1ZXN0LnBvc3QoJy91c2VyL3Nob3AvcmVnaXN0ZXInLCBzaG9wKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsKICAgICAgICAgIHJlcXVlc3QucG9zdCgnL3Nob3AnLCBzaG9wKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7CiAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+azqOWGjOWksei0pe+8gemUmeivr+WOn+WboO+8muacjeWKoeWZqOmUmeivryEnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuY29kZSA9PT0gJzEnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnmbvlvZXlpLHotKXvvIHplJnor6/ljp/lm6DvvJonICsgcmVzLm1zZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+azqOWGjOWksei0pe+8gemUmeivr+WOn+WboO+8muacjeWKoeWZqOmUmeivryEnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"AAmEA;AACA;EACAA;IACA;MACAC,QADA;MAEAC,cAFA;MAGAC;IAHA;EAKA,CAPA;;EAQAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;QACAC,YADA;QAEAC,eAFA;QAGAC;MAHA;IAKA,CAVA;;IAWAC;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACAC,QACAC,IADA,CACA,qBADA,EACAC,IADA,EAEAC,IAFA,CAEAC;QACA;UACAJ;YACA;cACA;gBACAJ,gBADA;gBAEAC,eAFA;gBAGAC;cAHA;cAKAO;cACA;gBACA;cACA,CAFA,EAEA,IAFA;YAGA,CAVA,MAUA;cACA;YACA;UACA,CAdA;QAeA,CAhBA,MAgBA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CAxBA,EAyBAC,KAzBA,CAyBAC;QACAC;MACA,CA3BA;IA4BA;;EAzEA;AARA","names":["data","form","checked","timer","methods","toHome","warn","message","type","duration","register","request","post","shop","then","res","clearTimeout","catch","err","console"],"sourceRoot":"src/views","sources":["ShopRegister.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <header class=\"hd\">\r\n      <img\r\n        src=\"../assets/upload/logo.svg\"\r\n        width=\"30px\"\r\n        style=\"margin-left: 10px\"\r\n        alt=\"\"\r\n      />\r\n      <h3 class=\"hd-item\">\r\n        <a href=\"javascript:;\" @click=\"toHome\"> 在线商城 </a>\r\n      </h3>\r\n      <div class=\"bb\"></div>\r\n      <h3 class=\"hd-item h2\">欢迎注册成为商家</h3>\r\n    </header>\r\n    <div class=\"bd\">\r\n      <h3 class=\"bd-hd\">店家账号注册</h3>\r\n      <el-row type=\"flex\">\r\n        <el-col :span=\"8\" :push=\"8\">\r\n          <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n            <el-form-item label=\"手机号\">\r\n              <el-input\r\n                v-model=\"form.telephone\"\r\n                placeholder=\"请输入手机号\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"用户名\">\r\n              <el-input\r\n                v-model=\"form.username\"\r\n                placeholder=\"请输入用户名\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"真实姓名\">\r\n              <el-input\r\n                v-model=\"form.realName\"\r\n                placeholder=\"请输入姓名\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"店铺名称\">\r\n              <el-input\r\n                v-model=\"form.shopName\"\r\n                placeholder=\"请输入店铺名称\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"设置密码\">\r\n              <el-input\r\n                v-model=\"form.password\"\r\n                type=\"password\"\r\n                auto-complete=\"new-password\"\r\n                placeholder=\"请输入密码\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-col>\r\n      </el-row>\r\n      <div style=\"text-align: center\">\r\n        <el-checkbox v-model=\"checked\">我已阅读并同意 </el-checkbox>\r\n        <el-link type=\"primary\"> 《在线商城店家注册协议》 </el-link>\r\n      </div>\r\n      <div style=\"text-align: center; margin-top: 20px\">\r\n        <el-button type=\"success\" @click=\"register\">注册账号并开店</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '../utils/request'\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {},\r\n      checked: false,\r\n      timer: null\r\n    }\r\n  },\r\n  methods: {\r\n    toHome() {\r\n      this.$router.push('/home')\r\n    },\r\n    warn(msg) {\r\n      this.$message({\r\n        message: msg,\r\n        type: 'warning',\r\n        duration: 2000\r\n      })\r\n    },\r\n    register() {\r\n      let shop = this.form\r\n      if (typeof shop.telephone == 'undefined') {\r\n        this.warn('请填写手机号!')\r\n        return\r\n      }\r\n      if (typeof shop.username == 'undefined') {\r\n        this.warn('用户名不能为空!')\r\n        return\r\n      }\r\n      if (typeof shop.realName == 'undefined') {\r\n        this.warn('请填写真实姓名!')\r\n        return\r\n      }\r\n      if (typeof shop.shopName == 'undefined') {\r\n        this.warn('请填写店铺名称!')\r\n        return\r\n      }\r\n      if (typeof shop.password == 'undefined') {\r\n        this.warn('请设置密码!')\r\n        return\r\n      }\r\n      if (!/^[a-zA-Z0-9_]{4,16}$/.test(shop.username)) {\r\n        this.warn('用户名4-16位, 且只能包含字母、数字、下划线!')\r\n        return\r\n      }\r\n      if (!/^[\\u4e00-\\u9fa5]{2,6}$/.test(shop.realName)) {\r\n        this.warn('姓名格式错误')\r\n        return\r\n      }\r\n      if (!this.checked) {\r\n        this.warn('请先勾选同意协议!')\r\n        return\r\n      }\r\n      request\r\n        .post('/user/shop/register', shop)\r\n        .then((res) => {\r\n          if (res.code === '0') {\r\n            request.post('/shop', shop).then((res) => {\r\n              if (res.code === '0') {\r\n                this.$message({\r\n                  message: res.msg,\r\n                  type: 'success',\r\n                  duration: 1000\r\n                })\r\n                clearTimeout(this.timer)\r\n                this.timer = setTimeout(() => {\r\n                  this.$router.push('/login')\r\n                }, 1000)\r\n              } else {\r\n                this.$message.error('注册失败！错误原因：服务器错误!')\r\n              }\r\n            })\r\n          } else if (res.code === '1') {\r\n            this.$message.error('登录失败！错误原因：' + res.msg)\r\n          } else {\r\n            this.$message.error('注册失败！错误原因：服务器错误!')\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.hd {\r\n  height: 50px;\r\n  line-height: 50px;\r\n  box-shadow: 0 1px 1px 1px rgba(204, 204, 204, 0.5);\r\n  display: flex;\r\n}\r\n\r\n.hd-item {\r\n  width: 100px;\r\n  text-align: center;\r\n  color: #262626;\r\n}\r\n.bb {\r\n  height: 20px;\r\n  width: 1px;\r\n  background-color: #bfbfbf;\r\n  position: relative;\r\n  top: 15px;\r\n}\r\n.bd {\r\n  width: 90%;\r\n  margin-left: 50%;\r\n  transform: translate(-50%);\r\n  margin-top: 20px;\r\n  height: 500px;\r\n  margin-bottom: 50px;\r\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\r\n  padding: 20px;\r\n}\r\n.h2 {\r\n  width: 180px;\r\n}\r\n.bd-hd {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  color: #520000;\r\n  font-weight: 400;\r\n  border-bottom: 1px solid #ccc;\r\n  margin-bottom: 20px;\r\n}\r\n</style>"]}]}