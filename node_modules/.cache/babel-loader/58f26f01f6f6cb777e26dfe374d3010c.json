{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/checkout/Checkoutt.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/checkout/Checkoutt.vue","mtime":1678880471772},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/babel.config.js","mtime":1677682822494},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBDaGVja291dEl0ZW0gZnJvbSAnLi9DaGVja291dEl0ZW0udnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0czogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBtb25leTogMCwKICAgICAgYWRkcmVzczogJycsCiAgICAgIHJlYWxOYW1lOiAnJywKICAgICAgdGltZXI6IG51bGwsCiAgICAgIHNob3BJZDogMCwKICAgICAgbWFwOiBuZXcgTWFwKCksCiAgICAgIG9yZGVyQW1vdW50TWFwOiBuZXcgTWFwKCkKICAgIH07CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGxldCBpdGVtcyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnY2hlY2tvdXQnKSk7CiAgICB0aGlzLnByb2R1Y3RzID0gaXRlbXMuY2FydFByb2R1Y3RzOyAvLyB0aGlzLmdldFNob3BJZCgpCgogICAgdGhpcy50b3RhbCA9IGl0ZW1zLnRvdGFsOwogICAgdGhpcy5tb25leSA9IGl0ZW1zLm1vbmV5OwogICAgbGV0IHVJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgcmVxdWVzdC5nZXQoJy91c2VyLycgKyB1SWQpLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy5yZWFsTmFtZSA9IHJlcy5kYXRhLnJlYWxOYW1lOwogICAgICB0aGlzLmFkZHJlc3MgPSByZXMuZGF0YS5hZGRyZXNzOwogICAgfSk7CiAgICB0aGlzLm1hcCA9IG5ldyBNYXAoKTsKICAgIHRoaXMub3JkZXJBbW91bnRNYXAgPSBuZXcgTWFwKCk7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMuZ2V0U2hvcElkMihpKTsKICAgIH0KICB9LAoKICBjb21wb25lbnRzOiB7CiAgICBDaGVja291dEl0ZW0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBvcmlnaW5QcmljZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdHMucmVkdWNlKChwcmVWLCBjdXJQKSA9PiBwcmVWICsgY3VyUC5wcm9kdWN0UHJpY2UgKiBjdXJQLmNvdW50LCAwKS50b0ZpeGVkKDIpOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbmNlbCgpIHsKICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnY2hlY2tvdXQnKTsKICAgICAgdGhpcy4kcm91dGVyLmJhY2soKTsKICAgIH0sCgogICAgZ2V0U2hvcElkKCkgewogICAgICByZXF1ZXN0LmdldCgnL3Nob3AvcHJvZHVjdF9pZC8nICsgdGhpcy5wcm9kdWN0c1swXS5wcm9kdWN0SWQpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnNob3BJZCA9IHJlczsKICAgICAgfSk7CiAgICB9LAoKICAgIGdldFNob3BJZDIoaSkgewogICAgICByZXF1ZXN0LmdldCgnL3Nob3AvcHJvZHVjdF9pZC8nICsgdGhpcy5wcm9kdWN0c1tpXS5wcm9kdWN0SWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAodGhpcy5tYXAuaGFzKHJlcykpIHsKICAgICAgICAgIHRoaXMubWFwLmdldChyZXMpLmFkZCh0aGlzLnByb2R1Y3RzW2ldKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IHNldCA9IG5ldyBTZXQoKTsKICAgICAgICAgIHNldC5hZGQodGhpcy5wcm9kdWN0c1tpXSk7CiAgICAgICAgICB0aGlzLm1hcC5zZXQocmVzLCBzZXQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGkgPT0gdGhpcy5wcm9kdWN0cy5sZW5ndGggLSAxKSB7CiAgICAgICAgICB0aGlzLmV2YWxPcmRlckFtb3VudCh0aGlzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBldmFsT3JkZXJBbW91bnQoX3RoaXMpIHsKICAgICAgdGhpcy5tYXAuZm9yRWFjaChmdW5jdGlvbiAoc2V0LCBrZXkpIHsKICAgICAgICBsZXQgb3JkZXJBbW91bnQgPSAwOwogICAgICAgIGxldCBzaG9wSWQgPSBrZXk7CiAgICAgICAgc2V0LmZvckVhY2goZnVuY3Rpb24gKHApIHsKICAgICAgICAgIHJlcXVlc3QuZ2V0KCcvcHJvZHVjdC8nICsgcC5wcm9kdWN0SWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgb3JkZXJBbW91bnQgKz0gcmVzLnByb2R1Y3RQcmljZSAqIHJlcy5kaXNjb3VudCAqIHAuY291bnQ7CgogICAgICAgICAgICBfdGhpcy5vcmRlckFtb3VudE1hcC5zZXQoc2hvcElkLCBvcmRlckFtb3VudCk7CiAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBzdWJtaXQoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubWFwKTsKICAgICAgbGV0IGZsYWcgPSAxOwogICAgICBsZXQgdUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyk7CgogICAgICBmb3IgKGxldCBba2V5LCBzZXRdIG9mIHRoaXMubWFwLmVudHJpZXMoKSkgewogICAgICAgIGxldCBvcmRlck4gPSB0aGlzLnJhbmRvbU5vKCk7CiAgICAgICAgbGV0IG9yZGVyQW1vdW50ID0gdGhpcy5vcmRlckFtb3VudE1hcC5nZXQoa2V5KTsKICAgICAgICBsZXQgc2hvcElkID0ga2V5OwogICAgICAgIGxldCBvcmRlck1hc3RlciA9IHsKICAgICAgICAgIG9yZGVyTnVtYmVyOiBvcmRlck4sCiAgICAgICAgICBidXllcklkOiB1SWQsCiAgICAgICAgICBvcmRlckFtb3VudDogb3JkZXJBbW91bnQudG9GaXhlZCgyKSwKICAgICAgICAgIHNob3BJZDogc2hvcElkCiAgICAgICAgfTsKICAgICAgICByZXF1ZXN0LnBvc3QoJy9vcmRlci9tYXN0ZXInLCBvcmRlck1hc3RlcikudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5jb2RlICE9PSAnMCcpIHsKICAgICAgICAgICAgZmxhZyA9IDA7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICAgICAgc2V0LmZvckVhY2goZnVuY3Rpb24gKHApIHsKICAgICAgICAgIGxldCBpdGVtID0gewogICAgICAgICAgICBvcmRlck51bWJlcjogb3JkZXJOLAogICAgICAgICAgICBwcm9kdWN0SWQ6IHAucHJvZHVjdElkLAogICAgICAgICAgICBjb3VudDogcC5jb3VudAogICAgICAgICAgfTsKICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pOwogICAgICAgICAgcmVxdWVzdC5wb3N0KCcvb3JkZXIvZGV0YWlsJywgaXRlbSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5tc2cpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZsYWcgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICBmbGFnID0gMDsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoZmxhZykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+iuouWNleaPkOS6pOaIkOWKnyEnLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICB9KTsgLy8g5riF6Zmk5pys5Zyw5a2Y5YKo5Lit55qE6K6i5Y2V5L+h5oGvCgogICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2NoZWNrb3V0Jyk7IC8vIOa4heepuui0reeJqei9pgoKICAgICAgICByZXF1ZXN0LmRlbGV0ZSgnL2NhcnQvYWxsLycgKyB1SWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5tc2cpOwogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3N1Ym1pdF9zdWNjZXNzJyk7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0KICAgIH0sCgogICAgLy8g5b2T5YmN5pe26Ze05bqP5YiXKzbkvY3pmo/mnLrmlbDkuqfnlJ/orqLljZXlj7cKICAgIHJhbmRvbU5vKGogPSA2KSB7CiAgICAgIGxldCByYW5kb21ObyA9ICcnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqOyBpKyspIHsKICAgICAgICByYW5kb21ObyArPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7CiAgICAgIH0KCiAgICAgIGxldCBuZXdEID0gbmV3IERhdGUoKTsKICAgICAgbGV0IHkgPSBuZXdELmdldEZ1bGxZZWFyKCk7CiAgICAgIGxldCBtID0gbmV3RC5nZXRNb250aCgpICsgMTsKICAgICAgbGV0IGQgPSBuZXdELmdldERhdGUoKTsKICAgICAgbGV0IGggPSBuZXdELmdldEhvdXJzKCk7CiAgICAgIGxldCBtaSA9IG5ld0QuZ2V0TWludXRlcygpOwogICAgICBsZXQgcyA9IG5ld0QuZ2V0U2Vjb25kcygpOwogICAgICBsZXQgYXJyID0gW3ksIG0sIGQsIGgsIG1pLCBzXTsKICAgICAgYXJyLmZvckVhY2goKGUsIGkpID0+IHsKICAgICAgICBpZiAoZSA8IDEwKSB7CiAgICAgICAgICBhcnJbaV0gPSAnMCcgKyBlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGxldCBuZXdEYXRlTm8gPSBhcnIuam9pbignJyk7CiAgICAgIHJhbmRvbU5vID0gbmV3RGF0ZU5vICsgcmFuZG9tTm87CiAgICAgIHJldHVybiByYW5kb21ObzsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":";AA4DA;AACA;AACA;EACAA;IACA;MACAC,YADA;MAEAC,QAFA;MAGAC,QAHA;MAIAC,WAJA;MAKAC,YALA;MAMAC,WANA;MAOAC,SAPA;MAQAC,cARA;MASAC;IATA;EAWA,CAbA;;EAcAC;IACA;IACA,mCAFA,CAGA;;IACA;IACA;IACA;IACAC;MACA;MACA;IACA,CAHA;IAKA;IACA;;IACA;MACA;IACA;EACA,CA/BA;;EAiCAC;IACAC;EADA,CAjCA;EAoCAC;IACAC;MACA,qBACAC,MADA,CACA,qDADA,EACA,CADA,EAEAC,OAFA,CAEA,CAFA;IAGA;;EALA,CApCA;EA2CAC;IACAC;MACAC;MACA;IACA,CAJA;;IAKAC;MACAV,QACAW,GADA,CACA,gDADA,EAEAC,IAFA,CAEAC;QACA;MACA,CAJA;IAKA,CAXA;;IAYAC;MACAd,QACAW,GADA,CACA,gDADA,EAEAC,IAFA,CAEAC;QACA;UACA;QACA,CAFA,MAEA;UACA;UACAE;UACA;QACA;;QACA;UACA;QACA;MACA,CAbA;IAeA,CA5BA;;IA8BAC;MACA;QACA;QACA;QACAD;UACAf,QACAW,GADA,CACA,yBADA,EAEAC,IAFA,CAEAC;YACAI;;YACAC;UACA,CALA,EAMAC,KANA,CAMAC;YACAC;UACA,CARA;QASA,CAVA;MAYA,CAfA;IAgBA,CA/CA;;IAiDAC;MACAD;MACA;MACA;;MACA;QACA;QACA;QACA;QAEA;UACAE,mBADA;UAEAC,YAFA;UAGAP,mCAHA;UAIArB;QAJA;QAOAI,QACAyB,IADA,CACA,eADA,EACAC,WADA,EAEAd,IAFA,CAEAC;UACA;YACAc;UACA;QACA,CANA,EAOAR,KAPA,CAOAC;UACAC;QACA,CATA;QAWAN;UACA;YACAQ,mBADA;YAEAK,sBAFA;YAGAC;UAHA;UAKAR;UACArB,QACAyB,IADA,CACA,eADA,EACAK,IADA,EAEAlB,IAFA,CAEAC;YACA;cACAQ;YACA,CAFA,MAEA;cACAM;YACA;UACA,CARA,EASAR,KATA,CASAC;YACAO;YACAN;UACA,CAZA;QAaA,CApBA;MAsBA;;MAEA;QACA;UACAU,kBADA;UAEAC,eAFA;UAGAC;QAHA,GADA,CAMA;;QACAxB,sCAPA,CAQA;;QACAT,QACAkC,MADA,CACA,kBADA,EAEAtB,IAFA,CAEAC;UACAQ;QACA,CAJA,EAKAF,KALA,CAKAC;UACAC;QACA,CAPA;QAQAc;QACA;UACA;QACA,CAFA,EAEA,IAFA;MAGA;IAGA,CA5HA;;IA6HA;IACAC;MACA;;MACA;QACAA;MACA;;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC;QACA;UACAA;QACA;MACA,CAJA;MAKA;MACAD;MACA;IACA;;EAnJA;AA3CA","names":["data","products","total","money","address","realName","timer","shopId","map","orderAmountMap","created","request","components","CheckoutItem","computed","originPrice","reduce","toFixed","methods","cancel","sessionStorage","getShopId","get","then","res","getShopId2","set","evalOrderAmount","orderAmount","_this","catch","err","console","submit","orderNumber","buyerId","post","orderMaster","flag","productId","count","item","message","type","duration","delete","clearTimeout","randomNo","arr"],"sourceRoot":"src/views/checkout","sources":["Checkoutt.vue"],"sourcesContent":["<template>\n  <div\n      style=\"\n      width: 80%;\n      margin-left: 50%;\n      transform: translate(-50%);\n      margin-bottom: 20px;\n    \"\n  >\n    <h3 class=\"header\">\n      <span class=\"header-span\"> 订单结算页面 </span>\n    </h3>\n    <div class=\"sub-header\">\n      <h4><i class=\"fas fa-list-ul\"></i> 商品列表</h4>\n    </div>\n\n    <el-row type=\"flex\">\n      <el-col :span=\"8\" class=\"item-header\">商品图片</el-col>\n      <el-col :span=\"8\" class=\"item-header\">商品名称</el-col>\n      <el-col :span=\"8\" class=\"item-header\">价格 x 数量</el-col>\n    </el-row>\n    <div class=\"list-bd\">\n      <CheckoutItem\n          v-for=\"(product, index) in products\"\n          :key=\"index\"\n          :cProduct=\"product\"\n      />\n    </div>\n    <div class=\"info-bd\">\n      <el-row type=\"flex\" justify=\"end\">\n        <el-col :span=\"4\" class=\"bottom-item\" style=\"color: #999\">\n          寄送至：{{ address }}\n        </el-col>\n        <el-col :span=\"4\" class=\"bottom-item\" style=\"color: #999\">\n          收件人：{{ realName }}\n        </el-col>\n        <el-col :span=\"10\"></el-col>\n        <el-col :span=\"3\" class=\"bottom-item\">共 {{ total }} 件</el-col>\n        <el-col :span=\"5\" class=\"bottom-item\"\n        >商品原总价：￥{{ originPrice }}\n        </el-col>\n      </el-row>\n      <el-row type=\"flex\" justify=\"end\">\n        <el-col :span=\"4\" class=\"bottom-item bb\"\n        >已优惠： ￥{{ (originPrice - this.money).toFixed(2) }}\n        </el-col>\n        <el-col :span=\"5\" class=\"bottom-item bb\"\n        >应付金额：\n          <span class=\"m\"> ￥{{ this.money.toFixed(2) }} </span>\n        </el-col>\n      </el-row>\n    </div>\n    <el-row type=\"flex\" justify=\"end\" style=\"margin-top: 10px\">\n      <el-button type=\"info\" @click=\"cancel\">取消订单</el-button>\n      <el-button type=\"success\" @click=\"submit\">提交订单</el-button>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport request from '../../utils/request'\nimport CheckoutItem from './CheckoutItem.vue'\nexport default {\n  data() {\n    return {\n      products: [],\n      total: 0,\n      money: 0,\n      address: '',\n      realName: '',\n      timer: null,\n      shopId: 0,\n      map: new Map,\n      orderAmountMap: new Map\n    }\n  },\n  created() {\n    let items = JSON.parse(sessionStorage.getItem('checkout'))\n    this.products = items.cartProducts\n    // this.getShopId()\n    this.total = items.total\n    this.money = items.money\n    let uId = sessionStorage.getItem('userId')\n    request.get('/user/' + uId).then((res) => {\n      this.realName = res.data.realName\n      this.address = res.data.address\n    })\n\n    this.map = new Map();\n    this.orderAmountMap = new Map();\n    for(let i = 0;i < this.products.length;i++) {\n      this.getShopId2(i)\n    }\n  },\n\n  components: {\n    CheckoutItem\n  },\n  computed: {\n    originPrice() {\n      return this.products\n          .reduce((preV, curP) => preV + curP.productPrice * curP.count, 0)\n          .toFixed(2)\n    }\n  },\n  methods: {\n    cancel() {\n      sessionStorage.removeItem('checkout')\n      this.$router.back()\n    },\n    getShopId() {\n      request\n          .get('/shop/product_id/' + this.products[0].productId)\n          .then((res) => {\n            this.shopId = res\n          })\n    },\n    getShopId2(i) {\n      request\n          .get('/shop/product_id/' + this.products[i].productId)\n          .then((res) => {\n            if(this.map.has(res)) {\n              this.map.get(res).add(this.products[i])\n            }else {\n              let set = new Set();\n              set.add(this.products[i])\n              this.map.set(res,set)\n            }\n            if(i == this.products.length - 1) {\n              this.evalOrderAmount(this)\n            }\n          })\n\n    },\n\n    evalOrderAmount(_this) {\n      this.map.forEach(function (set,key) {\n        let orderAmount = 0\n        let shopId = key\n        set.forEach(function(p) {\n          request\n              .get('/product/' + p.productId)\n              .then((res) => {\n                orderAmount += res.productPrice * res.discount * p.count;\n                (_this.orderAmountMap).set(shopId,orderAmount)\n              })\n              .catch((err) => {\n                console.log(err)\n              })\n        })\n\n      })\n    },\n\n    submit() {\n      console.log(this.map)\n      let flag = 1\n      let uId = sessionStorage.getItem('userId')\n      for (let [key, set] of this.map.entries()) {\n        let orderN = this.randomNo()\n        let orderAmount = this.orderAmountMap.get(key)\n        let shopId = key\n\n        let orderMaster = {\n          orderNumber: orderN,\n          buyerId: uId,\n          orderAmount: orderAmount.toFixed(2),\n          shopId: shopId\n        }\n\n        request\n            .post('/order/master', orderMaster)\n            .then((res) => {\n              if (res.code !== '0') {\n                flag = 0\n              }\n            })\n            .catch((err) => {\n              console.log(err)\n            })\n\n        set.forEach(function(p){\n          let item = {\n            orderNumber: orderN,\n            productId: p.productId,\n            count: p.count\n          }\n          console.log(item)\n          request\n              .post('/order/detail', item)\n              .then((res) => {\n                if (res.code === '0') {\n                  console.log(res.msg)\n                } else {\n                  flag = 0\n                }\n              })\n              .catch((err) => {\n                flag = 0\n                console.log(err)\n              })\n        })\n\n      }\n\n      if (flag) {\n        this.$message({\n          message: '订单提交成功!',\n          type: 'success',\n          duration: 1000\n        })\n        // 清除本地存储中的订单信息\n        sessionStorage.removeItem('checkout')\n        // 清空购物车\n        request\n            .delete('/cart/all/' + uId)\n            .then((res) => {\n              console.log(res.msg)\n            })\n            .catch((err) => {\n              console.log(err)\n            })\n        clearTimeout(this.timer)\n        this.timer = setTimeout(() => {\n          this.$router.push('/submit_success')\n        }, 1000)\n      }\n\n\n    },\n    // 当前时间序列+6位随机数产生订单号\n    randomNo(j = 6) {\n      let randomNo = ''\n      for (let i = 0; i < j; i++) {\n        randomNo += Math.floor(Math.random() * 10)\n      }\n      let newD = new Date()\n      let y = newD.getFullYear()\n      let m = newD.getMonth() + 1\n      let d = newD.getDate()\n      let h = newD.getHours()\n      let mi = newD.getMinutes()\n      let s = newD.getSeconds()\n      let arr = [y, m, d, h, mi, s]\n      arr.forEach((e, i) => {\n        if (e < 10) {\n          arr[i] = '0' + e\n        }\n      })\n      let newDateNo = arr.join('')\n      randomNo = newDateNo + randomNo\n      return randomNo\n    }\n  }\n}\n</script>\n\n<style scoped>\n.header {\n  height: 50px;\n  line-height: 60px;\n  font-weight: 400;\n}\n.header-span {\n  border-bottom: 1px solid rgba(204, 204, 204, 0.5);\n}\n.sub-header {\n  margin-top: 20px;\n  margin-bottom: 20px;\n  display: flex;\n}\nh3,\nh4 {\n  font-weight: 400;\n}\n.list-bd {\n  border-top: 1px solid rgba(204, 204, 204, 0.5);\n  margin-top: 10px;\n  margin-bottom: 20px;\n}\n.item-header {\n  text-align: center;\n}\n.bottom-item {\n  /* border-bottom: 1px solid rgba(204, 204, 204, 0.5); */\n  font-size: 15px;\n}\n.bb {\n  height: 40px;\n  line-height: 40px;\n}\n.m {\n  font-size: 20px;\n  color: #e4393c;\n  font-weight: 700;\n}\n.info-bd {\n  border-top: 1px solid rgba(204, 204, 204, 0.5);\n  background-color: #f4f4f4;\n  padding: 5px;\n  padding-left: 20px;\n}\n</style>"]}]}