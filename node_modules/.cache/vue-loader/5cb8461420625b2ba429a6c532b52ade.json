{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/shop/oders/Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/shop/oders/Order.vue","mtime":1677682822547},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi8uLi8uLi91dGlscy9yZXF1ZXN0Jw0KDQpjb25zdCBTdWJIZWFkZXIgPSAoKSA9PiBpbXBvcnQoJy4uLy4uL2NvbXBvbmVudHMvU3ViSGVhZGVyLnZ1ZScpDQpjb25zdCBDb250YWluZXIgPSAoKSA9PiBpbXBvcnQoJy4uLy4uL2NvbXBvbmVudHMvQ29udGFpbmVyLnZ1ZScpDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIFN1YkhlYWRlciwNCiAgICBDb250YWluZXINCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZm9ybToge30sDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsDQogICAgICAvLyBwYWdlU2l6ZeaYr+ihqOekuuS4gOmhteacgOWkmuWPr+S7peijheWHoOadoeaVsOaNrg0KICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgLy8g6KGo56S66K+35rGC56ys5Yeg6aG15pWw5o2uDQogICAgICBwYWdlTnVtOiAxLA0KICAgICAgLy8g5p+l6K+i5YWz6ZSu5a2XDQogICAgICBrZXk6ICcnLA0KICAgICAgLy8g5oC75YWx5Yeg5p2h5pWw5o2uDQogICAgICB0b3RhbDogMTAwLA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIHRlbXBEYXRhOiBbXSwNCiAgICAgIHNob3BJZDogbnVsbCwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgcHJvZHVjdHM6IFtdDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZGV0YWlsKGluZGV4LCByb3dzKSB7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgICBsZXQgb051bWJlciA9IHJvd3NbaW5kZXhdLm9yZGVyTnVtYmVyDQogICAgICByZXF1ZXN0LmdldCgncHJvZHVjdC9vcmRlci8nICsgb051bWJlcikudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7DQogICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdDQogICAgICAgICAgLy8gdGhpcy5wcm9kdWN0cyA9IHJlcy5kYXRhDQogICAgICAgICAgcmVzLmRhdGEuZm9yRWFjaCgoZSwgaSkgPT4gew0KICAgICAgICAgICAgZS5pbmRleCA9IGkgKyAxDQogICAgICAgICAgICB0aGlzLnByb2R1Y3RzLnB1c2goZSkNCiAgICAgICAgICAgIHRoaXMucHJvZHVjdHMuc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGZpbHRlclRhYmxlKG4sIGZsYWcpIHsNCiAgICAgIGlmIChmbGFnKSB7DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gdGhpcy50ZW1wRGF0YS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0ub3JkZXJTdGF0dXMgPj0gbikNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMudGVtcERhdGEuZmlsdGVyKChpdGVtKSA9PiBpdGVtLm9yZGVyU3RhdHVzID09PSBuKQ0KICAgIH0sDQogICAgLy8g5Yi35paw6KGo5qC8DQogICAgcmVmcmVzaFRhYmxlKCkgew0KICAgICAgdGhpcy5sb2FkKCkNCiAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICBtZXNzYWdlOiAn5Yi35paw5oiQ5Yqf77yBJywNCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5Y+W5raI6K6i5Y2VDQogICAgY2FuY2VsKGluZGV4LCByb3dzKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIblj5bmtojor6XorqLljZUsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICBsZXQgb051bWJlciA9IHJvd3NbaW5kZXhdLm9yZGVyTnVtYmVyDQogICAgICAgICAgcmVxdWVzdC5wYXRjaCgnL29yZGVyL2NhbmNlbC8nICsgb051bWJlcikudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YVtpbmRleF0ub3JkZXJTdGF0dXMgPSAyDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojmk43kvZwnDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWPkei0pw0KICAgIHNlbmQoaW5kZXgsIHJvd3MpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOWPkei0p+WQlz8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICBsZXQgb051bWJlciA9IHJvd3NbaW5kZXhdLm9yZGVyTnVtYmVyDQogICAgICAgICAgcmVxdWVzdC5wYXRjaCgnL29yZGVyL3NlbmQvJyArIG9OdW1iZXIpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywNCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDANCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGFbaW5kZXhdLm9yZGVyU3RhdHVzID0gMw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2cJw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgew0KICAgICAgLy8gY29uc29sZS5sb2coYOavj+mhtSAke3ZhbH0g5p2hYCkNCiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWwNCiAgICAgIHRoaXMubG9hZCgpDQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgLy8gY29uc29sZS5sb2coYOW9k+WJjemhtTogJHt2YWx9YCkNCiAgICAgIHRoaXMucGFnZU51bSA9IHZhbA0KICAgICAgdGhpcy5sb2FkKCkNCiAgICB9LA0KICAgIC8vIOWKoOi9veihqOagvOaVsOaNrg0KICAgIGxvYWQoKSB7DQogICAgICByZXF1ZXN0DQogICAgICAgIC5nZXQoJy9vcmRlci9zaG9wJywgew0KICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLA0KICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsDQogICAgICAgICAgICBzaG9wSWQ6IHRoaXMuc2hvcElkDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKQ0KICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywNCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW10NCiAgICAgICAgICAgIHRoaXMudGVtcERhdGEgPSBbXQ0KICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsDQogICAgICAgICAgICB0aGlzLnBhZ2VOdW0gPSByZXMuZGF0YS5wYWdlTnVtDQogICAgICAgICAgICByZXMuZGF0YS5kYXRhLmZvckVhY2goKGl0ZW0sIGkpID0+IHsNCiAgICAgICAgICAgICAgaXRlbS5pbmRleCA9IGkgKyAxDQogICAgICAgICAgICAgIHJlcXVlc3QNCiAgICAgICAgICAgICAgICAuZ2V0KCcvdXNlci9vcmRlcl9udW1iZXIvJyArIGl0ZW0ub3JkZXJOdW1iZXIpDQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgaXRlbS5yZWFsTmFtZSA9IHJlcy5yZWFsTmFtZQ0KICAgICAgICAgICAgICAgICAgaXRlbS5hZGRyZXNzID0gcmVzLmFkZHJlc3MNCiAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2goaXRlbSkNCiAgICAgICAgICAgICAgICAgIHRoaXMudGVtcERhdGEucHVzaChpdGVtKQ0KICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEuc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpDQogICAgICAgICAgICAgICAgICB0aGlzLnRlbXBEYXRhLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4ge30pDQogICAgfSwNCiAgICBjdXJyZW50U3RhdHVzKG4pIHsNCiAgICAgIGlmIChuID09PSAwKSB7DQogICAgICAgIHJldHVybiAn5b6F5LuY5qy+Jw0KICAgICAgfQ0KICAgICAgaWYgKG4gPT09IDEpIHsNCiAgICAgICAgcmV0dXJuICflvoXlj5HotKcnDQogICAgICB9DQogICAgICBpZiAobiA9PT0gMikgew0KICAgICAgICByZXR1cm4gJ+W3suWPlua2iCcNCiAgICAgIH0NCiAgICAgIGlmIChuID09PSAzKSB7DQogICAgICAgIHJldHVybiAn5bey5a6M5oiQJw0KICAgICAgfQ0KICAgICAgcmV0dXJuICflt7LlrozmiJAnDQogICAgfSwNCiAgICBzYXZlKCkgew0KICAgICAgcmVxdWVzdA0KICAgICAgICAucG9zdCgnL3VzZXInLCB0aGlzLmZvcm0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzID09PSAwKSB7DQogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICBtZXNzYWdlOiAn5oGt5Zac5L2g77yM5re75Yqg5oiQ5Yqf77yBJywNCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAvLyDliLfmlrDooajmoLzmlbDmja4NCiAgICAgICAgICB0aGlzLmxvYWQoKQ0KICAgICAgICB9KQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBsZXQgdUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykNCiAgICByZXF1ZXN0DQogICAgICAuZ2V0KCcvdXNlci9zaG9wX2lkLycgKyB1SWQpDQogICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMuc2hvcElkID0gcmVzDQogICAgICB9KQ0KICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLmxvYWQoKQ0KICAgICAgfSkNCiAgfQ0KfQ0K"},{"version":3,"sources":["Order.vue"],"names":[],"mappings":";AA4LA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Order.vue","sourceRoot":"src/pages/shop/oders","sourcesContent":["<template>\r\n  <Container>\r\n    <template v-slot>\r\n      <SubHeader style=\"position: relative\">\r\n        <template v-slot>\r\n          管理本店所有订单\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"filterTable(0)\"\r\n            class=\"waitPay\"\r\n            >待付款</el-button\r\n          >\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"filterTable(1)\"\r\n            class=\"waitSend\"\r\n            >待发货</el-button\r\n          >\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"filterTable(2)\"\r\n            class=\"cancel\"\r\n            >已取消</el-button\r\n          >\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"filterTable(3, true)\"\r\n            class=\"finish\"\r\n            >已完成</el-button\r\n          >\r\n          <el-button\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            @click=\"refreshTable\"\r\n            class=\"refresh\"\r\n            >所有订单</el-button\r\n          >\r\n        </template>\r\n      </SubHeader>\r\n      <el-table :data=\"tableData\" style=\"margin-top: 10px\" border stripe>\r\n        <el-table-column\r\n          prop=\"index\"\r\n          label=\"序号\"\r\n          style=\"height: 30px\"\r\n          width=\"80px\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          width=\"140px\"\r\n          align=\"center\"\r\n          prop=\"orderNumber\"\r\n          label=\"订单编号\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          width=\"100px\"\r\n          align=\"center\"\r\n          prop=\"createTime\"\r\n          label=\"下单时间\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          width=\"100px\"\r\n          align=\"center\"\r\n          prop=\"realName\"\r\n          label=\"收货人姓名\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"address\" label=\"发货地址\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"orderAmount\"\r\n          label=\"订单总额（元）\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column width=\"100px\" align=\"center\" label=\"订单状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag\r\n              size=\"small\"\r\n              :type=\"\r\n                scope.row.orderStatus === 0\r\n                  ? 'danger'\r\n                  : scope.row.orderStatus === 1\r\n                  ? 'primary'\r\n                  : scope.row.orderStatus === 2\r\n                  ? 'info'\r\n                  : 'success'\r\n              \"\r\n            >\r\n              {{ currentStatus(scope.row.orderStatus) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          width=\"220px\"\r\n          align=\"center\"\r\n          fixed=\"right\"\r\n          label=\"操作\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              :disabled=\"!(scope.row.orderStatus === 1)\"\r\n              type=\"success\"\r\n              @click.native.prevent=\"send(scope.$index, tableData)\"\r\n              size=\"mini\"\r\n              >发 货</el-button\r\n            >\r\n            <el-button\r\n              type=\"danger\"\r\n              size=\"mini\"\r\n              :disabled=\"!(scope.row.orderStatus < 2)\"\r\n              @click.native.prevent=\"cancel(scope.$index, tableData)\"\r\n              >取 消</el-button\r\n            >\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              @click.native.prevent=\"detail(scope.$index, tableData)\"\r\n              >查看</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-sizes=\"[5, 10, 100]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        style=\"margin-top: 10px\"\r\n      >\r\n      </el-pagination>\r\n\r\n      <!-- 弹出商品信息 -->\r\n      <el-dialog\r\n        title=\"订单包含商品信息\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"50%\"\r\n      >\r\n        <el-table :data=\"products\" style=\"margin-top: 10px\" border stripe>\r\n          <el-table-column\r\n            prop=\"index\"\r\n            label=\"序号\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column prop=\"imgSrc\" label=\"商品图片\" align=\"center\">\r\n            <template #default=\"scope\">\r\n              <el-image\r\n                style=\"height: 80px\"\r\n                :src=\"scope.row.imgSrc\"\r\n                :preview-src-list=\"[scope.row.imgSrc]\"\r\n              ></el-image>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"productName\"\r\n            label=\"商品名称\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"count\"\r\n            label=\"数量\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"orderProductPrice\"\r\n            label=\"总价格\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n        </el-table>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"dialogVisible = false\"\r\n            >确 定</el-button\r\n          >\r\n        </span>\r\n      </el-dialog>\r\n    </template>\r\n  </Container>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../utils/request'\r\n\r\nconst SubHeader = () => import('../../components/SubHeader.vue')\r\nconst Container = () => import('../../components/Container.vue')\r\n\r\nexport default {\r\n  components: {\r\n    SubHeader,\r\n    Container\r\n  },\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      // pageSize是表示一页最多可以装几条数据\r\n      pageSize: 10,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      // 查询关键字\r\n      key: '',\r\n      // 总共几条数据\r\n      total: 100,\r\n      tableData: [],\r\n      tempData: [],\r\n      shopId: null,\r\n      dialogVisible: false,\r\n      products: []\r\n    }\r\n  },\r\n  methods: {\r\n    detail(index, rows) {\r\n      this.dialogVisible = true\r\n      let oNumber = rows[index].orderNumber\r\n      request.get('product/order/' + oNumber).then((res) => {\r\n        if (res.code === '0') {\r\n          this.products = []\r\n          // this.products = res.data\r\n          res.data.forEach((e, i) => {\r\n            e.index = i + 1\r\n            this.products.push(e)\r\n            this.products.sort((a, b) => a.index - b.index)\r\n          })\r\n        }\r\n      })\r\n    },\r\n    filterTable(n, flag) {\r\n      if (flag) {\r\n        this.tableData = this.tempData.filter((item) => item.orderStatus >= n)\r\n        return\r\n      }\r\n      this.tableData = this.tempData.filter((item) => item.orderStatus === n)\r\n    },\r\n    // 刷新表格\r\n    refreshTable() {\r\n      this.load()\r\n      this.$message({\r\n        message: '刷新成功！',\r\n        type: 'success'\r\n      })\r\n    },\r\n    // 取消订单\r\n    cancel(index, rows) {\r\n      this.$confirm('此操作将取消该订单, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let oNumber = rows[index].orderNumber\r\n          request.patch('/order/cancel/' + oNumber).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n              this.tableData[index].orderStatus = 2\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n    },\r\n    // 发货\r\n    send(index, rows) {\r\n      this.$confirm('确认发货吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let oNumber = rows[index].orderNumber\r\n          request.patch('/order/send/' + oNumber).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n              this.tableData[index].orderStatus = 3\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n    },\r\n    handleSizeChange(val) {\r\n      // console.log(`每页 ${val} 条`)\r\n      this.pageSize = val\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.pageNum = val\r\n      this.load()\r\n    },\r\n    // 加载表格数据\r\n    load() {\r\n      request\r\n        .get('/order/shop', {\r\n          params: {\r\n            pageNum: this.pageNum,\r\n            pageSize: this.pageSize,\r\n            shopId: this.shopId\r\n          }\r\n        })\r\n        .then((res) => {\r\n          // console.log(res)\r\n          if (res.code === '0') {\r\n            this.$message({\r\n              message: res.msg,\r\n              type: 'success',\r\n              duration: 1000\r\n            })\r\n            this.tableData = []\r\n            this.tempData = []\r\n            this.total = res.data.total\r\n            this.pageNum = res.data.pageNum\r\n            res.data.data.forEach((item, i) => {\r\n              item.index = i + 1\r\n              request\r\n                .get('/user/order_number/' + item.orderNumber)\r\n                .then((res) => {\r\n                  item.realName = res.realName\r\n                  item.address = res.address\r\n                  this.tableData.push(item)\r\n                  this.tempData.push(item)\r\n                  this.tableData.sort((a, b) => a.index - b.index)\r\n                  this.tempData.sort((a, b) => a.index - b.index)\r\n                })\r\n            })\r\n          }\r\n        })\r\n        .then(() => {})\r\n    },\r\n    currentStatus(n) {\r\n      if (n === 0) {\r\n        return '待付款'\r\n      }\r\n      if (n === 1) {\r\n        return '待发货'\r\n      }\r\n      if (n === 2) {\r\n        return '已取消'\r\n      }\r\n      if (n === 3) {\r\n        return '已完成'\r\n      }\r\n      return '已完成'\r\n    },\r\n    save() {\r\n      request\r\n        .post('/user', this.form)\r\n        .then((res) => {\r\n          if (res === 0) {\r\n            this.dialogFormVisible = false\r\n            this.$message({\r\n              message: '恭喜你，添加成功！',\r\n              type: 'success'\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        .then(() => {\r\n          // 刷新表格数据\r\n          this.load()\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    let uId = sessionStorage.getItem('userId')\r\n    request\r\n      .get('/user/shop_id/' + uId)\r\n      .then((res) => {\r\n        this.shopId = res\r\n      })\r\n      .then(() => {\r\n        this.load()\r\n      })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.refresh,\r\n.waitSend,\r\n.waitPay,\r\n.cancel,\r\n.finish {\r\n  position: absolute;\r\n  right: 0;\r\n}\r\n.waitSend {\r\n  right: 110px;\r\n}\r\n.waitPay {\r\n  right: 210px;\r\n}\r\n.cancel {\r\n  right: 310px;\r\n}\r\n.finish {\r\n  right: 410px;\r\n}\r\n</style>"]}]}