{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/components/Header.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/components/Header.vue","mtime":1678930232504},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi91dGlscy9yZXF1ZXN0Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhY3RpdmVJbmRleDogJzEnLA0KICAgICAgYWN0aXZlSW5kZXgyOiAnMScsDQogICAgICBzZWFyY2g6ICcnLA0KICAgICAgcGF0aDogdGhpcy4kcm91dGUucGF0aCwNCiAgICAgIGlzTG9naW46IGZhbHNlLA0KICAgICAgY2FydENvdW50OiAwLA0KICAgICAgbGlrZUNvdW50OiAwLA0KICAgICAgb3JkZXJDb3VudDogMCwNCiAgICAgIHVzZXJuYW1lOiAn5ri45a6iJywNCiAgICAgIGF2YXRhcjogJycNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB0b1NlYXJjaCgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDogJy9zZWFyY2gnLA0KICAgICAgICBxdWVyeTogew0KICAgICAgICAgIGtleTogdGhpcy5zZWFyY2gNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMuc2VhcmNoID0gJycNCiAgICB9LA0KICAgIGhhbmRsZVNlbGVjdChrZXksIGtleVBhdGgpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKGtleSwga2V5UGF0aCkNCiAgICB9LA0KICAgIHRvTG9naW4oKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJykNCiAgICB9LA0KICAgIGxvZ291dCgpIHsNCiAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCkNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvaG9tZScpDQogICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgbWVzc2FnZTogJ+mAgOWHuui0puWPt+aIkOWKn++8gScsDQogICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgIH0pDQogICAgICAvLyDop6blj5HniLbnu4Tku7YgTGF5b3V055qEIHJlbG9hZEhlYWRlcuS6i+S7tu+8jOWIt+aWsEhlYWRlcue7hOS7tg0KICAgICAgdGhpcy4kZW1pdCgncmVsb2FkSGVhZGVyJykNCiAgICB9LA0KICAgIHRvUHJvZmlsZSgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcHJvZmlsZScpDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIOaQnOe0og0KICAgIHRoaXMuc2VhcmNoID0gdGhpcy4kcm91dGUucXVlcnkua2V5DQogICAgbGV0IHVzZXJJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpDQogICAgdGhpcy5pc0xvZ2luID0gdXNlcklkID8gdHJ1ZSA6IGZhbHNlDQogICAgaWYgKHVzZXJJZCkgew0KICAgICAgcmVxdWVzdA0KICAgICAgICAuZ2V0KCcvY2FydC9jb3VudC8nICsgdXNlcklkKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy5jYXJ0Q291bnQgPSByZXMNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgICByZXF1ZXN0LmdldCgnL3VzZXIvJyArIHVzZXJJZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMudXNlcm5hbWUgPSByZXMuZGF0YS51c2VybmFtZQ0KICAgICAgICB0aGlzLmF2YXRhciA9IHJlcy5kYXRhLmF2YXRhcg0KICAgICAgfSkNCiAgICAgIHJlcXVlc3QuZ2V0KCcvb3JkZXIvY291bnQvJyArIHVzZXJJZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMub3JkZXJDb3VudCA9IHJlcy5kYXRhDQogICAgICB9KQ0KICAgICAgcmVxdWVzdC5nZXQoJ2xpa2UvY291bnQvJyArIHVzZXJJZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMubGlrZUNvdW50ID0gcmVzLmRhdGENCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Header.vue"],"names":[],"mappings":";AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Header.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div style=\"display: flex\">\r\n      <a href=\"/\" class=\"logo=l\">\r\n        <img src=\"../assets/upload/logo.svg\" alt=\"\" class=\"logo\" />\r\n      </a>\r\n      <span class=\"head\">乐淘网</span>\r\n    </div>\r\n    <div>\r\n      <el-menu\r\n        :default-active=\"path\"\r\n        class=\"mmm\"\r\n        mode=\"horizontal\"\r\n        @select=\"handleSelect\"\r\n        router\r\n      >\r\n        <el-menu-item style=\"flex: 1\" index=\"/home\">首页</el-menu-item>\r\n        <el-menu-item index=\"/product_list\">所有商品</el-menu-item>\r\n\r\n        <el-menu-item\r\n          index=\"/like\"\r\n          :offset=\"2\"\r\n          style=\"line-height: 38px; flex: 1\"\r\n        >\r\n          <el-badge :value=\"likeCount\" class=\"item\" v-if=\"likeCount\">\r\n            收藏夹\r\n          </el-badge>\r\n          <div v-else class=\"item2\">收藏夹</div>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/cart\" style=\"line-height: 38px; flex: 1\">\r\n          <el-badge :value=\"cartCount\" class=\"item\" v-if=\"cartCount\">\r\n            购物车\r\n          </el-badge>\r\n          <div v-else class=\"item2\">购物车</div>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/order\" style=\"line-height: 38px; flex: 1\">\r\n          <el-badge :value=\"orderCount\" class=\"item\" v-if=\"orderCount\">\r\n            我的订单\r\n          </el-badge>\r\n          <div v-else class=\"item2\">我的订单</div>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/profile\" style=\"flex: 1\">我的</el-menu-item>\r\n        <el-submenu index=\"\" style=\"flex: 1\">\r\n          <template slot=\"title\">更多</template>\r\n          <el-menu-item index=\"/about\">关于本网站</el-menu-item>\r\n          <el-menu-item index=\"/notice\">网站公告</el-menu-item>\r\n          <el-menu-item index=\"/shop/register\">\r\n            <el-link>注册成为商家</el-link>\r\n          </el-menu-item>\r\n        </el-submenu>\r\n      </el-menu>\r\n    </div>\r\n    <div>\r\n      <div\r\n        v-if=\"!this.$route.query.key\"\r\n        style=\"text-align: center; display: flex\"\r\n      >\r\n        <el-input\r\n          v-model=\"search\"\r\n          placeholder=\"请输入搜索内容\"\r\n          suffix-icon=\"el-icon-search\"\r\n          style=\"margin-top: 13px; width: 80%\"\r\n          size=\"small\"\r\n        ></el-input>\r\n        <div style=\"margin-left: 5px; width: 18%\">\r\n          <el-button class=\"search-btn\" size=\"small\" @click=\"toSearch\"\r\n            >搜索</el-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <el-button\r\n        @click=\"toLogin\"\r\n        v-if=\"!isLogin\"\r\n        size=\"small\"\r\n        style=\"margin-top: 13px\"\r\n        type=\"primary\"\r\n        >登录</el-button\r\n      >\r\n      <el-button\r\n        @click=\"logout\"\r\n        plain\r\n        v-else\r\n        size=\"small\"\r\n        style=\"margin-top: 13px\"\r\n      >\r\n        注销\r\n      </el-button>\r\n    </div>\r\n    <div style=\"display: flex; align-items: center; justify-content: end\">\r\n      <a\r\n        href=\"javascript:;\"\r\n        style=\"display: block\"\r\n        v-if=\"isLogin\"\r\n        @click=\"toProfile\"\r\n      >\r\n        <el-avatar size=\"large\" class=\"avatar\" :src=\"avatar\"></el-avatar>\r\n      </a>\r\n      <div v-else>\r\n        <el-avatar class=\"avatar\" icon=\"el-icon-user-solid\"></el-avatar>\r\n      </div>\r\n      <el-dropdown style=\"width: 100%; padding: 0\">\r\n        <span class=\"el-dropdown-link\">\r\n          {{ username }}<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n        </span>\r\n        <el-dropdown-menu slot=\"dropdown\" class=\"down\">\r\n          <a href=\"javascript:;\" style=\"display: block\" @click=\"toProfile\">\r\n            <el-dropdown-item> 个人信息 </el-dropdown-item>\r\n          </a>\r\n          <el-dropdown-item>\r\n            <a href=\"javascript:;\" @click=\"logout\"> 退出 </a>\r\n          </el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </el-dropdown>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '../utils/request'\r\nexport default {\r\n  data() {\r\n    return {\r\n      activeIndex: '1',\r\n      activeIndex2: '1',\r\n      search: '',\r\n      path: this.$route.path,\r\n      isLogin: false,\r\n      cartCount: 0,\r\n      likeCount: 0,\r\n      orderCount: 0,\r\n      username: '游客',\r\n      avatar: ''\r\n    }\r\n  },\r\n  methods: {\r\n    toSearch() {\r\n      this.$router.push({\r\n        path: '/search',\r\n        query: {\r\n          key: this.search\r\n        }\r\n      })\r\n      this.search = ''\r\n    },\r\n    handleSelect(key, keyPath) {\r\n      // console.log(key, keyPath)\r\n    },\r\n    toLogin() {\r\n      this.$router.push('/login')\r\n    },\r\n    logout() {\r\n      sessionStorage.clear()\r\n      this.$router.push('/home')\r\n      this.$message({\r\n        message: '退出账号成功！',\r\n        type: 'success',\r\n        duration: 2000\r\n      })\r\n      // 触发父组件 Layout的 reloadHeader事件，刷新Header组件\r\n      this.$emit('reloadHeader')\r\n    },\r\n    toProfile() {\r\n      this.$router.push('/profile')\r\n    }\r\n  },\r\n  created() {\r\n    // 搜索\r\n    this.search = this.$route.query.key\r\n    let userId = sessionStorage.getItem('userId')\r\n    this.isLogin = userId ? true : false\r\n    if (userId) {\r\n      request\r\n        .get('/cart/count/' + userId)\r\n        .then((res) => {\r\n          this.cartCount = res\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n      request.get('/user/' + userId).then((res) => {\r\n        this.username = res.data.username\r\n        this.avatar = res.data.avatar\r\n      })\r\n      request.get('/order/count/' + userId).then((res) => {\r\n        this.orderCount = res.data\r\n      })\r\n      request.get('like/count/' + userId).then((res) => {\r\n        this.likeCount = res.data\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.item {\r\n  height: 20px;\r\n}\r\n.item2 {\r\n  margin-top: 11px;\r\n}\r\n.container {\r\n  display: grid;\r\n  grid-template-columns: 2fr 5fr 5fr 1fr 2fr;\r\n  grid-template-rows: 1fr;\r\n  grid-column-gap: 5px;\r\n  /*grid-row-gap: px;*/\r\n  border-bottom: 1px solid #ccc;\r\n}\r\n.mmm {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n.el-dropdown-link {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: -10px;\r\n  cursor: pointer;\r\n  color: #409eff;\r\n  font-size: 12px;\r\n}\r\n.el-icon-arrow-down {\r\n  font-size: 12px;\r\n}\r\n.badge__content {\r\n  position: absolute;\r\n  left: 0;\r\n}\r\n.avatar {\r\n  border: 1px solid #666;\r\n  position: relative;\r\n  left: 0px;\r\n}\r\n.space {\r\n  width: 1px;\r\n  height: 1px;\r\n  color: transparent;\r\n}\r\n.logo {\r\n  width: 40px;\r\n  margin-left: 7px;\r\n  margin-top: 10px;\r\n  float: left;\r\n  vertical-align: middle;\r\n}\r\n.head {\r\n  position: relative;\r\n  top: 20px;\r\n  left: 8px;\r\n  font-size: 1rem;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n.search-btn {\r\n  margin-top: 13px;\r\n}\r\n.down {\r\n  position: relative;\r\n  top: 10px;\r\n}\r\n</style>"]}]}