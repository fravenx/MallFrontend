{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/category/CategoryCard.vue?vue&type=style&index=0&id=46004f0c&scoped=true&lang=css&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/category/CategoryCard.vue","mtime":1677682822549},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouaW1hZ2Ugew0KICBtYXJnaW4tbGVmdDogNTAlOw0KICB3aWR0aDogMTAwJTsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSk7DQogIGRpc3BsYXk6IGJsb2NrOw0KfQ0KLmNhcmQgew0KICBoZWlnaHQ6IDIwMHB4Ow0KICB3aWR0aDogMTUwcHg7DQogIG1hcmdpbi1sZWZ0OiAyMHB4Ow0KICBtYXJnaW4tdG9wOiAxMHB4Ow0KICBwYWRkaW5nLXRvcDogMDsNCiAgcGFkZGluZy1ib3R0b206IDA7DQogIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4yNCkgMHB4IDNweCA4cHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCn0NCg0KLmNhcmQ6aG92ZXIgew0KICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEuNXB4KTsNCn0NCg0KLnByaWNlIHsNCiAgY29sb3I6IHJlZDsNCiAgbWFyZ2luLWxlZnQ6IDEwJTsNCiAgZm9udC1zaXplOiAxNXB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoNCi5wbmFtZSB7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgZm9udC1zaXplOiAxM3B4Ow0KICBwYWRkaW5nOiAzcHggMCAzcHggMDsNCn0NCg=="},{"version":3,"sources":["CategoryCard.vue"],"names":[],"mappings":";AA4HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"CategoryCard.vue","sourceRoot":"src/views/home/components/category","sourcesContent":["<template>\r\n  <el-card\r\n    class=\"card\"\r\n    title=\"点击可查看商品详情\"\r\n    @click.native=\"getProductDetails\"\r\n  >\r\n    <img :src=\"product.imgSrc\" class=\"image\" />\r\n    <p class=\"pname\">{{ product.productName }}</p>\r\n    <div class=\"price\"\r\n      >￥{{ finalPrice }}</div\r\n    >\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../../utils/request'\r\nexport default {\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    finalPrice() {\r\n      const {productPrice, discount} = this.product\r\n      return (productPrice*discount).toFixed(2)\r\n    }\r\n  },\r\n  methods: {\r\n    getProductDetails() {\r\n      // 点击Card组件，通过路由传递商品id给Dtails组件，期间发起请求。\r\n      this.$router.push({\r\n        path: '/details',\r\n        query: {\r\n          id: this.product.productId\r\n        }\r\n      })\r\n    },\r\n    // 将商品加入到购物车\r\n    addToCart(e) {\r\n      let pId = this.product.productId\r\n      let uId = sessionStorage.getItem('userId')\r\n      if (uId) {\r\n        request\r\n          .post('/cart', {\r\n            userId: uId,\r\n            productId: pId\r\n          })\r\n          .then((res) => {\r\n            if (res.code == '1') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'warning',\r\n                duration: 1000\r\n              })\r\n            } else {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n      } else {\r\n        this.$message({\r\n          message: '请先登录！',\r\n          type: 'warning',\r\n          duration: 1000\r\n        })\r\n      }\r\n      // 触发父组件 Layout的 logout，刷新Header组件\r\n      this.$emit('reloadHeader')\r\n      // 阻止事件冒泡\r\n      e.stopPropagation()\r\n    },\r\n    addToLike(e) {\r\n      let pId = this.product.productId\r\n      let uId = sessionStorage.getItem('userId')\r\n      if (uId) {\r\n        request\r\n          .post('/like', {\r\n            productId: pId,\r\n            userId: uId\r\n          })\r\n          .then((res) => {\r\n            if (res.code == '1') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'warning',\r\n                duration: 1000\r\n              })\r\n              return\r\n            }\r\n            if (res.code == '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n      } else {\r\n        this.$message({\r\n          message: '请先登录！',\r\n          type: 'warning',\r\n          duration: 1000\r\n        })\r\n      }\r\n      e.stopPropagation()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.image {\r\n  margin-left: 50%;\r\n  width: 100%;\r\n  transform: translate(-50%);\r\n  display: block;\r\n}\r\n.card {\r\n  height: 200px;\r\n  width: 150px;\r\n  margin-left: 20px;\r\n  margin-top: 10px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.card:hover {\r\n  transform: translateY(-1.5px);\r\n}\r\n\r\n.price {\r\n  color: red;\r\n  margin-left: 10%;\r\n  font-size: 15px;\r\n  text-align: center;\r\n}\r\n\r\n.pname {\r\n  text-align: center;\r\n  font-size: 13px;\r\n  padding: 3px 0 3px 0;\r\n}\r\n</style>"]}]}