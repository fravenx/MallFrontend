{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/category/CategoryCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/category/CategoryCard.vue","mtime":1677682822549},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9yZXF1ZXN0Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIHByb2R1Y3Q6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7fQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBmaW5hbFByaWNlKCkgew0KICAgICAgY29uc3Qge3Byb2R1Y3RQcmljZSwgZGlzY291bnR9ID0gdGhpcy5wcm9kdWN0DQogICAgICByZXR1cm4gKHByb2R1Y3RQcmljZSpkaXNjb3VudCkudG9GaXhlZCgyKQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFByb2R1Y3REZXRhaWxzKCkgew0KICAgICAgLy8g54K55Ye7Q2FyZOe7hOS7tu+8jOmAmui/h+i3r+eUseS8oOmAkuWVhuWTgWlk57uZRHRhaWxz57uE5Lu277yM5pyf6Ze05Y+R6LW36K+35rGC44CCDQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICcvZGV0YWlscycsDQogICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgaWQ6IHRoaXMucHJvZHVjdC5wcm9kdWN0SWQNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWwhuWVhuWTgeWKoOWFpeWIsOi0reeJqei9pg0KICAgIGFkZFRvQ2FydChlKSB7DQogICAgICBsZXQgcElkID0gdGhpcy5wcm9kdWN0LnByb2R1Y3RJZA0KICAgICAgbGV0IHVJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpDQogICAgICBpZiAodUlkKSB7DQogICAgICAgIHJlcXVlc3QNCiAgICAgICAgICAucG9zdCgnL2NhcnQnLCB7DQogICAgICAgICAgICB1c2VySWQ6IHVJZCwNCiAgICAgICAgICAgIHByb2R1Y3RJZDogcElkDQogICAgICAgICAgfSkNCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gJzEnKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLA0KICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogJ+ivt+WFiOeZu+W9le+8gScsDQogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLA0KICAgICAgICAgIGR1cmF0aW9uOiAxMDAwDQogICAgICAgIH0pDQogICAgICB9DQogICAgICAvLyDop6blj5HniLbnu4Tku7YgTGF5b3V055qEIGxvZ291dO+8jOWIt+aWsEhlYWRlcue7hOS7tg0KICAgICAgdGhpcy4kZW1pdCgncmVsb2FkSGVhZGVyJykNCiAgICAgIC8vIOmYu+atouS6i+S7tuWGkuazoQ0KICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQ0KICAgIH0sDQogICAgYWRkVG9MaWtlKGUpIHsNCiAgICAgIGxldCBwSWQgPSB0aGlzLnByb2R1Y3QucHJvZHVjdElkDQogICAgICBsZXQgdUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykNCiAgICAgIGlmICh1SWQpIHsNCiAgICAgICAgcmVxdWVzdA0KICAgICAgICAgIC5wb3N0KCcvbGlrZScsIHsNCiAgICAgICAgICAgIHByb2R1Y3RJZDogcElkLA0KICAgICAgICAgICAgdXNlcklkOiB1SWQNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAnMScpIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywNCiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDANCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gJzAnKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICAgIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiAn6K+35YWI55m75b2V77yBJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgZHVyYXRpb246IDEwMDANCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["CategoryCard.vue"],"names":[],"mappings":";AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CategoryCard.vue","sourceRoot":"src/views/home/components/category","sourcesContent":["<template>\r\n  <el-card\r\n    class=\"card\"\r\n    title=\"点击可查看商品详情\"\r\n    @click.native=\"getProductDetails\"\r\n  >\r\n    <img :src=\"product.imgSrc\" class=\"image\" />\r\n    <p class=\"pname\">{{ product.productName }}</p>\r\n    <div class=\"price\"\r\n      >￥{{ finalPrice }}</div\r\n    >\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../../utils/request'\r\nexport default {\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    finalPrice() {\r\n      const {productPrice, discount} = this.product\r\n      return (productPrice*discount).toFixed(2)\r\n    }\r\n  },\r\n  methods: {\r\n    getProductDetails() {\r\n      // 点击Card组件，通过路由传递商品id给Dtails组件，期间发起请求。\r\n      this.$router.push({\r\n        path: '/details',\r\n        query: {\r\n          id: this.product.productId\r\n        }\r\n      })\r\n    },\r\n    // 将商品加入到购物车\r\n    addToCart(e) {\r\n      let pId = this.product.productId\r\n      let uId = sessionStorage.getItem('userId')\r\n      if (uId) {\r\n        request\r\n          .post('/cart', {\r\n            userId: uId,\r\n            productId: pId\r\n          })\r\n          .then((res) => {\r\n            if (res.code == '1') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'warning',\r\n                duration: 1000\r\n              })\r\n            } else {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n      } else {\r\n        this.$message({\r\n          message: '请先登录！',\r\n          type: 'warning',\r\n          duration: 1000\r\n        })\r\n      }\r\n      // 触发父组件 Layout的 logout，刷新Header组件\r\n      this.$emit('reloadHeader')\r\n      // 阻止事件冒泡\r\n      e.stopPropagation()\r\n    },\r\n    addToLike(e) {\r\n      let pId = this.product.productId\r\n      let uId = sessionStorage.getItem('userId')\r\n      if (uId) {\r\n        request\r\n          .post('/like', {\r\n            productId: pId,\r\n            userId: uId\r\n          })\r\n          .then((res) => {\r\n            if (res.code == '1') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'warning',\r\n                duration: 1000\r\n              })\r\n              return\r\n            }\r\n            if (res.code == '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n      } else {\r\n        this.$message({\r\n          message: '请先登录！',\r\n          type: 'warning',\r\n          duration: 1000\r\n        })\r\n      }\r\n      e.stopPropagation()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.image {\r\n  margin-left: 50%;\r\n  width: 100%;\r\n  transform: translate(-50%);\r\n  display: block;\r\n}\r\n.card {\r\n  height: 200px;\r\n  width: 150px;\r\n  margin-left: 20px;\r\n  margin-top: 10px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.card:hover {\r\n  transform: translateY(-1.5px);\r\n}\r\n\r\n.price {\r\n  color: red;\r\n  margin-left: 10%;\r\n  font-size: 15px;\r\n  text-align: center;\r\n}\r\n\r\n.pname {\r\n  text-align: center;\r\n  font-size: 13px;\r\n  padding: 3px 0 3px 0;\r\n}\r\n</style>"]}]}