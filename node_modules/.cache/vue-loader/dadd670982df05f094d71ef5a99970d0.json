{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/like/LikeItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/like/LikeItem.vue","mtime":1677682822550},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi8uLi91dGlscy9yZXF1ZXN0Jw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHZpc2libGU6IGZhbHNlDQogICAgfQ0KICB9LA0KICBwcm9wczogew0KICAgIGxpa2VQcm9kdWN0OiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4ge30NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB0b0RldGFpbHMoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICcvZGV0YWlscycsDQogICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgaWQ6IHRoaXMubGlrZVByb2R1Y3QucHJvZHVjdElkDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBhZGRUb0NhcnQoZSkgew0KICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQ0KICAgICAgbGV0IHBJZCA9IHRoaXMubGlrZVByb2R1Y3QucHJvZHVjdElkDQogICAgICBsZXQgdUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykNCiAgICAgIGlmICh1SWQpIHsNCiAgICAgICAgcmVxdWVzdA0KICAgICAgICAgIC5wb3N0KCcvY2FydCcsIHsNCiAgICAgICAgICAgIHVzZXJJZDogdUlkLA0KICAgICAgICAgICAgcHJvZHVjdElkOiBwSWQsDQogICAgICAgICAgICBjb3VudDogdGhpcy5udW0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAnMScpIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywNCiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDANCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICAgIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiAn6K+35YWI55m75b2V77yBJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgZHVyYXRpb246IDEwMDANCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNob3dEZWxldGUoZSkgew0KICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZQ0KICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQ0KICAgIH0sDQogICAgZGVsZXRlSXRlbShlKSB7DQogICAgICByZXF1ZXN0DQogICAgICAgIC5kZWxldGUoJy9saWtlLycgKyB0aGlzLmxpa2VQcm9kdWN0Lmxpa2VJZCkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAnMCcpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLA0KICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhpcy4kZW1pdCgncmVsb2FkJykNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICB9KQ0KICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UNCiAgICB9LA0KICAgIHRvQ2hlY2tvdXQoZSkgew0KICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQ0KICAgICAgdGhpcy5saWtlUHJvZHVjdC5jb3VudCA9IDENCiAgICAgIGxldCBvYmogPSB7DQogICAgICAgIHRvdGFsOiAxLA0KICAgICAgICBtb25leTogdGhpcy5saWtlUHJvZHVjdC5wcm9kdWN0UHJpY2UgKiB0aGlzLmxpa2VQcm9kdWN0LmRpc2NvdW50LA0KICAgICAgICBjYXJ0UHJvZHVjdHM6IFt0aGlzLmxpa2VQcm9kdWN0XQ0KICAgICAgfQ0KICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY2hlY2tvdXQnLCBKU09OLnN0cmluZ2lmeShvYmopKQ0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9jaGVja291dCcpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["LikeItem.vue"],"names":[],"mappings":";AAgDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LikeItem.vue","sourceRoot":"src/views/like","sourcesContent":["<template>\r\n  <div class=\"item\">\r\n    <a href=\"javascript:;\" @click=\"toDetails\">\r\n      <div class=\"imgbox\">\r\n        <img :src=\"likeProduct.imgSrc\" alt=\"\" />\r\n        <div class=\"add\" @click=\"addToCart\">加入购物车</div>\r\n        <div class=\"buy\" @click=\"toCheckout\">直接购买</div>\r\n        <div class=\"del\" @click=\"showDelete\">\r\n          <el-popover placement=\"top\" width=\"160\" v-model=\"visible\">\r\n            <p>确定从收藏夹移出该商品吗？</p>\r\n            <div style=\"text-align: right; margin: 0\">\r\n              <el-button size=\"mini\" type=\"text\" @click=\"visible = false\"\r\n                >取消</el-button\r\n              >\r\n              <el-button type=\"primary\" size=\"mini\" @click=\"deleteItem\"\r\n                >确定</el-button\r\n              >\r\n            </div>\r\n            <i\r\n              slot=\"reference\"\r\n              class=\"fas fa-trash-alt\"\r\n              style=\"color: #fff\"\r\n            ></i>\r\n          </el-popover>\r\n        </div>\r\n      </div>\r\n    </a>\r\n\r\n    <div style=\"background-color: #f4f4f5\">\r\n      <div class=\"p-name\">{{ likeProduct.productName }}</div>\r\n      <div class=\"p-time\">\r\n        收藏时间：<span style=\"color: #409eff\">{{\r\n          likeProduct.likeTime.slice(0, 10)\r\n        }}</span>\r\n      </div>\r\n      <div class=\"p-price\">\r\n        <span class=\"price1\">\r\n          ￥{{ (likeProduct.productPrice * likeProduct.discount).toFixed(2) }}\r\n        </span>\r\n        <span v-if=\"likeProduct.discount < 1\" class=\"price2\"\r\n          >￥{{ likeProduct.productPrice }}</span\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../utils/request'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      visible: false\r\n    }\r\n  },\r\n  props: {\r\n    likeProduct: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    toDetails() {\r\n      this.$router.push({\r\n        path: '/details',\r\n        query: {\r\n          id: this.likeProduct.productId\r\n        }\r\n      })\r\n    },\r\n    addToCart(e) {\r\n      e.stopPropagation()\r\n      let pId = this.likeProduct.productId\r\n      let uId = sessionStorage.getItem('userId')\r\n      if (uId) {\r\n        request\r\n          .post('/cart', {\r\n            userId: uId,\r\n            productId: pId,\r\n            count: this.num\r\n          })\r\n          .then((res) => {\r\n            if (res.code == '1') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'warning',\r\n                duration: 1000\r\n              })\r\n            } else {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n      } else {\r\n        this.$message({\r\n          message: '请先登录！',\r\n          type: 'warning',\r\n          duration: 1000\r\n        })\r\n      }\r\n    },\r\n    showDelete(e) {\r\n      this.visible = true\r\n      e.stopPropagation()\r\n    },\r\n    deleteItem(e) {\r\n      request\r\n        .delete('/like/' + this.likeProduct.likeId)\r\n        .then((res) => {\r\n          if (res.code == '0') {\r\n            this.$message({\r\n              message: res.msg,\r\n              type: 'success',\r\n              duration: 1000\r\n            })\r\n            this.$emit('reload')\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n      this.visible = false\r\n    },\r\n    toCheckout(e) {\r\n      e.stopPropagation()\r\n      this.likeProduct.count = 1\r\n      let obj = {\r\n        total: 1,\r\n        money: this.likeProduct.productPrice * this.likeProduct.discount,\r\n        cartProducts: [this.likeProduct]\r\n      }\r\n      sessionStorage.setItem('checkout', JSON.stringify(obj))\r\n      this.$router.push('/checkout')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.item {\r\n  height: 235px;\r\n  width: 180px;\r\n  margin-left: 10px;\r\n  margin-bottom: 10px;\r\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 2px 8px;\r\n}\r\n.imgbox {\r\n  height: 180px;\r\n  width: 180px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  text-align: center;\r\n}\r\n.imgbox img {\r\n  height: 120px;\r\n  margin-top: 30px;\r\n  transition: all 0.5s;\r\n}\r\n.add,\r\n.buy,\r\n.del {\r\n  position: absolute;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: #fff;\r\n  height: 25px;\r\n  width: 80px;\r\n  line-height: 25px;\r\n  text-align: center;\r\n  font-size: 13px;\r\n  display: none;\r\n  cursor: pointer;\r\n}\r\n.add {\r\n  bottom: 0;\r\n  left: 0;\r\n}\r\n.buy {\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n.del {\r\n  top: 0;\r\n  right: 0;\r\n  width: 25px;\r\n}\r\n.imgbox:hover .add,\r\n.imgbox:hover .buy,\r\n.imgbox:hover .del {\r\n  display: block;\r\n}\r\n.imgbox:hover img {\r\n  transform: scale(1.1);\r\n}\r\n\r\n.p-name {\r\n  font-weight: 400;\r\n  text-align: center;\r\n}\r\n.p-time {\r\n  font-size: 13px;\r\n  padding-left: 10px;\r\n}\r\n.p-price {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.price1,\r\n.price2 {\r\n  font-weight: 700;\r\n}\r\n.price1 {\r\n  color: #ff4400;\r\n  font-size: 14px;\r\n}\r\n.price2 {\r\n  color: #9c9c9c;\r\n  font-size: 13px;\r\n  text-decoration: line-through;\r\n  margin-left: 5px;\r\n}\r\n</style>"]}]}