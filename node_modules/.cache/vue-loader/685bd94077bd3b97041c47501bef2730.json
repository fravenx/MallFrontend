{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/ShopRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/ShopRegister.vue","mtime":1677682822548},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi91dGlscy9yZXF1ZXN0Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmb3JtOiB7fSwNCiAgICAgIGNoZWNrZWQ6IGZhbHNlLA0KICAgICAgdGltZXI6IG51bGwNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB0b0hvbWUoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2hvbWUnKQ0KICAgIH0sDQogICAgd2Fybihtc2cpIHsNCiAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICBtZXNzYWdlOiBtc2csDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJywNCiAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgIH0pDQogICAgfSwNCiAgICByZWdpc3RlcigpIHsNCiAgICAgIGxldCBzaG9wID0gdGhpcy5mb3JtDQogICAgICBpZiAodHlwZW9mIHNob3AudGVsZXBob25lID09ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHRoaXMud2Fybign6K+35aGr5YaZ5omL5py65Y+3IScpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHR5cGVvZiBzaG9wLnVzZXJuYW1lID09ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHRoaXMud2Fybign55So5oi35ZCN5LiN6IO95Li656m6IScpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHR5cGVvZiBzaG9wLnJlYWxOYW1lID09ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHRoaXMud2Fybign6K+35aGr5YaZ55yf5a6e5aeT5ZCNIScpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHR5cGVvZiBzaG9wLnNob3BOYW1lID09ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHRoaXMud2Fybign6K+35aGr5YaZ5bqX6ZO65ZCN56ewIScpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHR5cGVvZiBzaG9wLnBhc3N3b3JkID09ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHRoaXMud2Fybign6K+36K6+572u5a+G56CBIScpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKCEvXlthLXpBLVowLTlfXXs0LDE2fSQvLnRlc3Qoc2hvcC51c2VybmFtZSkpIHsNCiAgICAgICAgdGhpcy53YXJuKCfnlKjmiLflkI00LTE25L2NLCDkuJTlj6rog73ljIXlkKvlrZfmr43jgIHmlbDlrZfjgIHkuIvliJLnur8hJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBpZiAoIS9eW1x1NGUwMC1cdTlmYTVdezIsNn0kLy50ZXN0KHNob3AucmVhbE5hbWUpKSB7DQogICAgICAgIHRoaXMud2Fybign5aeT5ZCN5qC85byP6ZSZ6K+vJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBpZiAoIXRoaXMuY2hlY2tlZCkgew0KICAgICAgICB0aGlzLndhcm4oJ+ivt+WFiOWLvumAieWQjOaEj+WNj+iuriEnKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHJlcXVlc3QNCiAgICAgICAgLnBvc3QoJy91c2VyL3Nob3AvcmVnaXN0ZXInLCBzaG9wKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsNCiAgICAgICAgICAgIHJlcXVlc3QucG9zdCgnL3Nob3AnLCBzaG9wKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpDQogICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpDQogICAgICAgICAgICAgICAgfSwgMTAwMCkNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfms6jlhozlpLHotKXvvIHplJnor6/ljp/lm6DvvJrmnI3liqHlmajplJnor68hJykNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09PSAnMScpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+eZu+W9leWksei0pe+8gemUmeivr+WOn+WboO+8micgKyByZXMubXNnKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfms6jlhozlpLHotKXvvIHplJnor6/ljp/lm6DvvJrmnI3liqHlmajplJnor68hJykNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["ShopRegister.vue"],"names":[],"mappings":";AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShopRegister.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <header class=\"hd\">\r\n      <img\r\n        src=\"../assets/upload/logo.svg\"\r\n        width=\"30px\"\r\n        style=\"margin-left: 10px\"\r\n        alt=\"\"\r\n      />\r\n      <h3 class=\"hd-item\">\r\n        <a href=\"javascript:;\" @click=\"toHome\"> 在线商城 </a>\r\n      </h3>\r\n      <div class=\"bb\"></div>\r\n      <h3 class=\"hd-item h2\">欢迎注册成为商家</h3>\r\n    </header>\r\n    <div class=\"bd\">\r\n      <h3 class=\"bd-hd\">店家账号注册</h3>\r\n      <el-row type=\"flex\">\r\n        <el-col :span=\"8\" :push=\"8\">\r\n          <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n            <el-form-item label=\"手机号\">\r\n              <el-input\r\n                v-model=\"form.telephone\"\r\n                placeholder=\"请输入手机号\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"用户名\">\r\n              <el-input\r\n                v-model=\"form.username\"\r\n                placeholder=\"请输入用户名\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"真实姓名\">\r\n              <el-input\r\n                v-model=\"form.realName\"\r\n                placeholder=\"请输入姓名\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"店铺名称\">\r\n              <el-input\r\n                v-model=\"form.shopName\"\r\n                placeholder=\"请输入店铺名称\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"设置密码\">\r\n              <el-input\r\n                v-model=\"form.password\"\r\n                type=\"password\"\r\n                auto-complete=\"new-password\"\r\n                placeholder=\"请输入密码\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-col>\r\n      </el-row>\r\n      <div style=\"text-align: center\">\r\n        <el-checkbox v-model=\"checked\">我已阅读并同意 </el-checkbox>\r\n        <el-link type=\"primary\"> 《在线商城店家注册协议》 </el-link>\r\n      </div>\r\n      <div style=\"text-align: center; margin-top: 20px\">\r\n        <el-button type=\"success\" @click=\"register\">注册账号并开店</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '../utils/request'\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {},\r\n      checked: false,\r\n      timer: null\r\n    }\r\n  },\r\n  methods: {\r\n    toHome() {\r\n      this.$router.push('/home')\r\n    },\r\n    warn(msg) {\r\n      this.$message({\r\n        message: msg,\r\n        type: 'warning',\r\n        duration: 2000\r\n      })\r\n    },\r\n    register() {\r\n      let shop = this.form\r\n      if (typeof shop.telephone == 'undefined') {\r\n        this.warn('请填写手机号!')\r\n        return\r\n      }\r\n      if (typeof shop.username == 'undefined') {\r\n        this.warn('用户名不能为空!')\r\n        return\r\n      }\r\n      if (typeof shop.realName == 'undefined') {\r\n        this.warn('请填写真实姓名!')\r\n        return\r\n      }\r\n      if (typeof shop.shopName == 'undefined') {\r\n        this.warn('请填写店铺名称!')\r\n        return\r\n      }\r\n      if (typeof shop.password == 'undefined') {\r\n        this.warn('请设置密码!')\r\n        return\r\n      }\r\n      if (!/^[a-zA-Z0-9_]{4,16}$/.test(shop.username)) {\r\n        this.warn('用户名4-16位, 且只能包含字母、数字、下划线!')\r\n        return\r\n      }\r\n      if (!/^[\\u4e00-\\u9fa5]{2,6}$/.test(shop.realName)) {\r\n        this.warn('姓名格式错误')\r\n        return\r\n      }\r\n      if (!this.checked) {\r\n        this.warn('请先勾选同意协议!')\r\n        return\r\n      }\r\n      request\r\n        .post('/user/shop/register', shop)\r\n        .then((res) => {\r\n          if (res.code === '0') {\r\n            request.post('/shop', shop).then((res) => {\r\n              if (res.code === '0') {\r\n                this.$message({\r\n                  message: res.msg,\r\n                  type: 'success',\r\n                  duration: 1000\r\n                })\r\n                clearTimeout(this.timer)\r\n                this.timer = setTimeout(() => {\r\n                  this.$router.push('/login')\r\n                }, 1000)\r\n              } else {\r\n                this.$message.error('注册失败！错误原因：服务器错误!')\r\n              }\r\n            })\r\n          } else if (res.code === '1') {\r\n            this.$message.error('登录失败！错误原因：' + res.msg)\r\n          } else {\r\n            this.$message.error('注册失败！错误原因：服务器错误!')\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.hd {\r\n  height: 50px;\r\n  line-height: 50px;\r\n  box-shadow: 0 1px 1px 1px rgba(204, 204, 204, 0.5);\r\n  display: flex;\r\n}\r\n\r\n.hd-item {\r\n  width: 100px;\r\n  text-align: center;\r\n  color: #262626;\r\n}\r\n.bb {\r\n  height: 20px;\r\n  width: 1px;\r\n  background-color: #bfbfbf;\r\n  position: relative;\r\n  top: 15px;\r\n}\r\n.bd {\r\n  width: 90%;\r\n  margin-left: 50%;\r\n  transform: translate(-50%);\r\n  margin-top: 20px;\r\n  height: 500px;\r\n  margin-bottom: 50px;\r\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\r\n  padding: 20px;\r\n}\r\n.h2 {\r\n  width: 180px;\r\n}\r\n.bd-hd {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  color: #520000;\r\n  font-weight: 400;\r\n  border-bottom: 1px solid #ccc;\r\n  margin-bottom: 20px;\r\n}\r\n</style>"]}]}