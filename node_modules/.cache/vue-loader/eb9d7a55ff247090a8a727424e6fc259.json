{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/Discount.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/home/components/Discount.vue","mtime":1677682822549},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnDQppbXBvcnQgeyBnZXREaXNjb3VudFByb2R1Y3QgfWZyb20gJ0AvYXBpL3Byb2R1Y3QuanMnDQpjb25zdCBEaXNjb3VudEl0ZW0gPSAoKSA9PiBpbXBvcnQoJy4vRGlzY291bnRJdGVtLnZ1ZScpDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlucHV0VGltZTogK25ldyBEYXRlKCcyMDIxLTEyLTI0IDIzOjAwOjAwJyksDQogICAgICBob3VyOiAnJywNCiAgICAgIG1pbnV0ZTogJycsDQogICAgICBzZWNvbmQ6ICcnLA0KICAgICAgdGltZXI6IG51bGwsDQogICAgICBwcm9kdWN0czogWw0KDQogICAgICBdDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGdldERpc2NvdW50UHJvZHVjdCgpLnRoZW4ocmVzPT57DQogICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICB0aGlzLnByb2R1Y3RzLnB1c2goLi4ucmVzKQ0KICAgIH0pDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy/osIPnlKjlrprml7blmagNCiAgICByZXF1ZXN0LmdldCgnL2NvdW50ZG93bicpLnRoZW4oKHJlcykgPT4gew0KICAgICAgbGV0IHMgPSByZXMuZGF0YQ0KICAgICAgbGV0IGEgPSBzLnNsaWNlKDAsIDExKQ0KICAgICAgbGV0IGIgPSBzLnNsaWNlKDEzKQ0KICAgICAgbGV0IG0gPSBzLnNsaWNlKDExLCAxMykNCiAgICAgIG0gPSAoTnVtYmVyKG0pICsgOCkgJSAyNA0KICAgICAgbSA9IG0gPCAxMCA/ICcwJyArIG0gOiBtDQogICAgICBsZXQgdCA9IGEgKyBtICsgYg0KICAgICAgdGhpcy5pbnB1dFRpbWUgPSArbmV3IERhdGUodCkNCiAgICB9KQ0KICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICB0aGlzLmNvdW50RG93bigpDQogICAgfSwgMTAwMCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGNvdW50RG93bigpIHsNCiAgICAgIC8vIOi/lOWbnueahOaYr+W9k+WJjeaXtumXtOaAu+eahOavq+enkuaVsA0KICAgICAgdmFyIG5vd1RpbWUgPSArbmV3IERhdGUoKQ0KICAgICAgLy8gdGltZXPmmK/liankvZnml7bpl7TmgLvnmoTnp5LmlbANCiAgICAgIHZhciB0aW1lcyA9ICh0aGlzLmlucHV0VGltZSAtIG5vd1RpbWUpIC8gMTAwMA0KICAgICAgdmFyIGggPSBwYXJzZUludCgodGltZXMgLyA2MCAvIDYwKSAlIDI0KQ0KICAgICAgaCA9IGggPCAxMCA/ICcwJyArIGggOiBoDQogICAgICAvLyDmiorliankvZnnmoTlsI/ml7bnu5kg5bCP5pe26buR6Imy55uS5a2QDQogICAgICB0aGlzLmhvdXIgPSBoDQogICAgICB2YXIgbSA9IHBhcnNlSW50KCh0aW1lcyAvIDYwKSAlIDYwKQ0KICAgICAgbSA9IG0gPCAxMCA/ICcwJyArIG0gOiBtDQogICAgICB0aGlzLm1pbnV0ZSA9IG0NCiAgICAgIHZhciBzID0gcGFyc2VJbnQodGltZXMgJSA2MCkNCiAgICAgIHMgPSBzIDwgMTAgPyAnMCcgKyBzIDogcw0KICAgICAgdGhpcy5zZWNvbmQgPSBzDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgRGlzY291bnRJdGVtDQogIH0NCn0NCg=="},{"version":3,"sources":["Discount.vue"],"names":[],"mappings":";AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Discount.vue","sourceRoot":"src/views/home/components","sourcesContent":["<template>\r\n  <div>\r\n    <h3 class=\"header\">限时折扣</h3>\r\n    <el-row type=\"flex\" class=\"discount-bd\">\r\n      <el-col :span=\"4\" class=\"seckill\">\r\n        <h3>限时秒杀</h3>\r\n        <img src=\"../../../assets/upload/seckill.png\" alt=\"\" />\r\n        <p>距离本场结束还剩</p>\r\n        <div class=\"time\">\r\n          <div>{{ hour }}</div>\r\n          <div>{{ minute }}</div>\r\n          <div>{{ second }}</div>\r\n        </div>\r\n      </el-col>\r\n      <el-col :span=\"4\" v-for=\"product in products\" :key=\"product.productId\">\r\n        <DiscountItem :cProduct=\"product\" />\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request'\r\nimport { getDiscountProduct }from '@/api/product.js'\r\nconst DiscountItem = () => import('./DiscountItem.vue')\r\nexport default {\r\n  data() {\r\n    return {\r\n      inputTime: +new Date('2021-12-24 23:00:00'),\r\n      hour: '',\r\n      minute: '',\r\n      second: '',\r\n      timer: null,\r\n      products: [\r\n\r\n      ]\r\n    }\r\n  },\r\n  mounted() {\r\n    getDiscountProduct().then(res=>{\r\n      console.log(res)\r\n      this.products.push(...res)\r\n    })\r\n  },\r\n  created() {\r\n    //调用定时器\r\n    request.get('/countdown').then((res) => {\r\n      let s = res.data\r\n      let a = s.slice(0, 11)\r\n      let b = s.slice(13)\r\n      let m = s.slice(11, 13)\r\n      m = (Number(m) + 8) % 24\r\n      m = m < 10 ? '0' + m : m\r\n      let t = a + m + b\r\n      this.inputTime = +new Date(t)\r\n    })\r\n    this.timer = setInterval(() => {\r\n      this.countDown()\r\n    }, 1000)\r\n  },\r\n  methods: {\r\n    countDown() {\r\n      // 返回的是当前时间总的毫秒数\r\n      var nowTime = +new Date()\r\n      // times是剩余时间总的秒数\r\n      var times = (this.inputTime - nowTime) / 1000\r\n      var h = parseInt((times / 60 / 60) % 24)\r\n      h = h < 10 ? '0' + h : h\r\n      // 把剩余的小时给 小时黑色盒子\r\n      this.hour = h\r\n      var m = parseInt((times / 60) % 60)\r\n      m = m < 10 ? '0' + m : m\r\n      this.minute = m\r\n      var s = parseInt(times % 60)\r\n      s = s < 10 ? '0' + s : s\r\n      this.second = s\r\n    }\r\n  },\r\n  components: {\r\n    DiscountItem\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.discount-bd {\r\n  box-shadow: rgba(17, 17, 26, 0.1) 0px 4px 16px,\r\n    rgba(17, 17, 26, 0.05) 0px 8px 32px;\r\n  height: 240px;\r\n}\r\n.header {\r\n  font-weight: 400;\r\n  height: 60px;\r\n  line-height: 80px;\r\n  color: 333;\r\n}\r\n.seckill {\r\n  height: 240px;\r\n  padding-top: 25px;\r\n  text-align: center;\r\n  background-color: #f02b2b;\r\n}\r\n.seckill img {\r\n  margin-top: 20px;\r\n  width: 30px;\r\n}\r\n.seckill h3 {\r\n  font-weight: 400;\r\n  color: #fff;\r\n  font-size: 25px;\r\n  margin-top: 10px;\r\n}\r\n.seckill p {\r\n  font-size: 10px;\r\n  color: #fff;\r\n  margin-top: 10px;\r\n}\r\n.time {\r\n  display: flex;\r\n  margin-left: 50%;\r\n  transform: translate(-50%);\r\n  margin-top: 5px;\r\n  width: 100px;\r\n}\r\n.time div {\r\n  height: 30px;\r\n  width: 30px;\r\n  margin-left: 3px;\r\n  background-color: #000;\r\n  color: #fff;\r\n  font-weight: 700;\r\n  text-align: center;\r\n  line-height: 30px;\r\n}\r\n.time::after {\r\n  display: block;\r\n  content: '';\r\n  width: 100px;\r\n  height: 1px;\r\n  background-color: #f02b2b;\r\n  position: absolute;\r\n  top: 15px;\r\n}\r\n</style>"]}]}