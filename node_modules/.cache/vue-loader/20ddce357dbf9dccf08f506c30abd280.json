{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/ProductList/ProductList.vue?vue&type=style&index=0&id=ff4a8b3e&scoped=true&lang=css&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/views/ProductList/ProductList.vue","mtime":1678955284186},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouY29udGFpbmVyIHsNCiAgd2lkdGg6IDgwJTsNCiAgbWFyZ2luLWxlZnQ6IDUwJTsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSk7DQogIG1hcmdpbi1ib3R0b206IDQwcHg7DQogIG1hcmdpbi10b3A6IDMwcHg7DQp9DQouYWN0aXZlIHsNCiAgY29sb3I6IGRvZGdlcmJsdWU7DQp9DQoudGVzdCB7DQogIGhlaWdodDogMjAwcHg7DQogIHdpZHRoOiAyMDBweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogcGluazsNCn0NCi5oZWFkZXIgew0KICBoZWlnaHQ6IDUwcHg7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDIwNCwgMjA0LCAyMDQsIDAuNSk7DQp9DQoubmF2LWl0ZW0gew0KICBjb2xvcjogIzhmOGY5NjsNCiAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCn0NCi5uYXYtaXRlbTpob3ZlciB7DQogIGNvbG9yOiAjZmYxNDNjOw0KfQ0KLm9yZGVyLWJ0biB7DQogIGhlaWdodDogMjBweDsNCiAgd2lkdGg6IDQwcHg7DQogIGxpbmUtaGVpZ2h0OiAwOw0KICBwYWRkaW5nLWxlZnQ6IDhweDsNCiAgbWFyZ2luLWxlZnQ6IDVweDsNCn0NCg=="},{"version":3,"sources":["ProductList.vue"],"names":[],"mappings":";AAqRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductList.vue","sourceRoot":"src/views/ProductList","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <el-row type=\"flex\" class=\"header\">\r\n      <el-col :span=\"13\" style=\"line-height: 50px\">\r\n        <span class=\"nav-item\"\r\n          ><a @click=\"showAll\" :class=\"{ active: isActive === 1 }\"\r\n            >所有商品</a\r\n          ></span\r\n        >\r\n\r\n        <span class=\"nav-item\"\r\n          ><a @click=\"showNew\" :class=\"{ active: isActive === 2 }\"\r\n            >最新上架</a\r\n          ></span\r\n        >\r\n\r\n        <span class=\"nav-item\"\r\n        ><a @click=\"showHot\" :class=\"{ active: isActive === 3 }\"\r\n          >热销</a\r\n        ></span\r\n        >\r\n\r\n      </el-col>\r\n      <el-col flex=\"1\" style=\"line-height: 50px\"></el-col>\r\n      <el-col :span=\"10\" style=\"line-height: 50px\">\r\n        <span>排序方式：</span>\r\n        <el-dropdown>\r\n          <span class=\"el-dropdown-link\" style=\"cursor: pointer\">\r\n            {{ order }}\r\n            <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n          </span>\r\n          <el-dropdown-menu slot=\"dropdown\">\r\n            <a\r\n              href=\"javascript:;\"\r\n              @click=\"change('上架时间', 0)\"\r\n              style=\"text-decoration: none; color: #333\"\r\n            >\r\n              <el-dropdown-item>上架时间</el-dropdown-item>\r\n            </a>\r\n            <a\r\n              href=\"javascript:;\"\r\n              @click=\"change('价格', 1)\"\r\n              style=\"text-decoration: none; color: #333\"\r\n            >\r\n              <el-dropdown-item>价格</el-dropdown-item>\r\n            </a>\r\n            <a\r\n              href=\"javascript:;\"\r\n              @click=\"change('已售量', 2)\"\r\n              style=\"text-decoration: none; color: #333\"\r\n            >\r\n              <el-dropdown-item>已售量</el-dropdown-item>\r\n            </a>\r\n            <a\r\n              href=\"javascript:;\"\r\n              @click=\"change('评价数', 3)\"\r\n              style=\"text-decoration: none; color: #333\"\r\n            >\r\n              <el-dropdown-item>评价数</el-dropdown-item>\r\n            </a>\r\n          </el-dropdown-menu>\r\n        </el-dropdown>\r\n        <el-button size=\"small\" class=\"order-btn\" @click=\"reverse\">{{\r\n          rev\r\n        }}</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-container>\r\n    <el-aside width=\"100px\">\r\n    <div>\r\n      <el-row>\r\n        <span class=\"nav-item\">\r\n          <a>商品分类 </a></span>\r\n      </el-row>\r\n      <el-row class=\"classify-container\">\r\n        <el-tabs\r\n            :tab-position=\"tabPosition\"\r\n            :lazy=\"true\"\r\n            @tab-click=\"getProductById\"\r\n        >\r\n          <el-tab-pane\r\n              v-for=\"category in categories\"\r\n              :key=\"category.categoryId\"\r\n              :label=\"category.categoryName\"\r\n              class=\"tab-pane\"\r\n          >\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-row>\r\n    </div>\r\n    </el-aside>\r\n\r\n    <el-container>\r\n      <el-main>\r\n    <el-row style=\"display: flex; flex-wrap: wrap; justify-content: flex-start\">\r\n      <div v-for=\"(item, index) in products\" :key=\"index\">\r\n        <ProductItem :product=\"item\" :key=\"componentKey\" />\r\n      </div>\r\n    </el-row>\r\n      </el-main>\r\n\r\n      <el-footer>\r\n      <div class=\"block\" align=\"center\">\r\n        <el-pagination\r\n            v-if=\"showpage\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :page-sizes=\"[12, 8, 4]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n\r\n      </el-footer>\r\n\r\n\r\n    </el-container>\r\n    </el-container>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../utils/request'\r\nimport Category from \"../home/components/category/Category\";\r\nconst ProductItem = () => import('./ProductItem.vue')\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showpage: true,\r\n      componentKey: 0,\r\n      order: '上架时间',\r\n      orderNum: 0,\r\n      rev: '升序',\r\n      products: [],\r\n      tempProducts: [],\r\n      isActive: 4,\r\n      tabPosition: 'left',\r\n      closable: false,\r\n      currentDate: new Date(),\r\n      categories: [],\r\n      pageSize: 12,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      queryCategoryId: 0,\r\n      total: 0\r\n    }\r\n  },\r\n  created() {\r\n    request\r\n        .get('/category/all')\r\n        .then((res) => {\r\n          this.categories.push(...res)\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    this.load()\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNum = val;\r\n      this.load()\r\n    },\r\n    getProductById(tab) {\r\n      // 根据商品类 category id 请求此类所有商品数据\r\n      this.isActive = 4\r\n      this.queryCategoryId = this.categories[Number(tab.index)].categoryId\r\n      this.pageNum = 1\r\n      // 清空原来的元素\r\n      this.products = []\r\n      this.load()\r\n    },\r\n\r\n    load() {\r\n        this.showpage = true;\r\n        request\r\n            .get('/category/page/' + this.queryCategoryId,{\r\n              params: {\r\n                pageNum: this.pageNum,\r\n                pageSize: this.pageSize\r\n              }\r\n            })\r\n            .then((res) => {\r\n              this.products = []\r\n              this.total = res.data.total\r\n              this.products.push(...res.data.data)\r\n              this.sortBy()\r\n            })\r\n            .catch(err => {\r\n              console.log(err)\r\n            })\r\n    },\r\n    showAll() {\r\n      this.queryCategoryId = 0\r\n      this.load()\r\n      this.isActive = 1\r\n    },\r\n    showNew() {\r\n      this.showpage = false;\r\n\r\n      // 最新上架是指时间早于或等于 2021-12-10的时间\r\n      this.isActive = 2\r\n      request\r\n        .get('product/new')\r\n        .then((res) => {\r\n          this.products = []\r\n          res.forEach((e) => {\r\n            this.products.push(e)\r\n          })\r\n        })\r\n        .catch((err) => {})\r\n    },\r\n    showHot() {\r\n      this.showpage = false;\r\n\r\n      // 热销是指售货量大于或等于 500 的商品\r\n      this.isActive = 3\r\n      request\r\n        .get('product/hot')\r\n        .then((res) => {\r\n          this.products = []\r\n          res.forEach((e) => {\r\n            this.products.push(e)\r\n          })\r\n        })\r\n        .catch((err) => {})\r\n    },\r\n    change(s, num) {\r\n      this.order = s\r\n      this.orderNum = num\r\n      this.sortBy()\r\n    },\r\n    reverse() {\r\n      this.rev = this.rev == '升序' ? '逆序' : '升序'\r\n      this.sortBy()\r\n    },\r\n    forceRerender() {\r\n      this.componentKey += 1\r\n    },\r\n    cmp(c1, c2) {\r\n      // 按照时间排序\r\n      if (this.orderNum == 0) {\r\n        return this.rev == '升序'\r\n          ? new Date(c1.createTime) - new Date(c2.createTime)\r\n          : new Date(c2.createTime) - new Date(c1.createTime)\r\n      }\r\n      // 按照价格排序\r\n      else if (this.orderNum == 1) {\r\n        return this.rev == '升序'\r\n          ? c1.productPrice - c2.productPrice\r\n          : c2.productPrice - c1.productPrice\r\n        // 按照售货量时间\r\n      } else if (this.orderNum == 2) {\r\n        return this.rev == '升序' ? c1.sold - c2.sold : c2.sold - c1.sold\r\n      }\r\n    },\r\n    sortBy() {\r\n      this.products.sort(this.cmp)\r\n      this.forceRerender()\r\n    }\r\n  },\r\n  components: {\r\n    ProductItem,\r\n    Category\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  width: 80%;\r\n  margin-left: 50%;\r\n  transform: translate(-50%);\r\n  margin-bottom: 40px;\r\n  margin-top: 30px;\r\n}\r\n.active {\r\n  color: dodgerblue;\r\n}\r\n.test {\r\n  height: 200px;\r\n  width: 200px;\r\n  background-color: pink;\r\n}\r\n.header {\r\n  height: 50px;\r\n  border-bottom: 1px solid rgba(204, 204, 204, 0.5);\r\n}\r\n.nav-item {\r\n  color: #8f8f96;\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n}\r\n.nav-item:hover {\r\n  color: #ff143c;\r\n}\r\n.order-btn {\r\n  height: 20px;\r\n  width: 40px;\r\n  line-height: 0;\r\n  padding-left: 8px;\r\n  margin-left: 5px;\r\n}\r\n</style>"]}]}