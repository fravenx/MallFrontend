{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/admin/users/AllUsers.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/admin/users/AllUsers.vue","mtime":1677682822546},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi8uLi8uLi91dGlscy9yZXF1ZXN0Jw0KY29uc3QgU3ViSGVhZGVyID0gKCkgPT4gaW1wb3J0KCcuLi8uLi9jb21wb25lbnRzL1N1YkhlYWRlci52dWUnKQ0KY29uc3QgQ29udGFpbmVyID0gKCkgPT4gaW1wb3J0KCcuLi8uLi9jb21wb25lbnRzL0NvbnRhaW5lci52dWUnKQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdIb21lJywNCiAgY29tcG9uZW50czogew0KICAgIFN1YkhlYWRlciwNCiAgICBDb250YWluZXINCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZm9ybToge30sDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsDQogICAgICAvLyBwYWdlU2l6ZeaYr+ihqOekuuS4gOmhteacgOWkmuWPr+S7peijheWHoOadoeaVsOaNrg0KICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgLy8g6KGo56S66K+35rGC56ys5Yeg6aG15pWw5o2uDQogICAgICBwYWdlTnVtOiAxLA0KICAgICAgLy8g5p+l6K+i5YWz6ZSu5a2XDQogICAgICBrZXk6ICcnLA0KICAgICAgLy8g5oC75YWx5Yeg5p2h5pWw5o2uDQogICAgICB0b3RhbDogMTAwLA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIGlzQWRkOiB0cnVlDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g5Y+R6YCB6K+35rGCLOiuvue9rueUqOaIt+eKtuaAgQ0KICAgIHNldFN0YXR1cyhzdGF0dXMsIHVJZCkgew0KICAgICAgcmVxdWVzdA0KICAgICAgICAucGF0Y2goJy91c2VyLycgKyB1SWQgKyAnLycgKyBzdGF0dXMpDQogICAgICAgIC50aGVuKHJlcyA9PiB7fSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgY2xlYXJGaWx0ZXIoKSB7DQogICAgICB0aGlzLiRyZWZzLmZpbHRlclRhYmxlLmNsZWFyRmlsdGVyKCkNCiAgICB9LA0KICAgIGZvcm1hdHRlcihyb3csIGNvbHVtbikgew0KICAgICAgcmV0dXJuIHJvdy5hZGRyZXNzDQogICAgfSwNCiAgICBmaWx0ZXJUYWcodmFsdWUsIHJvdykgew0KICAgICAgcmV0dXJuIHJvdy5yb2xlID09PSB2YWx1ZQ0KICAgIH0sDQogICAgZmlsdGVySGFuZGxlcih2YWx1ZSwgcm93LCBjb2x1bW4pIHsNCiAgICAgIGNvbnN0IHByb3BlcnR5ID0gY29sdW1uWydwcm9wZXJ0eSddDQogICAgICByZXR1cm4gcm93W3Byb3BlcnR5XSA9PT0gdmFsdWUNCiAgICB9LA0KICAgIC8vIOWIt+aWsOihqOagvA0KICAgIHJlZnJlc2hUYWJsZSgpIHsNCiAgICAgIHRoaXMubG9hZCgpDQogICAgfSwNCiAgICAvLyDliKDpmaQNCiAgICBkZWxldGVSb3coaW5kZXgsIHJvdykgew0KICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5Yig6Zmk6K+l55So5oi35ZCXPycsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIGxldCBkZWxldGVJZCA9IHJvdy51c2VySWQNCiAgICAgICAgICByZXF1ZXN0LmRlbGV0ZSgnL3VzZXIvJyArIGRlbGV0ZUlkKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5Yqf77yBJywNCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgdGhpcy5sb2FkKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcNCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgLy8g57yW6L6RDQogICAgaGFuZGxlRWRpdChyb3cpIHsNCiAgICAgIHRoaXMuaXNBZGQgPSBmYWxzZQ0KICAgICAgdGhpcy5mb3JtID0gcm93DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgc2VhcmNoKCkgew0KICAgICAgdGhpcy5sb2FkKCkNCiAgICB9LA0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsDQogICAgICB0aGlzLmxvYWQoKQ0KICAgIH0sDQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKGDlvZPliY3pobU6ICR7dmFsfWApDQogICAgICB0aGlzLnBhZ2VOdW0gPSB2YWwNCiAgICAgIHRoaXMubG9hZCgpDQogICAgfSwNCiAgICAvLyDliqDovb3ooajmoLzmlbDmja4NCiAgICBsb2FkKCkgew0KICAgICAgcmVxdWVzdA0KICAgICAgICAuZ2V0KCcvdXNlcicsIHsNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwNCiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLA0KICAgICAgICAgICAga2V5OiB0aGlzLmtleQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gJzAnKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywNCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbA0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbXQ0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpDQogICAgICAgICAgICByZXM/LmRhdGE/LmRhdGE/LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgIGl0ZW0uaW5kZXggPSBpbmRleCArIDENCiAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEucHVzaChpdGVtKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgfSwNCiAgICBhZGRVc2VyKCkgew0KICAgICAgdGhpcy5pc0FkZCA9IHRydWUNCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlDQogICAgICB0aGlzLmZvcm0gPSB7fQ0KICAgIH0sDQogICAgc2F2ZSgpIHsNCiAgICAgIGlmICh0aGlzLmZvcm0udXNlcklkKSB7DQogICAgICAgIHJlcXVlc3QNCiAgICAgICAgICAucG9zdCgndXNlci9hY2NvdW50JywgdGhpcy5mb3JtKQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgew0KICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnlpLHotKXvvIzor7fogZTns7vnrqHnkIblkZjvvIEnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdmYWlsZWQnDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIC8vIOWIt+aWsOihqOagvOaVsOaNrg0KICAgICAgICAgICAgdGhpcy5sb2FkKCkNCiAgICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g5re75Yqg5paw55So5oi3DQogICAgICAgIHJlcXVlc3QNCiAgICAgICAgICAucG9zdCgnL3VzZXIvYWRkJywgdGhpcy5mb3JtKQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgew0KICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgdGhpcy5sb2FkKCkNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywNCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDANCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlcnIgPT4ge30pDQogICAgICB9DQogICAgfSwNCiAgICByZXNldFBhc3N3b3JkKHVzZXIpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruWumuimgemHjee9ruivpeeUqOaIt+WvhueggT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICBsZXQgdUlkID0gdXNlci51c2VySWQNCiAgICAgICAgICByZXF1ZXN0LnBhdGNoKCcvdXNlci9yZXNldC8nICsgdUlkKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raIJw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMubG9hZCgpDQogIH0NCn0NCg=="},{"version":3,"sources":["AllUsers.vue"],"names":[],"mappings":";AA6IA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AllUsers.vue","sourceRoot":"src/pages/admin/users","sourcesContent":["<template>\r\n  <Container>\r\n    <template slot>\r\n      <SubHeader>\r\n        <template v-slot>管理所有用户</template>\r\n      </SubHeader>\r\n      <el-button type=\"primary\" @click=\"addUser\">新增用户</el-button>\r\n      <el-button type=\"primary\" @click=\"refreshTable\">刷新</el-button>\r\n      <el-form @submit.native.prevent>\r\n        <el-input\r\n          v-model=\"key\"\r\n          placeholder=\"请输入内容\"\r\n          style=\"margin-top: 10px; width: 250px\"\r\n          clearable\r\n        ></el-input>\r\n        <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"search\">查询</el-button>\r\n      </el-form>\r\n      <el-table :data=\"tableData\" style=\"margin-top: 10px\" border stripe>\r\n        <el-table-column\r\n          prop=\"index\"\r\n          label=\"序号\"\r\n          style=\"height: 30px\"\r\n          width=\"70px\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"用户名\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"realName\" label=\"真实姓名\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"telephone\" label=\"联系电话\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"age\" label=\"年龄\" sortable align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"sex\" label=\"性别\" align=\"center\"></el-table-column>\r\n        <el-table-column\r\n          prop=\"role\"\r\n          label=\"权限角色\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          :filters=\"[\r\n            { text: '管理员', value: 'admin' },\r\n            { text: '商家', value: 'shop' },\r\n            { text: '客户', value: 'user' }\r\n          ]\"\r\n          :filter-method=\"filterTag\"\r\n          filter-placement=\"bottom-end\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-tag\r\n              :type=\"\r\n                scope.row.role === 'admin'\r\n                  ? 'primary'\r\n                  : scope.row.role === 'shop'\r\n                  ? 'warning'\r\n                  : 'success'\r\n              \"\r\n              disable-transitions\r\n            >\r\n              {{\r\n                scope.row.role === 'admin' ? '管理员' : scope.row.role === 'shop' ? '商家' : '客户'\r\n              }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"status\" label=\"账号状态\" width=\"100px\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.status\"\r\n              :active-value=\"1\"\r\n              :inactive-value=\"0\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              @change=\"setStatus($event, scope.row.userId)\"\r\n            ></el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" fixed=\"right\" label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              @click=\"handleEdit(scope.row)\"\r\n              size=\"mini\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              circle\r\n            ></el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              circle\r\n              size=\"mini\"\r\n              @click.native.prevent=\"deleteRow(scope.$index, scope.row)\"\r\n            ></el-button>\r\n            <el-tooltip content=\"重置该用户密码\" placement=\"top\" effect=\"dark\">\r\n              <el-button\r\n                type=\"warning\"\r\n                size=\"mini\"\r\n                circle=\"\"\r\n                @click.native.prevent=\"resetPassword(scope.row)\"\r\n              >\r\n                <i class=\"fas fa-shield-alt\"></i>\r\n              </el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-sizes=\"[5, 10, 100]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        style=\"margin-top: 10px\"\r\n      ></el-pagination>\r\n\r\n      <!-- 添加信息弹出 -->\r\n      <el-dialog title=\"填入个人信息\" :visible.sync=\"dialogFormVisible\" width=\"50%\">\r\n        <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\r\n          <el-form-item label=\"用户名\" style=\"margin-bottom: 7px\" v-if=\"isAdd\">\r\n            <el-input v-model=\"form.username\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"真实姓名\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.realName\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系电话\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.telephone\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"权限角色\" style=\"margin-bottom: 7px\">\r\n            <el-radio-group v-model=\"form.role\">\r\n              <el-radio label=\"admin\">管理员</el-radio>\r\n              <el-radio label=\"shop\">商家</el-radio>\r\n              <el-radio label=\"user\">客户</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </template>\r\n  </Container>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../utils/request'\r\nconst SubHeader = () => import('../../components/SubHeader.vue')\r\nconst Container = () => import('../../components/Container.vue')\r\n\r\nexport default {\r\n  name: 'Home',\r\n  components: {\r\n    SubHeader,\r\n    Container\r\n  },\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      // pageSize是表示一页最多可以装几条数据\r\n      pageSize: 10,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      // 查询关键字\r\n      key: '',\r\n      // 总共几条数据\r\n      total: 100,\r\n      tableData: [],\r\n      isAdd: true\r\n    }\r\n  },\r\n  methods: {\r\n    // 发送请求,设置用户状态\r\n    setStatus(status, uId) {\r\n      request\r\n        .patch('/user/' + uId + '/' + status)\r\n        .then(res => {})\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    clearFilter() {\r\n      this.$refs.filterTable.clearFilter()\r\n    },\r\n    formatter(row, column) {\r\n      return row.address\r\n    },\r\n    filterTag(value, row) {\r\n      return row.role === value\r\n    },\r\n    filterHandler(value, row, column) {\r\n      const property = column['property']\r\n      return row[property] === value\r\n    },\r\n    // 刷新表格\r\n    refreshTable() {\r\n      this.load()\r\n    },\r\n    // 删除\r\n    deleteRow(index, row) {\r\n      this.$confirm('确认删除该用户吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let deleteId = row.userId\r\n          request.delete('/user/' + deleteId).then(res => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: '删除成功！',\r\n                type: 'success'\r\n              })\r\n              this.load()\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    // 编辑\r\n    handleEdit(row) {\r\n      this.isAdd = false\r\n      this.form = row\r\n      this.dialogFormVisible = true\r\n    },\r\n    search() {\r\n      this.load()\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.pageNum = val\r\n      this.load()\r\n    },\r\n    // 加载表格数据\r\n    load() {\r\n      request\r\n        .get('/user', {\r\n          params: {\r\n            pageNum: this.pageNum,\r\n            pageSize: this.pageSize,\r\n            key: this.key\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.code == '0') {\r\n            this.$message({\r\n              message: res.msg,\r\n              type: 'success',\r\n              duration: 1000\r\n            })\r\n            this.total = res.data.total\r\n            this.tableData = []\r\n            console.log(res.data)\r\n            res?.data?.data?.forEach((item, index) => {\r\n              item.index = index + 1\r\n              this.tableData.push(item)\r\n            })\r\n          }\r\n        })\r\n    },\r\n    addUser() {\r\n      this.isAdd = true\r\n      this.dialogFormVisible = true\r\n      this.form = {}\r\n    },\r\n    save() {\r\n      if (this.form.userId) {\r\n        request\r\n          .post('user/account', this.form)\r\n          .then(res => {\r\n            if (res.code === '0') {\r\n              this.dialogFormVisible = false\r\n            } else {\r\n              this.$message({\r\n                message: '修改失败，请联系管理员！',\r\n                type: 'failed'\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n          })\r\n          .then(() => {\r\n            // 刷新表格数据\r\n            this.load()\r\n          })\r\n      } else {\r\n        // 添加新用户\r\n        request\r\n          .post('/user/add', this.form)\r\n          .then(res => {\r\n            if (res.code === '0') {\r\n              this.dialogFormVisible = false\r\n              this.load()\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {})\r\n      }\r\n    },\r\n    resetPassword(user) {\r\n      this.$confirm('确定要重置该用户密码?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let uId = user.userId\r\n          request.patch('/user/reset/' + uId).then(res => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success',\r\n                duration: 1000\r\n              })\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消'\r\n          })\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n  }\r\n}\r\n</script>\r\n"]}]}