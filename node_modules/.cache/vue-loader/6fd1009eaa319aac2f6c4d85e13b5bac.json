{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/admin/users/AllShops.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/admin/users/AllShops.vue","mtime":1677682822546},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi8uLi8uLi91dGlscy9yZXF1ZXN0Jw0KY29uc3QgU3ViSGVhZGVyID0gKCkgPT4gaW1wb3J0KCcuLi8uLi9jb21wb25lbnRzL1N1YkhlYWRlci52dWUnKQ0KY29uc3QgQ29udGFpbmVyID0gKCkgPT4gaW1wb3J0KCcuLi8uLi9jb21wb25lbnRzL0NvbnRhaW5lci52dWUnKQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBTdWJIZWFkZXIsDQogICAgQ29udGFpbmVyDQogIH0sDQogIG5hbWU6ICdIb21lJywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZm9ybToge30sDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTI6IGZhbHNlLA0KICAgICAgLy8gcGFnZVNpemXmmK/ooajnpLrkuIDpobXmnIDlpJrlj6/ku6Xoo4Xlh6DmnaHmlbDmja4NCiAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgIC8vIOihqOekuuivt+axguesrOWHoOmhteaVsOaNrg0KICAgICAgcGFnZU51bTogMSwNCiAgICAgIC8vIOafpeivouWFs+mUruWtlw0KICAgICAga2V5OiAnJywNCiAgICAgIC8vIOaAu+WFseWHoOadoeaVsOaNrg0KICAgICAgdG90YWw6IDAsDQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgc2hvcFByb2R1Y3RzOiBbXQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOWPkemAgeivt+axgizorr7nva7nlKjmiLfnirbmgIENCiAgICBzZXRTdGF0dXMoc3RhdHVzLCB1SWQpIHsNCiAgICAgIHJlcXVlc3QNCiAgICAgICAgLnBhdGNoKCcvdXNlci8nICsgdUlkICsgJy8nICsgc3RhdHVzKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7fSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgfSwNCiAgICBkZWxldGVQKGluZGV4LCByb3dzKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaQsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICBsZXQgZGVsZXRlSWQgPSByb3dzW2luZGV4XS5wcm9kdWN0SWQNCiAgICAgICAgICByb3dzLnNwbGljZShpbmRleCwgMSkNCiAgICAgICAgICByZXF1ZXN0LmRlbGV0ZSgnL3Byb2R1Y3QvJyArIGRlbGV0ZUlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip/vvIEnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgY29uc29sZS5sb2coZGVsZXRlSWQpDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgfSwNCiAgICBzZWVEZXRhaWwocm93KSB7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlMiA9IHRydWUNCiAgICAgIHJlcXVlc3QuZ2V0KCcvcHJvZHVjdC9zaG9wX2lkLycgKyByb3cuc2hvcElkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy5zaG9wUHJvZHVjdHMgPSBbXQ0KICAgICAgICByZXMuZGF0YS5mb3JFYWNoKChlLCBpKSA9PiB7DQogICAgICAgICAgZS5pbmRleCA9IGkgKyAxDQogICAgICAgICAgdGhpcy5zaG9wUHJvZHVjdHMucHVzaChlKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGNsZWFyRmlsdGVyKCkgew0KICAgICAgdGhpcy4kcmVmcy5maWx0ZXJUYWJsZS5jbGVhckZpbHRlcigpDQogICAgfSwNCiAgICBmb3JtYXR0ZXIocm93LCBjb2x1bW4pIHsNCiAgICAgIHJldHVybiByb3cuYWRkcmVzcw0KICAgIH0sDQogICAgZmlsdGVyVGFnKHZhbHVlLCByb3cpIHsNCiAgICAgIHJldHVybiByb3cucm9sZSA9PT0gdmFsdWUNCiAgICB9LA0KICAgIGZpbHRlckhhbmRsZXIodmFsdWUsIHJvdywgY29sdW1uKSB7DQogICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsncHJvcGVydHknXQ0KICAgICAgcmV0dXJuIHJvd1twcm9wZXJ0eV0gPT09IHZhbHVlDQogICAgfSwNCiAgICAvLyDliLfmlrDooajmoLwNCiAgICByZWZyZXNoVGFibGUoKSB7DQogICAgICB0aGlzLmxvYWQoKQ0KICAgIH0sDQogICAgLy8g5Yig6ZmkDQogICAgZGVsZXRlUm93KGluZGV4LCByb3cpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOWIoOmZpOivpeeUqOaIt+WQlz8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICBsZXQgZGVsZXRlSWQgPSByb3cudXNlcklkDQogICAgICAgICAgcmVxdWVzdC5kZWxldGUoJy91c2VyLycgKyBkZWxldGVJZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5Yqf77yBJywNCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgdGhpcy5sb2FkKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcNCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgLy8g57yW6L6RDQogICAgaGFuZGxlRWRpdChyb3cpIHsNCiAgICAgIHRoaXMuZm9ybSA9IHJvdw0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIHNlYXJjaCgpIHsNCiAgICAgIHRoaXMubG9hZCgpDQogICAgfSwNCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbA0KICAgICAgdGhpcy5sb2FkKCkNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKQ0KICAgICAgdGhpcy5wYWdlTnVtID0gdmFsDQogICAgICB0aGlzLmxvYWQoKQ0KICAgIH0sDQogICAgLy8g5Yqg6L296KGo5qC85pWw5o2uDQogICAgbG9hZCgpIHsNCiAgICAgIHJlcXVlc3QNCiAgICAgICAgLmdldCgnL3VzZXInLCB7DQogICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICAvLyAh6K6+572u5qCH5b+X5a2X5q6177yM6KGo56S65p+l6K+i5omA5pyJ5bqX5a62DQogICAgICAgICAgICBmbGFnOiAnc2hvcCcsDQogICAgICAgICAgICBwYWdlTnVtOiB0aGlzLnBhZ2VOdW0sDQogICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwNCiAgICAgICAgICAgIGtleTogdGhpcy5rZXkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gJzAnKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywNCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbA0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbXQ0KICAgICAgICAgICAgcmVzLmRhdGEuZGF0YS5mb3JFYWNoKChlLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICByZXF1ZXN0DQogICAgICAgICAgICAgICAgLmdldCgnL3Nob3AvJyArIGUudXNlcklkKQ0KICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICAgIGUuc2hvcE5hbWUgPSByZXMuZGF0YS5zaG9wTmFtZQ0KICAgICAgICAgICAgICAgICAgZS5zaG9wSWQgPSByZXMuZGF0YS5zaG9wSWQNCiAgICAgICAgICAgICAgICAgIGUuaW5jb21lID0gcmVzLmRhdGEuaW5jb21lDQogICAgICAgICAgICAgICAgICBlLmluZGV4ID0gaW5kZXggKyAxDQogICAgICAgICAgICAgICAgICBlLmNyZWF0ZVRpbWUgPSBlLmNyZWF0ZVRpbWUuc2xpY2UoMCwgMTApDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKGUpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgc2F2ZSgpIHsNCiAgICAgIC8vIOS/ruaUueWVhuWutuaVsOaNrg0KICAgICAgcmVxdWVzdA0KICAgICAgICAucG9zdCgndXNlci9hY2NvdW50JywgdGhpcy5mb3JtKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsNCiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueWksei0pe+8jOivt+iBlOezu+euoeeQhuWRmO+8gScsDQogICAgICAgICAgICAgIHR5cGU6ICdmYWlsZWQnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAvLyDliLfmlrDooajmoLzmlbDmja4NCiAgICAgICAgICB0aGlzLmxvYWQoKQ0KICAgICAgICB9KQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmxvYWQoKQ0KICB9DQp9DQo="},{"version":3,"sources":["AllShops.vue"],"names":[],"mappings":";AAqMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AllShops.vue","sourceRoot":"src/pages/admin/users","sourcesContent":["<template>\r\n  <Container>\r\n    <template slot>\r\n      <SubHeader>\r\n        <template v-slot>管理所有商家</template>\r\n      </SubHeader>\r\n      <el-form @submit.native.prevent>\r\n        <el-input\r\n          v-model=\"key\"\r\n          placeholder=\"请输入内容\"\r\n          style=\"margin-top: 10px; width: 250px\"\r\n          clearable\r\n        ></el-input>\r\n        <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"search\"\r\n          >查询</el-button\r\n        >\r\n        <el-button type=\"primary\" @click=\"refreshTable\">刷新</el-button>\r\n      </el-form>\r\n      <el-table :data=\"tableData\" style=\"margin-top: 10px\" border stripe>\r\n        <el-table-column\r\n          prop=\"index\"\r\n          label=\"序号\"\r\n          sortable\r\n          style=\"height: 30px\"\r\n          width=\"70px\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"username\" label=\"用户名\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"realName\" label=\"真实姓名\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"telephone\" label=\"联系电话\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"shopName\" label=\"店铺名字\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createTime\" label=\"开店时间\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"income\" label=\"总收入\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"status\"\r\n          label=\"账号状态\"\r\n          width=\"100px\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.status\"\r\n              :active-value=\"1\"\r\n              :inactive-value=\"0\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              @change=\"setStatus($event, scope.row.userId)\"\r\n            >\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          align=\"center\"\r\n          fixed=\"right\"\r\n          label=\"操作\"\r\n          width=\"160px\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              @click=\"handleEdit(scope.row)\"\r\n              size=\"mini\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              circle\r\n            ></el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              circle\r\n              size=\"mini\"\r\n              @click.native.prevent=\"deleteRow(scope.$index, scope.row)\"\r\n            ></el-button>\r\n            <el-button\r\n              type=\"warning\"\r\n              size=\"mini\"\r\n              circle=\"\"\r\n              @click.native.prevent=\"seeDetail(scope.row)\"\r\n            >\r\n              <i class=\"far fa-eye\"></i>\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 查看商品 -->\r\n      <el-dialog\r\n        title=\"查看该店所有商品\"\r\n        :visible.sync=\"dialogFormVisible2\"\r\n        width=\"70%\"\r\n      >\r\n        <el-table :data=\"shopProducts\" border>\r\n          <el-table-column\r\n            prop=\"index\"\r\n            label=\"序号\"\r\n            width=\"100px\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"productName\"\r\n            label=\"商品名称\"\r\n            width=\"130px\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"productPrice\"\r\n            label=\"单价\"\r\n            width=\"70px\"\r\n            align=\"center\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column label=\"商品图片\" align=\"center\" width=\"100px\">\r\n            <template #default=\"scope\">\r\n              <el-image\r\n                style=\"height: 70px\"\r\n                :src=\"scope.row.imgSrc\"\r\n                :preview-src-list=\"[scope.row.imgSrc]\"\r\n              >\r\n              </el-image>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"productDesc\"\r\n            label=\"描述\"\r\n            show-overflow-tooltip\r\n          >\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" align=\"center\" width=\"100px\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                @click.native.prevent=\"deleteP(scope.$index, shopProducts)\"\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                circle\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible2 = false\">取 消</el-button>\r\n          <el-button type=\"primary\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-sizes=\"[5, 10, 100]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        style=\"margin-top: 10px\"\r\n      >\r\n      </el-pagination>\r\n\r\n      <!-- 修改信息弹出 -->\r\n      <el-dialog\r\n        title=\"填入个人信息\"\r\n        :visible.sync=\"dialogFormVisible\"\r\n        width=\"50%\"\r\n      >\r\n        <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\r\n          <el-form-item label=\"真实姓名\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.realName\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系电话\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.telephone\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"店铺名字\" style=\"margin-bottom: 7px\">\r\n            <el-input v-model=\"form.shopName\" style=\"width: 200px\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"权限角色\" style=\"margin-bottom: 7px\">\r\n            <el-radio-group v-model=\"form.role\">\r\n              <el-radio label=\"admin\">管理员</el-radio>\r\n              <el-radio label=\"shop\">商家</el-radio>\r\n              <el-radio label=\"user\">客户</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </template>\r\n  </Container>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../utils/request'\r\nconst SubHeader = () => import('../../components/SubHeader.vue')\r\nconst Container = () => import('../../components/Container.vue')\r\n\r\nexport default {\r\n  components: {\r\n    SubHeader,\r\n    Container\r\n  },\r\n  name: 'Home',\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      dialogFormVisible2: false,\r\n      // pageSize是表示一页最多可以装几条数据\r\n      pageSize: 10,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      // 查询关键字\r\n      key: '',\r\n      // 总共几条数据\r\n      total: 0,\r\n      tableData: [],\r\n      shopProducts: []\r\n    }\r\n  },\r\n  methods: {\r\n    // 发送请求,设置用户状态\r\n    setStatus(status, uId) {\r\n      request\r\n        .patch('/user/' + uId + '/' + status)\r\n        .then((res) => {})\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    deleteP(index, rows) {\r\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let deleteId = rows[index].productId\r\n          rows.splice(index, 1)\r\n          request.delete('/product/' + deleteId).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: '删除成功！',\r\n                type: 'success'\r\n              })\r\n            }\r\n          })\r\n          console.log(deleteId)\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    seeDetail(row) {\r\n      this.dialogFormVisible2 = true\r\n      request.get('/product/shop_id/' + row.shopId).then((res) => {\r\n        this.shopProducts = []\r\n        res.data.forEach((e, i) => {\r\n          e.index = i + 1\r\n          this.shopProducts.push(e)\r\n        })\r\n      })\r\n    },\r\n    clearFilter() {\r\n      this.$refs.filterTable.clearFilter()\r\n    },\r\n    formatter(row, column) {\r\n      return row.address\r\n    },\r\n    filterTag(value, row) {\r\n      return row.role === value\r\n    },\r\n    filterHandler(value, row, column) {\r\n      const property = column['property']\r\n      return row[property] === value\r\n    },\r\n    // 刷新表格\r\n    refreshTable() {\r\n      this.load()\r\n    },\r\n    // 删除\r\n    deleteRow(index, row) {\r\n      this.$confirm('确认删除该用户吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let deleteId = row.userId\r\n          request.delete('/user/' + deleteId).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: '删除成功！',\r\n                type: 'success'\r\n              })\r\n              this.load()\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    // 编辑\r\n    handleEdit(row) {\r\n      this.form = row\r\n      this.dialogFormVisible = true\r\n    },\r\n    search() {\r\n      this.load()\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.pageNum = val\r\n      this.load()\r\n    },\r\n    // 加载表格数据\r\n    load() {\r\n      request\r\n        .get('/user', {\r\n          params: {\r\n            // !设置标志字段，表示查询所有店家\r\n            flag: 'shop',\r\n            pageNum: this.pageNum,\r\n            pageSize: this.pageSize,\r\n            key: this.key\r\n          }\r\n        })\r\n        .then((res) => {\r\n          if (res.code == '0') {\r\n            this.$message({\r\n              message: res.msg,\r\n              type: 'success',\r\n              duration: 1000\r\n            })\r\n            this.total = res.data.total\r\n            this.tableData = []\r\n            res.data.data.forEach((e, index) => {\r\n              request\r\n                .get('/shop/' + e.userId)\r\n                .then((res) => {\r\n                  e.shopName = res.data.shopName\r\n                  e.shopId = res.data.shopId\r\n                  e.income = res.data.income\r\n                  e.index = index + 1\r\n                  e.createTime = e.createTime.slice(0, 10)\r\n                })\r\n                .then(() => {\r\n                  this.tableData.push(e)\r\n                })\r\n            })\r\n          }\r\n        })\r\n    },\r\n    save() {\r\n      // 修改商家数据\r\n      request\r\n        .post('user/account', this.form)\r\n        .then((res) => {\r\n          if (res.code === '0') {\r\n            this.dialogFormVisible = false\r\n          } else {\r\n            this.$message({\r\n              message: '修改失败，请联系管理员！',\r\n              type: 'failed'\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        .then(() => {\r\n          // 刷新表格数据\r\n          this.load()\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n  }\r\n}\r\n</script>\r\n"]}]}