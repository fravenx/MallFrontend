{"remainingRequest":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/shop/products/Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/src/pages/shop/products/Product.vue","mtime":1677682822547},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengwanjie/file/IdeaProjects/mall/mall-system/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi8uLi8uLi91dGlscy9yZXF1ZXN0Jw0KY29uc3QgU3ViSGVhZGVyID0gKCkgPT4gaW1wb3J0KCcuLi8uLi9jb21wb25lbnRzL1N1YkhlYWRlci52dWUnKQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBTdWJIZWFkZXINCiAgfSwNCiAgbmFtZTogJ0hvbWUnLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmb3JtOiB7fSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMjogZmFsc2UsDQogICAgICAvLyBwYWdlU2l6ZeaYr+ihqOekuuS4gOmhteacgOWkmuWPr+S7peijheWHoOadoeaVsOaNrg0KICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgLy8g6KGo56S66K+35rGC56ys5Yeg6aG15pWw5o2uDQogICAgICBwYWdlTnVtOiAxLA0KICAgICAgLy8g5p+l6K+i5YWz6ZSu5a2XDQogICAgICBrZXk6ICcnLA0KICAgICAgLy8g5oC75YWx5Yeg5p2h5pWw5o2uDQogICAgICB0b3RhbDogMCwNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICBvcHRpb25zOiBbXSwNCiAgICAgIHZhbHVlOiAnJywNCiAgICAgIHRpbWVyOiBudWxsLA0KICAgICAgdUlkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmxvYWQoKQ0KICAgIHJlcXVlc3QNCiAgICAgIC5nZXQoJy9jYXRlZ29yeS9hbGwnKQ0KICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLm9wdGlvbnMgPSBbXQ0KICAgICAgICByZXMuZm9yRWFjaCgoYykgPT4gew0KICAgICAgICAgIGxldCBbdmFsdWUsIGxhYmVsXSA9IFtjLmNhdGVnb3J5SWQsIGMuY2F0ZWdvcnlOYW1lXQ0KICAgICAgICAgIGxldCBjYXRlZ29yeSA9IHsgdmFsdWUsIGxhYmVsIH0NCiAgICAgICAgICB0aGlzLm9wdGlvbnMucHVzaChjYXRlZ29yeSkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICB9KQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g5Yi35paw6KGo5qC8DQogICAgcmVmcmVzaFRhYmxlKCkgew0KICAgICAgdGhpcy5sb2FkKCkNCiAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICBtZXNzYWdlOiAn5Yi35paw5oiQ5Yqf77yBJywNCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5Yig6ZmkDQogICAgZGVsZXRlUm93KGluZGV4LCByb3dzKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaQsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICBsZXQgZGVsZXRlSWQgPSByb3dzW2luZGV4XS5wcm9kdWN0SWQNCiAgICAgICAgICByb3dzLnNwbGljZShpbmRleCwgMSkNCiAgICAgICAgICByZXF1ZXN0LmRlbGV0ZSgnL3Byb2R1Y3QvJyArIGRlbGV0ZUlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip/vvIEnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgfSwNCiAgICAvLyDnvJbovpENCiAgICBoYW5kbGVFZGl0KHJvdykgew0KICAgICAgdGhpcy5mb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb3cpKQ0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCg0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzWyd1cGxvYWQnXS5jbGVhckZpbGVzKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDmn6XnnIvplIDllK7kv6Hmga8NCiAgICBzaG93U2FsZShyb3cpIHsNCiAgICAgIHRoaXMuZm9ybSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm93KSkNCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUyID0gdHJ1ZQ0KICAgIH0sDQogICAgc2VhcmNoKCkgew0KICAgICAgdGhpcy5sb2FkKCkNCiAgICB9LA0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKQ0KICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbA0KICAgICAgdGhpcy5sb2FkKCkNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKQ0KICAgICAgdGhpcy5wYWdlTnVtID0gdmFsDQogICAgICB0aGlzLmxvYWQoKQ0KICAgIH0sDQogICAgLy8g5Yqg6L296KGo5qC85pWw5o2uDQogICAgbG9hZCgpIHsNCiAgICAgIGxldCB1SWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKQ0KICAgICAgcmVxdWVzdA0KICAgICAgICAuZ2V0KCcvcHJvZHVjdC9zaG9wJywgew0KICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLA0KICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsDQogICAgICAgICAgICBrZXk6IHRoaXMua2V5LA0KICAgICAgICAgICAgb3duZXJJZDogdUlkDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsDQogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbXQ0KICAgICAgICAgIHJlcy5kYXRhLmRhdGEuZm9yRWFjaCgoZSwgaSkgPT4gew0KICAgICAgICAgICAgZS5pbmRleCA9IGkgKyAxDQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKGUpDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIGFkZFByb2R1Y3QoKSB7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQ0KICAgICAgdGhpcy5mb3JtID0ge30NCiAgICAgIC8vIOa4heepuuWOn+aWh+S7tuWGheWuuQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzWyd1cGxvYWQnXS5jbGVhckZpbGVzKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICB1cGxvYWRTdWNjZXNzKHJlcykgew0KICAgICAgLy8gY29uc29sZS5sb2cocmVzKQ0KICAgICAgdGhpcy5mb3JtLmltZ1NyYyA9IHJlcy5kYXRhDQogICAgfSwNCiAgICBnZXRDYXRlZ29yeSh2YWwpIHsNCiAgICAgIGxldCByZXMgPSAnJw0KICAgICAgdGhpcy5vcHRpb25zLnNvbWUoKGl0ZW0pID0+IHsNCiAgICAgICAgaWYgKHZhbCA9PSBpdGVtLnZhbHVlKSB7DQogICAgICAgICAgcmVzID0gaXRlbS5sYWJlbA0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICByZXR1cm4gcmVzDQogICAgfSwNCiAgICBnZXRTaG9wSW5mbygpIHsNCiAgICAgIHJldHVybiByZXF1ZXN0LmdldCgnL3Nob3AvJyArIHRoaXMudUlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgcmV0dXJuIHJlcw0KICAgICAgfSkNCiAgICB9LA0KICAgIHNhdmUoKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm0pDQogICAgICBpZiAodGhpcy5mb3JtLnByb2R1Y3RJZCkgew0KICAgICAgICAvLyDoi6XmraTosIPmlbDmja7mnIlpZO+8jOWImei/m+ihjOabtOaWsOaTjeS9nO+8jOWQjOatpeaVsOaNruW6k++8jOi/m+ihjFBVVOivt+axgg0KICAgICAgICByZXF1ZXN0DQogICAgICAgICAgLnB1dCgnL3Byb2R1Y3QnLCB0aGlzLmZvcm0pDQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsNCiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmga3llpzkvaDvvIzkv67mlLnmiJDlip/vvIEnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueWksei0pe+8jOivt+iBlOezu+euoeeQhuWRmO+8gScsDQogICAgICAgICAgICAgICAgdHlwZTogJ2ZhaWxlZCcNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgICAgfSkNCiAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAvLyDliLfmlrDooajmoLzmlbDmja4NCiAgICAgICAgICAgIHRoaXMubG9hZCgpDQogICAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZ2V0U2hvcEluZm8oKS50aGVuKChyZXMxKSA9PiB7DQogICAgICAgICAgdGhpcy5mb3JtLnNob3BJZCA9IHJlczEuZGF0YS5zaG9wSWQNCiAgICAgICAgICB0aGlzLmZvcm0uc29sZCA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICg1MDAgLSAxMDApKSArIDEwMA0KICAgICAgICAgIHJlcXVlc3QNCiAgICAgICAgICAgIC5wb3N0KCcvcHJvZHVjdCcsIHRoaXMuZm9ybSkNCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpDQogICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICB0aGlzLmxvYWQoKQ0KICAgICAgICAgICAgICAgIH0sIDEwMDApDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAvLyDliLfmlrDooajmoLzmlbDmja4NCiAgICAgICAgICAgICAgdGhpcy5sb2FkKCkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Product.vue"],"names":[],"mappings":";AA0MA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src/pages/shop/products","sourcesContent":["<template>\r\n  <el-col class=\"container\">\r\n    <SubHeader>\r\n      <template v-slot> 管理本店所有商品 </template>\r\n    </SubHeader>\r\n    <el-form @submit.native.prevent>\r\n      <el-input\r\n        v-model=\"key\"\r\n        placeholder=\"请输入内容\"\r\n        style=\"margin-top: 10px; width: 250px\"\r\n        clearable\r\n      ></el-input>\r\n      <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"search\"\r\n        >查询</el-button\r\n      >\r\n      <el-button type=\"primary\" @click=\"addProduct\">新增</el-button>\r\n      <el-button type=\"primary\" @click=\"refreshTable\">刷新</el-button>\r\n    </el-form>\r\n\r\n    <el-table :data=\"tableData\" style=\"margin-top: 10px\" border stripe>\r\n      <el-table-column\r\n        prop=\"index\"\r\n        label=\"序号\"\r\n        width=\"70px\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        prop=\"productName\"\r\n        label=\"商品名\"\r\n        width=\"80px\"\r\n        align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"productPrice\"\r\n        sortable\r\n        label=\"单价\"\r\n        width=\"90px\"\r\n        align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <!-- <el-table-column prop=\"imgSrc\" label=\"封面\"> </el-table-column> -->\r\n      <el-table-column label=\"分类\" width=\"80px\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <div>{{ getCategory(scope.row.categoryId) }}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"weight\" label=\"重量\" width=\"70px\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"discount\" label=\"折扣\" width=\"70px\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"left\" label=\"剩余\" width=\"70px\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column label=\"封面\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-image\r\n            style=\"height: 100px\"\r\n            :src=\"scope.row.imgSrc\"\r\n            :preview-src-list=\"[scope.row.imgSrc]\"\r\n          >\r\n          </el-image>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"productDesc\" label=\"描述\" show-overflow-tooltip>\r\n      </el-table-column>\r\n\r\n      <el-table-column fixed=\"right\" label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            @click=\"handleEdit(scope.row)\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            circle\r\n            size=\"mini\"\r\n          ></el-button>\r\n          <el-tooltip content=\"查看商品销售信息\" placement=\"top\">\r\n            <el-button\r\n              @click=\"showSale(scope.row)\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-info\"\r\n              circle\r\n              size=\"mini\"\r\n            ></el-button>\r\n          </el-tooltip>\r\n\r\n          <el-button\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            circle\r\n            size=\"mini\"\r\n            @click.native.prevent=\"deleteRow(scope.$index, tableData)\"\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :page-sizes=\"[5, 10, 100]\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n      style=\"margin-top: 10px\"\r\n    >\r\n    </el-pagination>\r\n\r\n    <!-- 修改商品弹出 -->\r\n    <el-dialog\r\n      title=\"填写商品信息\"\r\n      :visible.sync=\"dialogFormVisible\"\r\n      class=\"add\"\r\n    >\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"60px\">\r\n        <el-row type=\"flex\">\r\n          <el-col>\r\n            <el-form-item label=\"商品名\" style=\"margin-bottom: 7px\">\r\n              <el-input\r\n                v-model=\"form.productName\"\r\n                style=\"width: 200px\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"单价\" style=\"margin-bottom: 7px\">\r\n              <el-input\r\n                v-model=\"form.productPrice\"\r\n                style=\"width: 200px\"\r\n              ></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"分类\" style=\"margin-bottom: 7px\">\r\n              <el-select\r\n                v-model=\"form.categoryId\"\r\n                placeholder=\"请选择\"\r\n                style=\"width: 200px\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in options\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"重量\" style=\"margin-bottom: 7px\">\r\n              <el-input v-model=\"form.weight\" style=\"width: 200px\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"描述\" style=\"margin-bottom: 7px\">\r\n              <el-input\r\n                type=\"textarea\"\r\n                v-model=\"form.productDesc\"\r\n                style=\"width: 200px\"\r\n                rows=\"6\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item label=\"折扣\" style=\"margin-bottom: 7px\">\r\n              <el-input v-model=\"form.discount\" style=\"width: 200px\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"剩余\" style=\"margin-bottom: 7px\">\r\n              <el-input v-model=\"form.left\" style=\"width: 200px\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"封面\">\r\n              <el-upload\r\n                :action=\"\r\n                  'http://' +\r\n                  this.$root.$children[0]._data.filesUploadUrl +\r\n                  '/files/upload'\r\n                \"\r\n                :on-success=\"uploadSuccess\"\r\n                ref=\"upload\"\r\n              >\r\n                <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n              </el-upload>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 查看商品销售信息弹出 -->\r\n    <el-dialog title=\"商品销售情况\" :visible.sync=\"dialogFormVisible2\">\r\n      <el-descriptions :column=\"2\" :border=\"true\" direction=\"vertical\">\r\n        <el-descriptions-item label=\"已售量\">{{\r\n          form.sold\r\n        }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"商品评分\">{{\r\n          form.rate\r\n        }}</el-descriptions-item>\r\n      </el-descriptions>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible2 = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-col>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../../utils/request'\r\nconst SubHeader = () => import('../../components/SubHeader.vue')\r\n\r\nexport default {\r\n  components: {\r\n    SubHeader\r\n  },\r\n  name: 'Home',\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      dialogFormVisible2: false,\r\n      // pageSize是表示一页最多可以装几条数据\r\n      pageSize: 10,\r\n      // 表示请求第几页数据\r\n      pageNum: 1,\r\n      // 查询关键字\r\n      key: '',\r\n      // 总共几条数据\r\n      total: 0,\r\n      tableData: [],\r\n      options: [],\r\n      value: '',\r\n      timer: null,\r\n      uId: sessionStorage.getItem('userId')\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n    request\r\n      .get('/category/all')\r\n      .then((res) => {\r\n        this.options = []\r\n        res.forEach((c) => {\r\n          let [value, label] = [c.categoryId, c.categoryName]\r\n          let category = { value, label }\r\n          this.options.push(category)\r\n        })\r\n      })\r\n      .catch((err) => {\r\n        console.log(err)\r\n      })\r\n  },\r\n  methods: {\r\n    // 刷新表格\r\n    refreshTable() {\r\n      this.load()\r\n      this.$message({\r\n        message: '刷新成功！',\r\n        type: 'success'\r\n      })\r\n    },\r\n    // 删除\r\n    deleteRow(index, rows) {\r\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          let deleteId = rows[index].productId\r\n          rows.splice(index, 1)\r\n          request.delete('/product/' + deleteId).then((res) => {\r\n            if (res.code === '0') {\r\n              this.$message({\r\n                message: '删除成功！',\r\n                type: 'success'\r\n              })\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    // 编辑\r\n    handleEdit(row) {\r\n      this.form = JSON.parse(JSON.stringify(row))\r\n      this.dialogFormVisible = true\r\n\r\n      this.$nextTick(() => {\r\n        this.$refs['upload'].clearFiles()\r\n      })\r\n    },\r\n    // 查看销售信息\r\n    showSale(row) {\r\n      this.form = JSON.parse(JSON.stringify(row))\r\n      this.dialogFormVisible2 = true\r\n    },\r\n    search() {\r\n      this.load()\r\n    },\r\n    handleSizeChange(val) {\r\n      // console.log(`每页 ${val} 条`)\r\n      this.pageSize = val\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.pageNum = val\r\n      this.load()\r\n    },\r\n    // 加载表格数据\r\n    load() {\r\n      let uId = sessionStorage.getItem('userId')\r\n      request\r\n        .get('/product/shop', {\r\n          params: {\r\n            pageNum: this.pageNum,\r\n            pageSize: this.pageSize,\r\n            key: this.key,\r\n            ownerId: uId\r\n          }\r\n        })\r\n        .then((res) => {\r\n          this.total = res.data.total\r\n          this.tableData = []\r\n          res.data.data.forEach((e, i) => {\r\n            e.index = i + 1\r\n            this.tableData.push(e)\r\n          })\r\n        })\r\n    },\r\n    addProduct() {\r\n      this.dialogFormVisible = true\r\n      this.form = {}\r\n      // 清空原文件内容\r\n      this.$nextTick(() => {\r\n        this.$refs['upload'].clearFiles()\r\n      })\r\n    },\r\n    uploadSuccess(res) {\r\n      // console.log(res)\r\n      this.form.imgSrc = res.data\r\n    },\r\n    getCategory(val) {\r\n      let res = ''\r\n      this.options.some((item) => {\r\n        if (val == item.value) {\r\n          res = item.label\r\n          return true\r\n        }\r\n      })\r\n      return res\r\n    },\r\n    getShopInfo() {\r\n      return request.get('/shop/' + this.uId).then((res) => {\r\n        return res\r\n      })\r\n    },\r\n    save() {\r\n      // console.log(this.form)\r\n      if (this.form.productId) {\r\n        // 若此调数据有id，则进行更新操作，同步数据库，进行PUT请求\r\n        request\r\n          .put('/product', this.form)\r\n          .then((res) => {\r\n            if (res.code === '0') {\r\n              this.dialogFormVisible = false\r\n              this.$message({\r\n                message: '恭喜你，修改成功！',\r\n                type: 'success'\r\n              })\r\n            } else {\r\n              this.$message({\r\n                message: '修改失败，请联系管理员！',\r\n                type: 'failed'\r\n              })\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n          .then(() => {\r\n            // 刷新表格数据\r\n            this.load()\r\n          })\r\n      } else {\r\n        this.getShopInfo().then((res1) => {\r\n          this.form.shopId = res1.data.shopId\r\n          this.form.sold = Math.round(Math.random() * (500 - 100)) + 100\r\n          request\r\n            .post('/product', this.form)\r\n            .then((res) => {\r\n              if (res.code === '0') {\r\n                this.$message({\r\n                  message: res.msg,\r\n                  type: 'success',\r\n                  duration: 1000\r\n                })\r\n                clearTimeout(this.timer)\r\n                this.timer = setTimeout(() => {\r\n                  this.dialogFormVisible = false\r\n                  this.load()\r\n                }, 1000)\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              console.log(err)\r\n            })\r\n            .then(() => {\r\n              // 刷新表格数据\r\n              this.load()\r\n            })\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  padding: 20px;\r\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px,\r\n    rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;\r\n  border-radius: 5px;\r\n}\r\n</style>"]}]}